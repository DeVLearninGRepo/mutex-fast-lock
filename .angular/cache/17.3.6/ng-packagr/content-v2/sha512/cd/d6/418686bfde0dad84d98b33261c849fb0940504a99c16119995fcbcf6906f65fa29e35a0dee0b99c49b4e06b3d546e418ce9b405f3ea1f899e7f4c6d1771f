{"modules":[{"ast":{"type":"Program","start":0,"end":662,"body":[{"type":"ExportNamedDeclaration","start":0,"end":83,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":7,"end":83,"id":{"type":"Identifier","start":13,"end":32,"name":"MutexFastLockConfig"},"superClass":null,"body":{"type":"ClassBody","start":33,"end":83,"body":[{"type":"PropertyDefinition","start":39,"end":50,"static":false,"computed":false,"key":{"type":"Identifier","start":39,"end":49,"name":"lockPrefix"},"value":null},{"type":"PropertyDefinition","start":55,"end":63,"static":false,"computed":false,"key":{"type":"Identifier","start":55,"end":62,"name":"timeout"},"value":null},{"type":"PropertyDefinition","start":68,"end":81,"static":false,"computed":false,"key":{"type":"Identifier","start":68,"end":80,"name":"debugEnabled"},"value":null}]}}}],"_rollupRemoved":[{"end":662,"start":84,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"export class MutexFastLockConfig {\n    lockPrefix;\n    timeout;\n    debugEnabled;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsVUFBVSxDQUFTO0lBQ25CLE9BQU8sQ0FBUztJQUNoQixZQUFZLENBQVU7Q0FDdkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcclxuICBsb2NrUHJlZml4OiBzdHJpbmc7XHJcbiAgdGltZW91dDogbnVtYmVyO1xyXG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcclxufSJdfQ==","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexFastLockConfig {\n    lockPrefix;\n    timeout;\n    debugEnabled;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsVUFBVSxDQUFTO0lBQ25CLE9BQU8sQ0FBUztJQUNoQixZQUFZLENBQVU7Q0FDdkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcclxuICBsb2NrUHJlZml4OiBzdHJpbmc7XHJcbiAgdGltZW91dDogbnVtYmVyO1xyXG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcclxufSJdfQ==","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-fast-lock-config.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[32,0,0,32]],[[4,0,1,2],[14,0,1,12],[15,0,1,21]],[[4,0,2,2],[11,0,2,9],[12,0,2,18]],[[4,0,3,2],[16,0,3,14],[17,0,3,24]],[[1,0,4,1]]],"sourcesContent":["export class MutexFastLockConfig{\r\n  lockPrefix: string;\r\n  timeout: number;\r\n  debugEnabled: boolean;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":1081,"body":[{"type":"ExportNamedDeclaration","start":0,"end":186,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":7,"end":186,"id":{"type":"Identifier","start":13,"end":27,"name":"MutexLockStats"},"superClass":null,"body":{"type":"ClassBody","start":28,"end":186,"body":[{"type":"PropertyDefinition","start":34,"end":47,"static":false,"computed":false,"key":{"type":"Identifier","start":34,"end":46,"name":"restartCount"},"value":null},{"type":"PropertyDefinition","start":52,"end":62,"static":false,"computed":false,"key":{"type":"Identifier","start":52,"end":61,"name":"locksLost"},"value":null},{"type":"PropertyDefinition","start":67,"end":83,"static":false,"computed":false,"key":{"type":"Identifier","start":67,"end":82,"name":"contentionCount"},"value":null},{"type":"PropertyDefinition","start":88,"end":104,"static":false,"computed":false,"key":{"type":"Identifier","start":88,"end":103,"name":"acquireDuration"},"value":null},{"type":"PropertyDefinition","start":109,"end":122,"static":false,"computed":false,"key":{"type":"Identifier","start":109,"end":121,"name":"acquireStart"},"value":null},{"type":"PropertyDefinition","start":127,"end":138,"static":false,"computed":false,"key":{"type":"Identifier","start":127,"end":137,"name":"acquireEnd"},"value":null},{"type":"PropertyDefinition","start":143,"end":153,"static":false,"computed":false,"key":{"type":"Identifier","start":143,"end":152,"name":"lockStart"},"value":null},{"type":"PropertyDefinition","start":158,"end":166,"static":false,"computed":false,"key":{"type":"Identifier","start":158,"end":165,"name":"lockEnd"},"value":null},{"type":"PropertyDefinition","start":171,"end":184,"static":false,"computed":false,"key":{"type":"Identifier","start":171,"end":183,"name":"lockDuration"},"value":null}]}}}],"_rollupRemoved":[{"end":1081,"start":187,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"export class MutexLockStats {\n    restartCount;\n    locksLost;\n    contentionCount;\n    acquireDuration;\n    acquireStart;\n    acquireEnd;\n    lockStart;\n    lockEnd;\n    lockDuration;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0lBQ3pCLFlBQVksQ0FBUztJQUNyQixTQUFTLENBQVM7SUFDbEIsZUFBZSxDQUFTO0lBQ3hCLGVBQWUsQ0FBUztJQUN4QixZQUFZLENBQVM7SUFDckIsVUFBVSxDQUFTO0lBQ25CLFNBQVMsQ0FBUztJQUNsQixPQUFPLENBQVM7SUFDaEIsWUFBWSxDQUFTO0NBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcclxuICByZXN0YXJ0Q291bnQ6IG51bWJlcjtcclxuICBsb2Nrc0xvc3Q6IG51bWJlcjtcclxuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRHVyYXRpb246IG51bWJlcjtcclxuICBhY3F1aXJlU3RhcnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRW5kOiBudW1iZXI7XHJcbiAgbG9ja1N0YXJ0OiBudW1iZXI7XHJcbiAgbG9ja0VuZDogbnVtYmVyO1xyXG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xyXG59Il19","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexLockStats {\n    restartCount;\n    locksLost;\n    contentionCount;\n    acquireDuration;\n    acquireStart;\n    acquireEnd;\n    lockStart;\n    lockEnd;\n    lockDuration;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0lBQ3pCLFlBQVksQ0FBUztJQUNyQixTQUFTLENBQVM7SUFDbEIsZUFBZSxDQUFTO0lBQ3hCLGVBQWUsQ0FBUztJQUN4QixZQUFZLENBQVM7SUFDckIsVUFBVSxDQUFTO0lBQ25CLFNBQVMsQ0FBUztJQUNsQixPQUFPLENBQVM7SUFDaEIsWUFBWSxDQUFTO0NBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcclxuICByZXN0YXJ0Q291bnQ6IG51bWJlcjtcclxuICBsb2Nrc0xvc3Q6IG51bWJlcjtcclxuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRHVyYXRpb246IG51bWJlcjtcclxuICBhY3F1aXJlU3RhcnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRW5kOiBudW1iZXI7XHJcbiAgbG9ja1N0YXJ0OiBudW1iZXI7XHJcbiAgbG9ja0VuZDogbnVtYmVyO1xyXG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xyXG59Il19","originalSourcemap":{"version":3,"file":"mutex-lock-stats.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-lock-stats.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[27,0,0,27]],[[4,0,1,2],[16,0,1,14],[17,0,1,23]],[[4,0,2,2],[13,0,2,11],[14,0,2,20]],[[4,0,3,2],[19,0,3,17],[20,0,3,26]],[[4,0,4,2],[19,0,4,17],[20,0,4,26]],[[4,0,5,2],[16,0,5,14],[17,0,5,23]],[[4,0,6,2],[14,0,6,12],[15,0,6,21]],[[4,0,7,2],[13,0,7,11],[14,0,7,20]],[[4,0,8,2],[11,0,8,9],[12,0,8,18]],[[4,0,9,2],[16,0,9,14],[17,0,9,23]],[[1,0,10,1]]],"sourcesContent":["export class MutexLockStats {\r\n  restartCount: number;\r\n  locksLost: number;\r\n  contentionCount: number;\r\n  acquireDuration: number;\r\n  acquireStart: number;\r\n  acquireEnd: number;\r\n  lockStart: number;\r\n  lockEnd: number;\r\n  lockDuration: number;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":918,"body":[{"type":"ImportDeclaration","start":0,"end":47,"specifiers":[{"type":"ImportSpecifier","start":9,"end":23,"imported":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"},"local":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"}}],"source":{"type":"Literal","start":31,"end":46,"value":"@angular/core","raw":"'@angular/core'"},"attributes":[]},{"type":"ExportNamedDeclaration","start":48,"end":131,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"VariableDeclaration","start":55,"end":131,"kind":"const","declarations":[{"type":"VariableDeclarator","start":61,"end":130,"id":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"init":{"type":"NewExpression","start":86,"end":130,"callee":{"type":"Identifier","start":90,"end":104,"name":"InjectionToken"},"arguments":[{"type":"Literal","start":105,"end":129,"value":"MUTEX_FAST_LOCK_CONFIG","raw":"'MUTEX_FAST_LOCK_CONFIG'"}]}}]}}],"_rollupRemoved":[{"end":918,"start":132,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","customTransformCache":false,"dependencies":["@angular/core"],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.injector.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock-config.injector.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[23,0,0,23],[25,0,0,25],[31,0,0,31],[46,0,0,46],[47,0,0,47]],[[0,0,3,0],[6,0,3,6],[7,0,3,7],[13,0,3,13],[35,0,3,35],[38,0,3,38],[42,0,3,42],[56,0,3,56],[57,0,3,78],[81,0,3,102],[82,0,3,103],[83,0,3,104]]],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\r\n\r\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken<MutexFastLockConfig>('MUTEX_FAST_LOCK_CONFIG');"]},"resolvedIds":{"@angular/core":{"attributes":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":521,"body":[{"type":"ExportNamedDeclaration","start":0,"end":54,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":7,"end":54,"id":{"type":"Identifier","start":13,"end":21,"name":"LockItem"},"superClass":null,"body":{"type":"ClassBody","start":22,"end":54,"body":[{"type":"PropertyDefinition","start":28,"end":37,"static":false,"computed":false,"key":{"type":"Identifier","start":28,"end":36,"name":"clientId"},"value":null},{"type":"PropertyDefinition","start":42,"end":52,"static":false,"computed":false,"key":{"type":"Identifier","start":42,"end":51,"name":"expiresAt"},"value":null}]}}}],"_rollupRemoved":[{"end":521,"start":55,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"export class LockItem {\n    clientId;\n    expiresAt;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtJQUNuQixRQUFRLENBQVM7SUFDakIsU0FBUyxDQUFTO0NBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExvY2tJdGVte1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn0iXX0=","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class LockItem {\n    clientId;\n    expiresAt;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtJQUNuQixRQUFRLENBQVM7SUFDakIsU0FBUyxDQUFTO0NBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExvY2tJdGVte1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn0iXX0=","originalSourcemap":{"version":3,"file":"lock-item.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/lock-item.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[21,0,0,21]],[[4,0,1,2],[12,0,1,10],[13,0,1,19]],[[4,0,2,2],[13,0,2,11],[14,0,2,20]],[[1,0,3,1]]],"sourcesContent":["export class LockItem{\r\n  clientId: string;\r\n  expiresAt: number;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":27432,"body":[{"type":"ImportDeclaration","start":0,"end":51,"specifiers":[{"type":"ImportSpecifier","start":9,"end":15,"imported":{"type":"Identifier","start":9,"end":15,"name":"Inject"},"local":{"type":"Identifier","start":9,"end":15,"name":"Inject"}},{"type":"ImportSpecifier","start":17,"end":27,"imported":{"type":"Identifier","start":17,"end":27,"name":"Injectable"},"local":{"type":"Identifier","start":17,"end":27,"name":"Injectable"}}],"source":{"type":"Literal","start":35,"end":50,"value":"@angular/core","raw":"'@angular/core'"},"attributes":[]},{"type":"ImportDeclaration","start":52,"end":127,"specifiers":[{"type":"ImportSpecifier","start":61,"end":83,"imported":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":91,"end":126,"value":"./mutex-fast-lock-config.injector","raw":"'./mutex-fast-lock-config.injector'"},"attributes":[]},{"type":"ImportDeclaration","start":128,"end":187,"specifiers":[{"type":"ImportSpecifier","start":137,"end":151,"imported":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"},"local":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"}}],"source":{"type":"Literal","start":159,"end":186,"value":"./models/mutex-lock-stats","raw":"'./models/mutex-lock-stats'"},"attributes":[]},{"type":"ImportDeclaration","start":188,"end":222,"specifiers":[{"type":"ImportSpecifier","start":197,"end":207,"imported":{"type":"Identifier","start":197,"end":207,"name":"Observable"},"local":{"type":"Identifier","start":197,"end":207,"name":"Observable"}}],"source":{"type":"Literal","start":215,"end":221,"value":"rxjs","raw":"'rxjs'"},"attributes":[]},{"type":"ImportDeclaration","start":223,"end":269,"specifiers":[{"type":"ImportSpecifier","start":232,"end":240,"imported":{"type":"Identifier","start":232,"end":240,"name":"LockItem"},"local":{"type":"Identifier","start":232,"end":240,"name":"LockItem"}}],"source":{"type":"Literal","start":248,"end":268,"value":"./models/lock-item","raw":"'./models/lock-item'"},"attributes":[]},{"type":"ImportDeclaration","start":270,"end":306,"specifiers":[{"type":"ImportNamespaceSpecifier","start":277,"end":284,"local":{"type":"Identifier","start":282,"end":284,"name":"i0"}}],"source":{"type":"Literal","start":290,"end":305,"value":"@angular/core","raw":"\"@angular/core\""},"attributes":[]},{"type":"ImportDeclaration","start":307,"end":361,"specifiers":[{"type":"ImportNamespaceSpecifier","start":314,"end":321,"local":{"type":"Identifier","start":319,"end":321,"name":"i1"}}],"source":{"type":"Literal","start":327,"end":360,"value":"./models/mutex-fast-lock-config","raw":"\"./models/mutex-fast-lock-config\""},"attributes":[]},{"type":"ExportNamedDeclaration","start":362,"end":8083,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":369,"end":8083,"id":{"type":"Identifier","start":375,"end":395,"name":"MutexFastLockService"},"superClass":null,"body":{"type":"ClassBody","start":396,"end":8083,"body":[{"type":"PropertyDefinition","start":402,"end":410,"static":false,"computed":false,"key":{"type":"Identifier","start":402,"end":409,"name":"_config"},"value":null},{"type":"PropertyDefinition","start":415,"end":425,"static":false,"computed":false,"key":{"type":"Identifier","start":415,"end":424,"name":"_clientId"},"value":null},{"type":"PropertyDefinition","start":430,"end":439,"static":false,"computed":false,"key":{"type":"Identifier","start":430,"end":438,"name":"_xPrefix"},"value":null},{"type":"PropertyDefinition","start":444,"end":453,"static":false,"computed":false,"key":{"type":"Identifier","start":444,"end":452,"name":"_yPrefix"},"value":null},{"type":"MethodDefinition","start":458,"end":1199,"static":false,"computed":false,"key":{"type":"Identifier","start":458,"end":469,"name":"constructor"},"value":{"type":"FunctionExpression","start":469,"end":1199,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":470,"end":477,"name":"_config"}],"body":{"type":"BlockStatement","start":479,"end":1199,"body":[{"type":"ExpressionStatement","start":489,"end":512,"expression":{"type":"AssignmentExpression","start":489,"end":511,"operator":"=","left":{"type":"MemberExpression","start":489,"end":501,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":489,"end":493},"property":{"type":"Identifier","start":494,"end":501,"name":"_config"}},"right":{"type":"Identifier","start":504,"end":511,"name":"_config"}}},{"type":"ExpressionStatement","start":521,"end":563,"expression":{"type":"AssignmentExpression","start":521,"end":562,"operator":"=","left":{"type":"MemberExpression","start":521,"end":535,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":521,"end":525},"property":{"type":"Identifier","start":526,"end":535,"name":"_clientId"}},"right":{"type":"CallExpression","start":538,"end":562,"optional":false,"callee":{"type":"MemberExpression","start":538,"end":560,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":538,"end":542},"property":{"type":"Identifier","start":543,"end":560,"name":"_generateRandomId"}},"arguments":[]}}},{"type":"ExpressionStatement","start":572,"end":615,"expression":{"type":"AssignmentExpression","start":572,"end":614,"operator":"=","left":{"type":"MemberExpression","start":572,"end":585,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":572,"end":576},"property":{"type":"Identifier","start":577,"end":585,"name":"_xPrefix"}},"right":{"type":"BinaryExpression","start":588,"end":614,"operator":"+","left":{"type":"MemberExpression","start":588,"end":606,"computed":false,"optional":false,"object":{"type":"Identifier","start":588,"end":595,"name":"_config"},"property":{"type":"Identifier","start":596,"end":606,"name":"lockPrefix"}},"right":{"type":"Literal","start":609,"end":614,"value":"_X_","raw":"'_X_'"}}}},{"type":"ExpressionStatement","start":624,"end":667,"expression":{"type":"AssignmentExpression","start":624,"end":666,"operator":"=","left":{"type":"MemberExpression","start":624,"end":637,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":624,"end":628},"property":{"type":"Identifier","start":629,"end":637,"name":"_yPrefix"}},"right":{"type":"BinaryExpression","start":640,"end":666,"operator":"+","left":{"type":"MemberExpression","start":640,"end":658,"computed":false,"optional":false,"object":{"type":"Identifier","start":640,"end":647,"name":"_config"},"property":{"type":"Identifier","start":648,"end":658,"name":"lockPrefix"}},"right":{"type":"Literal","start":661,"end":666,"value":"_Y_","raw":"'_Y_'"}}}},{"type":"VariableDeclaration","start":676,"end":692,"kind":"let","declarations":[{"type":"VariableDeclarator","start":680,"end":691,"id":{"type":"Identifier","start":680,"end":684,"name":"that"},"init":{"type":"ThisExpression","start":687,"end":691}}]},{"type":"ExpressionStatement","start":701,"end":1193,"expression":{"type":"CallExpression","start":701,"end":1192,"optional":false,"callee":{"type":"MemberExpression","start":701,"end":724,"computed":false,"optional":false,"object":{"type":"Identifier","start":701,"end":707,"name":"window"},"property":{"type":"Identifier","start":708,"end":724,"name":"addEventListener"}},"arguments":[{"type":"Literal","start":725,"end":739,"value":"beforeunload","raw":"\"beforeunload\""},{"type":"FunctionExpression","start":741,"end":1191,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":751,"end":753,"name":"ev"}],"body":{"type":"BlockStatement","start":755,"end":1191,"body":[{"type":"VariableDeclaration","start":769,"end":782,"kind":"var","declarations":[{"type":"VariableDeclarator","start":773,"end":781,"id":{"type":"Identifier","start":773,"end":776,"name":"arr"},"init":{"type":"ArrayExpression","start":779,"end":781,"elements":[]}}]},{"type":"ForStatement","start":795,"end":1067,"init":{"type":"VariableDeclaration","start":800,"end":809,"kind":"var","declarations":[{"type":"VariableDeclarator","start":804,"end":809,"id":{"type":"Identifier","start":804,"end":805,"name":"i"},"init":{"type":"Literal","start":808,"end":809,"raw":"0","value":0}}]},"test":{"type":"BinaryExpression","start":811,"end":834,"operator":"<","left":{"type":"Identifier","start":811,"end":812,"name":"i"},"right":{"type":"MemberExpression","start":815,"end":834,"computed":false,"optional":false,"object":{"type":"Identifier","start":815,"end":827,"name":"localStorage"},"property":{"type":"Identifier","start":828,"end":834,"name":"length"}}},"update":{"type":"UpdateExpression","start":836,"end":839,"prefix":false,"operator":"++","argument":{"type":"Identifier","start":836,"end":837,"name":"i"}},"body":{"type":"BlockStatement","start":841,"end":1067,"body":[{"type":"IfStatement","start":859,"end":1053,"test":{"type":"LogicalExpression","start":863,"end":981,"operator":"||","left":{"type":"BinaryExpression","start":863,"end":910,"operator":"==","left":{"type":"CallExpression","start":863,"end":905,"optional":false,"callee":{"type":"MemberExpression","start":863,"end":890,"computed":false,"optional":false,"object":{"type":"CallExpression","start":863,"end":882,"optional":false,"callee":{"type":"MemberExpression","start":863,"end":879,"computed":false,"optional":false,"object":{"type":"Identifier","start":863,"end":875,"name":"localStorage"},"property":{"type":"Identifier","start":876,"end":879,"name":"key"}},"arguments":[{"type":"Identifier","start":880,"end":881,"name":"i"}]},"property":{"type":"Identifier","start":883,"end":890,"name":"indexOf"}},"arguments":[{"type":"MemberExpression","start":891,"end":904,"computed":false,"optional":false,"object":{"type":"Identifier","start":891,"end":895,"name":"that"},"property":{"type":"Identifier","start":896,"end":904,"name":"_xPrefix"}}]},"right":{"type":"Literal","start":909,"end":910,"raw":"0","value":0}},"right":{"type":"BinaryExpression","start":934,"end":981,"operator":"==","left":{"type":"CallExpression","start":934,"end":976,"optional":false,"callee":{"type":"MemberExpression","start":934,"end":961,"computed":false,"optional":false,"object":{"type":"CallExpression","start":934,"end":953,"optional":false,"callee":{"type":"MemberExpression","start":934,"end":950,"computed":false,"optional":false,"object":{"type":"Identifier","start":934,"end":946,"name":"localStorage"},"property":{"type":"Identifier","start":947,"end":950,"name":"key"}},"arguments":[{"type":"Identifier","start":951,"end":952,"name":"i"}]},"property":{"type":"Identifier","start":954,"end":961,"name":"indexOf"}},"arguments":[{"type":"MemberExpression","start":962,"end":975,"computed":false,"optional":false,"object":{"type":"Identifier","start":962,"end":966,"name":"that"},"property":{"type":"Identifier","start":967,"end":975,"name":"_yPrefix"}}]},"right":{"type":"Literal","start":980,"end":981,"raw":"0","value":0}}},"consequent":{"type":"BlockStatement","start":983,"end":1053,"body":[{"type":"ExpressionStatement","start":1005,"end":1035,"expression":{"type":"CallExpression","start":1005,"end":1034,"optional":false,"callee":{"type":"MemberExpression","start":1005,"end":1013,"computed":false,"optional":false,"object":{"type":"Identifier","start":1005,"end":1008,"name":"arr"},"property":{"type":"Identifier","start":1009,"end":1013,"name":"push"}},"arguments":[{"type":"CallExpression","start":1014,"end":1033,"optional":false,"callee":{"type":"MemberExpression","start":1014,"end":1030,"computed":false,"optional":false,"object":{"type":"Identifier","start":1014,"end":1026,"name":"localStorage"},"property":{"type":"Identifier","start":1027,"end":1030,"name":"key"}},"arguments":[{"type":"Identifier","start":1031,"end":1032,"name":"i"}]}]}}]},"alternate":null}]}},{"type":"ForStatement","start":1080,"end":1181,"init":{"type":"VariableDeclaration","start":1085,"end":1094,"kind":"var","declarations":[{"type":"VariableDeclarator","start":1089,"end":1094,"id":{"type":"Identifier","start":1089,"end":1090,"name":"i"},"init":{"type":"Literal","start":1093,"end":1094,"raw":"0","value":0}}]},"test":{"type":"BinaryExpression","start":1096,"end":1110,"operator":"<","left":{"type":"Identifier","start":1096,"end":1097,"name":"i"},"right":{"type":"MemberExpression","start":1100,"end":1110,"computed":false,"optional":false,"object":{"type":"Identifier","start":1100,"end":1103,"name":"arr"},"property":{"type":"Identifier","start":1104,"end":1110,"name":"length"}}},"update":{"type":"UpdateExpression","start":1112,"end":1115,"prefix":false,"operator":"++","argument":{"type":"Identifier","start":1112,"end":1113,"name":"i"}},"body":{"type":"BlockStatement","start":1117,"end":1181,"body":[{"type":"ExpressionStatement","start":1135,"end":1167,"expression":{"type":"CallExpression","start":1135,"end":1166,"optional":false,"callee":{"type":"MemberExpression","start":1135,"end":1158,"computed":false,"optional":false,"object":{"type":"Identifier","start":1135,"end":1147,"name":"localStorage"},"property":{"type":"Identifier","start":1148,"end":1158,"name":"removeItem"}},"arguments":[{"type":"MemberExpression","start":1159,"end":1165,"computed":true,"optional":false,"object":{"type":"Identifier","start":1159,"end":1162,"name":"arr"},"property":{"type":"Identifier","start":1163,"end":1164,"name":"i"}}]}}]}}]},"expression":false}]}}]},"expression":false},"kind":"constructor"},{"type":"MethodDefinition","start":1204,"end":5166,"static":false,"computed":false,"key":{"type":"Identifier","start":1204,"end":1208,"name":"lock"},"value":{"type":"FunctionExpression","start":1208,"end":5166,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":1209,"end":1212,"name":"key"},{"type":"AssignmentPattern","start":1214,"end":1226,"left":{"type":"Identifier","start":1214,"end":1221,"name":"timeout"},"right":{"type":"UnaryExpression","start":1224,"end":1226,"operator":"-","argument":{"type":"Literal","start":1225,"end":1226,"raw":"1","value":1},"prefix":true}}],"body":{"type":"BlockStatement","start":1228,"end":5166,"body":[{"type":"VariableDeclaration","start":1238,"end":1254,"kind":"let","declarations":[{"type":"VariableDeclarator","start":1242,"end":1253,"id":{"type":"Identifier","start":1242,"end":1246,"name":"that"},"init":{"type":"ThisExpression","start":1249,"end":1253}}]},{"type":"IfStatement","start":1263,"end":1325,"test":{"type":"BinaryExpression","start":1267,"end":1280,"operator":"==","left":{"type":"Identifier","start":1267,"end":1274,"name":"timeout"},"right":{"type":"UnaryExpression","start":1278,"end":1280,"operator":"-","argument":{"type":"Literal","start":1279,"end":1280,"raw":"1","value":1},"prefix":true}},"consequent":{"type":"ExpressionStatement","start":1294,"end":1325,"expression":{"type":"AssignmentExpression","start":1294,"end":1324,"operator":"=","left":{"type":"Identifier","start":1294,"end":1301,"name":"timeout"},"right":{"type":"MemberExpression","start":1304,"end":1324,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1304,"end":1316,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1304,"end":1308},"property":{"type":"Identifier","start":1309,"end":1316,"name":"_config"}},"property":{"type":"Identifier","start":1317,"end":1324,"name":"timeout"}}}},"alternate":null},{"type":"VariableDeclaration","start":1334,"end":1366,"kind":"let","declarations":[{"type":"VariableDeclarator","start":1338,"end":1365,"id":{"type":"Identifier","start":1338,"end":1343,"name":"xLock"},"init":{"type":"BinaryExpression","start":1346,"end":1365,"operator":"+","left":{"type":"MemberExpression","start":1346,"end":1359,"computed":false,"optional":false,"object":{"type":"Identifier","start":1346,"end":1350,"name":"that"},"property":{"type":"Identifier","start":1351,"end":1359,"name":"_xPrefix"}},"right":{"type":"Identifier","start":1362,"end":1365,"name":"key"}}}]},{"type":"VariableDeclaration","start":1375,"end":1407,"kind":"let","declarations":[{"type":"VariableDeclarator","start":1379,"end":1406,"id":{"type":"Identifier","start":1379,"end":1384,"name":"yLock"},"init":{"type":"BinaryExpression","start":1387,"end":1406,"operator":"+","left":{"type":"MemberExpression","start":1387,"end":1400,"computed":false,"optional":false,"object":{"type":"Identifier","start":1387,"end":1391,"name":"that"},"property":{"type":"Identifier","start":1392,"end":1400,"name":"_yPrefix"}},"right":{"type":"Identifier","start":1403,"end":1406,"name":"key"}}}]},{"type":"VariableDeclaration","start":1416,"end":1453,"kind":"let","declarations":[{"type":"VariableDeclarator","start":1420,"end":1452,"id":{"type":"Identifier","start":1420,"end":1429,"name":"lockStats"},"init":{"type":"NewExpression","start":1432,"end":1452,"callee":{"type":"Identifier","start":1436,"end":1450,"name":"MutexLockStats"},"arguments":[]}}]},{"type":"ExpressionStatement","start":1462,"end":1489,"expression":{"type":"CallExpression","start":1462,"end":1488,"optional":false,"callee":{"type":"MemberExpression","start":1462,"end":1477,"computed":false,"optional":false,"object":{"type":"Identifier","start":1462,"end":1466,"name":"that"},"property":{"type":"Identifier","start":1467,"end":1477,"name":"resetStats"}},"arguments":[{"type":"Identifier","start":1478,"end":1487,"name":"lockStats"}]}},{"type":"ExpressionStatement","start":1498,"end":1630,"expression":{"type":"LogicalExpression","start":1498,"end":1629,"operator":"??","left":{"type":"MemberExpression","start":1498,"end":1523,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1498,"end":1510,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1498,"end":1502},"property":{"type":"Identifier","start":1503,"end":1510,"name":"_config"}},"property":{"type":"Identifier","start":1511,"end":1523,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":1527,"end":1629,"optional":false,"callee":{"type":"MemberExpression","start":1527,"end":1540,"computed":false,"optional":false,"object":{"type":"Identifier","start":1527,"end":1534,"name":"console"},"property":{"type":"Identifier","start":1535,"end":1540,"name":"debug"}},"arguments":[{"type":"Literal","start":1541,"end":1607,"value":"Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"","raw":"'Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"'"},{"type":"Identifier","start":1609,"end":1612,"name":"key"},{"type":"MemberExpression","start":1614,"end":1628,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1614,"end":1618},"property":{"type":"Identifier","start":1619,"end":1628,"name":"_clientId"}}]}}},{"type":"ExpressionStatement","start":1639,"end":1685,"expression":{"type":"AssignmentExpression","start":1639,"end":1684,"operator":"=","left":{"type":"MemberExpression","start":1639,"end":1661,"computed":false,"optional":false,"object":{"type":"Identifier","start":1639,"end":1648,"name":"lockStats"},"property":{"type":"Identifier","start":1649,"end":1661,"name":"acquireStart"}},"right":{"type":"CallExpression","start":1664,"end":1684,"optional":false,"callee":{"type":"MemberExpression","start":1664,"end":1682,"computed":false,"optional":false,"object":{"type":"NewExpression","start":1664,"end":1674,"callee":{"type":"Identifier","start":1668,"end":1672,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":1675,"end":1682,"name":"getTime"}},"arguments":[]}}},{"type":"ReturnStatement","start":1752,"end":5160,"argument":{"type":"NewExpression","start":1759,"end":5159,"callee":{"type":"Identifier","start":1763,"end":1773,"name":"Observable"},"arguments":[{"type":"ArrowFunctionExpression","start":1774,"end":5158,"async":false,"expression":false,"generator":false,"params":[{"type":"Identifier","start":1774,"end":1784,"name":"subscriber"}],"body":{"type":"BlockStatement","start":1788,"end":5158,"body":[{"type":"VariableDeclaration","start":2130,"end":5118,"kind":"let","declarations":[{"type":"VariableDeclarator","start":2134,"end":5117,"id":{"type":"Identifier","start":2134,"end":2145,"name":"acquireLock"},"init":{"type":"FunctionExpression","start":2148,"end":5117,"async":false,"generator":false,"id":{"type":"Identifier","start":2157,"end":2168,"name":"acquireLock"},"params":[{"type":"Identifier","start":2169,"end":2172,"name":"key"}],"body":{"type":"BlockStatement","start":2174,"end":5117,"body":[{"type":"ExpressionStatement","start":2192,"end":2224,"expression":{"type":"CallExpression","start":2192,"end":2223,"optional":false,"callee":{"type":"MemberExpression","start":2192,"end":2216,"computed":false,"optional":false,"object":{"type":"Identifier","start":2192,"end":2196,"name":"that"},"property":{"type":"Identifier","start":2197,"end":2216,"name":"_releaseExpiredLock"}},"arguments":[{"type":"Identifier","start":2217,"end":2222,"name":"xLock"}]}},{"type":"ExpressionStatement","start":2241,"end":2273,"expression":{"type":"CallExpression","start":2241,"end":2272,"optional":false,"callee":{"type":"MemberExpression","start":2241,"end":2265,"computed":false,"optional":false,"object":{"type":"Identifier","start":2241,"end":2245,"name":"that"},"property":{"type":"Identifier","start":2246,"end":2265,"name":"_releaseExpiredLock"}},"arguments":[{"type":"Identifier","start":2266,"end":2271,"name":"yLock"}]}},{"type":"VariableDeclaration","start":2290,"end":2354,"kind":"var","declarations":[{"type":"VariableDeclarator","start":2294,"end":2353,"id":{"type":"Identifier","start":2294,"end":2305,"name":"elapsedTime"},"init":{"type":"BinaryExpression","start":2308,"end":2353,"operator":"-","left":{"type":"CallExpression","start":2308,"end":2328,"optional":false,"callee":{"type":"MemberExpression","start":2308,"end":2326,"computed":false,"optional":false,"object":{"type":"NewExpression","start":2308,"end":2318,"callee":{"type":"Identifier","start":2312,"end":2316,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":2319,"end":2326,"name":"getTime"}},"arguments":[]},"right":{"type":"MemberExpression","start":2331,"end":2353,"computed":false,"optional":false,"object":{"type":"Identifier","start":2331,"end":2340,"name":"lockStats"},"property":{"type":"Identifier","start":2341,"end":2353,"name":"acquireStart"}}}}]},{"type":"IfStatement","start":2371,"end":2691,"test":{"type":"BinaryExpression","start":2375,"end":2397,"operator":">=","left":{"type":"Identifier","start":2375,"end":2386,"name":"elapsedTime"},"right":{"type":"Identifier","start":2390,"end":2397,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":2399,"end":2691,"body":[{"type":"ExpressionStatement","start":2421,"end":2569,"expression":{"type":"LogicalExpression","start":2421,"end":2568,"operator":"??","left":{"type":"MemberExpression","start":2421,"end":2446,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2421,"end":2433,"computed":false,"optional":false,"object":{"type":"Identifier","start":2421,"end":2425,"name":"that"},"property":{"type":"Identifier","start":2426,"end":2433,"name":"_config"}},"property":{"type":"Identifier","start":2434,"end":2446,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":2450,"end":2568,"optional":false,"callee":{"type":"MemberExpression","start":2450,"end":2463,"computed":false,"optional":false,"object":{"type":"Identifier","start":2450,"end":2457,"name":"console"},"property":{"type":"Identifier","start":2458,"end":2463,"name":"debug"}},"arguments":[{"type":"Literal","start":2464,"end":2537,"value":"Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"","raw":"'Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"'"},{"type":"Identifier","start":2539,"end":2542,"name":"key"},{"type":"Identifier","start":2544,"end":2551,"name":"timeout"},{"type":"MemberExpression","start":2553,"end":2567,"computed":false,"optional":false,"object":{"type":"Identifier","start":2553,"end":2557,"name":"that"},"property":{"type":"Identifier","start":2558,"end":2567,"name":"_clientId"}}]}}},{"type":"ExpressionStatement","start":2590,"end":2673,"expression":{"type":"CallExpression","start":2590,"end":2672,"optional":false,"callee":{"type":"MemberExpression","start":2590,"end":2606,"computed":false,"optional":false,"object":{"type":"Identifier","start":2590,"end":2600,"name":"subscriber"},"property":{"type":"Identifier","start":2601,"end":2606,"name":"error"}},"arguments":[{"type":"NewExpression","start":2607,"end":2671,"callee":{"type":"Identifier","start":2611,"end":2616,"name":"Error"},"arguments":[{"type":"BinaryExpression","start":2617,"end":2670,"operator":"+","left":{"type":"BinaryExpression","start":2617,"end":2663,"operator":"+","left":{"type":"Literal","start":2617,"end":2653,"value":"Lock could not be acquired within ","raw":"'Lock could not be acquired within '"},"right":{"type":"Identifier","start":2656,"end":2663,"name":"timeout"}},"right":{"type":"Literal","start":2666,"end":2670,"value":"ms","raw":"'ms'"}}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":2708,"end":2754,"expression":{"type":"CallExpression","start":2708,"end":2753,"optional":false,"callee":{"type":"MemberExpression","start":2708,"end":2721,"computed":false,"optional":false,"object":{"type":"Identifier","start":2708,"end":2712,"name":"that"},"property":{"type":"Identifier","start":2713,"end":2721,"name":"_setItem"}},"arguments":[{"type":"Identifier","start":2722,"end":2727,"name":"xLock"},{"type":"MemberExpression","start":2729,"end":2743,"computed":false,"optional":false,"object":{"type":"Identifier","start":2729,"end":2733,"name":"that"},"property":{"type":"Identifier","start":2734,"end":2743,"name":"_clientId"}},{"type":"Identifier","start":2745,"end":2752,"name":"timeout"}]}},{"type":"VariableDeclaration","start":2855,"end":2895,"kind":"var","declarations":[{"type":"VariableDeclarator","start":2859,"end":2894,"id":{"type":"Identifier","start":2859,"end":2862,"name":"lsY"},"init":{"type":"CallExpression","start":2865,"end":2894,"optional":false,"callee":{"type":"MemberExpression","start":2865,"end":2878,"computed":false,"optional":false,"object":{"type":"Identifier","start":2865,"end":2869,"name":"that"},"property":{"type":"Identifier","start":2870,"end":2878,"name":"_getItem"}},"arguments":[{"type":"Identifier","start":2879,"end":2884,"name":"yLock"},{"type":"Identifier","start":2886,"end":2893,"name":"timeout"}]}}]},{"type":"IfStatement","start":2912,"end":3245,"test":{"type":"Identifier","start":2916,"end":2919,"name":"lsY"},"consequent":{"type":"BlockStatement","start":2921,"end":3245,"body":[{"type":"ExpressionStatement","start":2943,"end":3031,"expression":{"type":"LogicalExpression","start":2943,"end":3030,"operator":"??","left":{"type":"MemberExpression","start":2943,"end":2968,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2943,"end":2955,"computed":false,"optional":false,"object":{"type":"Identifier","start":2943,"end":2947,"name":"that"},"property":{"type":"Identifier","start":2948,"end":2955,"name":"_config"}},"property":{"type":"Identifier","start":2956,"end":2968,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":2972,"end":3030,"optional":false,"callee":{"type":"MemberExpression","start":2972,"end":2985,"computed":false,"optional":false,"object":{"type":"Identifier","start":2972,"end":2979,"name":"console"},"property":{"type":"Identifier","start":2980,"end":2985,"name":"debug"}},"arguments":[{"type":"Literal","start":2986,"end":3024,"value":"Lock exists on Y (%s), restarting...","raw":"'Lock exists on Y (%s), restarting...'"},{"type":"Identifier","start":3026,"end":3029,"name":"lsY"}]}}},{"type":"ExpressionStatement","start":3052,"end":3077,"expression":{"type":"UpdateExpression","start":3052,"end":3076,"prefix":false,"operator":"++","argument":{"type":"MemberExpression","start":3052,"end":3074,"computed":false,"optional":false,"object":{"type":"Identifier","start":3052,"end":3061,"name":"lockStats"},"property":{"type":"Identifier","start":3062,"end":3074,"name":"restartCount"}}}},{"type":"ExpressionStatement","start":3098,"end":3199,"expression":{"type":"CallExpression","start":3098,"end":3198,"optional":false,"callee":{"type":"Identifier","start":3098,"end":3108,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3109,"end":3193,"async":false,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":3121,"end":3193,"body":[{"type":"ReturnStatement","start":3147,"end":3171,"argument":{"type":"CallExpression","start":3154,"end":3170,"optional":false,"callee":{"type":"Identifier","start":3154,"end":3165,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":3166,"end":3169,"name":"key"}]}}]},"expression":false},{"type":"Literal","start":3195,"end":3197,"raw":"10","value":10}]}},{"type":"ReturnStatement","start":3220,"end":3227,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3300,"end":3346,"expression":{"type":"CallExpression","start":3300,"end":3345,"optional":false,"callee":{"type":"MemberExpression","start":3300,"end":3313,"computed":false,"optional":false,"object":{"type":"Identifier","start":3300,"end":3304,"name":"that"},"property":{"type":"Identifier","start":3305,"end":3313,"name":"_setItem"}},"arguments":[{"type":"Identifier","start":3314,"end":3319,"name":"yLock"},{"type":"MemberExpression","start":3321,"end":3335,"computed":false,"optional":false,"object":{"type":"Identifier","start":3321,"end":3325,"name":"that"},"property":{"type":"Identifier","start":3326,"end":3335,"name":"_clientId"}},{"type":"Identifier","start":3337,"end":3344,"name":"timeout"}]}},{"type":"VariableDeclaration","start":3447,"end":3487,"kind":"var","declarations":[{"type":"VariableDeclarator","start":3451,"end":3486,"id":{"type":"Identifier","start":3451,"end":3454,"name":"lsX"},"init":{"type":"CallExpression","start":3457,"end":3486,"optional":false,"callee":{"type":"MemberExpression","start":3457,"end":3470,"computed":false,"optional":false,"object":{"type":"Identifier","start":3457,"end":3461,"name":"that"},"property":{"type":"Identifier","start":3462,"end":3470,"name":"_getItem"}},"arguments":[{"type":"Identifier","start":3471,"end":3476,"name":"xLock"},{"type":"Identifier","start":3478,"end":3485,"name":"timeout"}]}}]},{"type":"IfStatement","start":3504,"end":4858,"test":{"type":"BinaryExpression","start":3508,"end":3530,"operator":"!==","left":{"type":"Identifier","start":3508,"end":3511,"name":"lsX"},"right":{"type":"MemberExpression","start":3516,"end":3530,"computed":false,"optional":false,"object":{"type":"Identifier","start":3516,"end":3520,"name":"that"},"property":{"type":"Identifier","start":3521,"end":3530,"name":"_clientId"}}},"consequent":{"type":"BlockStatement","start":3532,"end":4858,"body":[{"type":"ExpressionStatement","start":3554,"end":3582,"expression":{"type":"UpdateExpression","start":3554,"end":3581,"prefix":false,"operator":"++","argument":{"type":"MemberExpression","start":3554,"end":3579,"computed":false,"optional":false,"object":{"type":"Identifier","start":3554,"end":3563,"name":"lockStats"},"property":{"type":"Identifier","start":3564,"end":3579,"name":"contentionCount"}}}},{"type":"ExpressionStatement","start":3603,"end":3687,"expression":{"type":"LogicalExpression","start":3603,"end":3686,"operator":"??","left":{"type":"MemberExpression","start":3603,"end":3628,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":3603,"end":3615,"computed":false,"optional":false,"object":{"type":"Identifier","start":3603,"end":3607,"name":"that"},"property":{"type":"Identifier","start":3608,"end":3615,"name":"_config"}},"property":{"type":"Identifier","start":3616,"end":3628,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":3632,"end":3686,"optional":false,"callee":{"type":"MemberExpression","start":3632,"end":3645,"computed":false,"optional":false,"object":{"type":"Identifier","start":3632,"end":3639,"name":"console"},"property":{"type":"Identifier","start":3640,"end":3645,"name":"debug"}},"arguments":[{"type":"Literal","start":3646,"end":3680,"value":"Lock contention detected. X=\"%s\"","raw":"'Lock contention detected. X=\"%s\"'"},{"type":"Identifier","start":3682,"end":3685,"name":"lsX"}]}}},{"type":"ExpressionStatement","start":3770,"end":4812,"expression":{"type":"CallExpression","start":3770,"end":4811,"optional":false,"callee":{"type":"Identifier","start":3770,"end":3780,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3781,"end":4805,"async":false,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":3793,"end":4805,"body":[{"type":"ExpressionStatement","start":3819,"end":3855,"expression":{"type":"AssignmentExpression","start":3819,"end":3854,"operator":"=","left":{"type":"Identifier","start":3819,"end":3822,"name":"lsY"},"right":{"type":"CallExpression","start":3825,"end":3854,"optional":false,"callee":{"type":"MemberExpression","start":3825,"end":3838,"computed":false,"optional":false,"object":{"type":"Identifier","start":3825,"end":3829,"name":"that"},"property":{"type":"Identifier","start":3830,"end":3838,"name":"_getItem"}},"arguments":[{"type":"Identifier","start":3839,"end":3844,"name":"yLock"},{"type":"Identifier","start":3846,"end":3853,"name":"timeout"}]}}},{"type":"IfStatement","start":3880,"end":4783,"test":{"type":"BinaryExpression","start":3884,"end":3906,"operator":"===","left":{"type":"Identifier","start":3884,"end":3887,"name":"lsY"},"right":{"type":"MemberExpression","start":3892,"end":3906,"computed":false,"optional":false,"object":{"type":"Identifier","start":3892,"end":3896,"name":"that"},"property":{"type":"Identifier","start":3897,"end":3906,"name":"_clientId"}}},"consequent":{"type":"BlockStatement","start":3908,"end":4205,"body":[{"type":"ExpressionStatement","start":3984,"end":4105,"expression":{"type":"LogicalExpression","start":3984,"end":4104,"operator":"??","left":{"type":"MemberExpression","start":3984,"end":4009,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":3984,"end":3996,"computed":false,"optional":false,"object":{"type":"Identifier","start":3984,"end":3988,"name":"that"},"property":{"type":"Identifier","start":3989,"end":3996,"name":"_config"}},"property":{"type":"Identifier","start":3997,"end":4009,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":4013,"end":4104,"optional":false,"callee":{"type":"MemberExpression","start":4013,"end":4026,"computed":false,"optional":false,"object":{"type":"Identifier","start":4013,"end":4020,"name":"console"},"property":{"type":"Identifier","start":4021,"end":4026,"name":"debug"}},"arguments":[{"type":"Literal","start":4027,"end":4082,"value":"FastMutex client \"%s\" won the lock contention on \"%s\"","raw":"'FastMutex client \"%s\" won the lock contention on \"%s\"'"},{"type":"MemberExpression","start":4084,"end":4098,"computed":false,"optional":false,"object":{"type":"Identifier","start":4084,"end":4088,"name":"that"},"property":{"type":"Identifier","start":4089,"end":4098,"name":"_clientId"}},{"type":"Identifier","start":4100,"end":4103,"name":"key"}]}}},{"type":"ExpressionStatement","start":4134,"end":4179,"expression":{"type":"CallExpression","start":4134,"end":4178,"optional":false,"callee":{"type":"MemberExpression","start":4134,"end":4155,"computed":false,"optional":false,"object":{"type":"Identifier","start":4134,"end":4138,"name":"that"},"property":{"type":"Identifier","start":4139,"end":4155,"name":"resolveWithStats"}},"arguments":[{"type":"Identifier","start":4156,"end":4166,"name":"subscriber"},{"type":"Identifier","start":4168,"end":4177,"name":"lockStats"}]}}]},"alternate":{"type":"BlockStatement","start":4235,"end":4783,"body":[{"type":"ExpressionStatement","start":4340,"end":4365,"expression":{"type":"UpdateExpression","start":4340,"end":4364,"prefix":false,"operator":"++","argument":{"type":"MemberExpression","start":4340,"end":4362,"computed":false,"optional":false,"object":{"type":"Identifier","start":4340,"end":4349,"name":"lockStats"},"property":{"type":"Identifier","start":4350,"end":4362,"name":"restartCount"}}}},{"type":"ExpressionStatement","start":4394,"end":4416,"expression":{"type":"UpdateExpression","start":4394,"end":4415,"prefix":false,"operator":"++","argument":{"type":"MemberExpression","start":4394,"end":4413,"computed":false,"optional":false,"object":{"type":"Identifier","start":4394,"end":4403,"name":"lockStats"},"property":{"type":"Identifier","start":4404,"end":4413,"name":"locksLost"}}}},{"type":"ExpressionStatement","start":4445,"end":4611,"expression":{"type":"LogicalExpression","start":4445,"end":4610,"operator":"??","left":{"type":"MemberExpression","start":4445,"end":4470,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":4445,"end":4457,"computed":false,"optional":false,"object":{"type":"Identifier","start":4445,"end":4449,"name":"that"},"property":{"type":"Identifier","start":4450,"end":4457,"name":"_config"}},"property":{"type":"Identifier","start":4458,"end":4470,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":4474,"end":4610,"optional":false,"callee":{"type":"MemberExpression","start":4474,"end":4487,"computed":false,"optional":false,"object":{"type":"Identifier","start":4474,"end":4481,"name":"console"},"property":{"type":"Identifier","start":4482,"end":4487,"name":"debug"}},"arguments":[{"type":"Literal","start":4488,"end":4583,"value":"FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...","raw":"'FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...'"},{"type":"MemberExpression","start":4585,"end":4599,"computed":false,"optional":false,"object":{"type":"Identifier","start":4585,"end":4589,"name":"that"},"property":{"type":"Identifier","start":4590,"end":4599,"name":"_clientId"}},{"type":"Identifier","start":4601,"end":4604,"name":"key"},{"type":"Identifier","start":4606,"end":4609,"name":"lsY"}]}}},{"type":"ExpressionStatement","start":4640,"end":4757,"expression":{"type":"CallExpression","start":4640,"end":4756,"optional":false,"callee":{"type":"Identifier","start":4640,"end":4650,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":4651,"end":4751,"async":false,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":4663,"end":4751,"body":[{"type":"ReturnStatement","start":4697,"end":4721,"argument":{"type":"CallExpression","start":4704,"end":4720,"optional":false,"callee":{"type":"Identifier","start":4704,"end":4715,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":4716,"end":4719,"name":"key"}]}}]},"expression":false},{"type":"Literal","start":4753,"end":4755,"raw":"10","value":10}]}}]}}]},"expression":false},{"type":"Literal","start":4807,"end":4810,"raw":"100","value":100}]}},{"type":"ReturnStatement","start":4833,"end":4840,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":4909,"end":5041,"expression":{"type":"LogicalExpression","start":4909,"end":5040,"operator":"??","left":{"type":"MemberExpression","start":4909,"end":4934,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":4909,"end":4921,"computed":false,"optional":false,"object":{"type":"Identifier","start":4909,"end":4913,"name":"that"},"property":{"type":"Identifier","start":4914,"end":4921,"name":"_config"}},"property":{"type":"Identifier","start":4922,"end":4934,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":4938,"end":5040,"optional":false,"callee":{"type":"MemberExpression","start":4938,"end":4951,"computed":false,"optional":false,"object":{"type":"Identifier","start":4938,"end":4945,"name":"console"},"property":{"type":"Identifier","start":4946,"end":4951,"name":"debug"}},"arguments":[{"type":"Literal","start":4952,"end":5018,"value":"FastMutex client \"%s\" acquired a lock on \"%s\" with no contention","raw":"'FastMutex client \"%s\" acquired a lock on \"%s\" with no contention'"},{"type":"MemberExpression","start":5020,"end":5034,"computed":false,"optional":false,"object":{"type":"Identifier","start":5020,"end":5024,"name":"that"},"property":{"type":"Identifier","start":5025,"end":5034,"name":"_clientId"}},{"type":"Identifier","start":5036,"end":5039,"name":"key"}]}}},{"type":"ExpressionStatement","start":5058,"end":5103,"expression":{"type":"CallExpression","start":5058,"end":5102,"optional":false,"callee":{"type":"MemberExpression","start":5058,"end":5079,"computed":false,"optional":false,"object":{"type":"Identifier","start":5058,"end":5062,"name":"that"},"property":{"type":"Identifier","start":5063,"end":5079,"name":"resolveWithStats"}},"arguments":[{"type":"Identifier","start":5080,"end":5090,"name":"subscriber"},{"type":"Identifier","start":5092,"end":5101,"name":"lockStats"}]}}]},"expression":false}}]},{"type":"ExpressionStatement","start":5131,"end":5148,"expression":{"type":"CallExpression","start":5131,"end":5147,"optional":false,"callee":{"type":"Identifier","start":5131,"end":5142,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":5143,"end":5146,"name":"key"}]}}]},"id":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":5171,"end":5720,"static":false,"computed":false,"key":{"type":"Identifier","start":5171,"end":5178,"name":"release"},"value":{"type":"FunctionExpression","start":5178,"end":5720,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":5179,"end":5182,"name":"key"}],"body":{"type":"BlockStatement","start":5184,"end":5720,"body":[{"type":"ExpressionStatement","start":5194,"end":5309,"expression":{"type":"LogicalExpression","start":5194,"end":5308,"operator":"??","left":{"type":"MemberExpression","start":5194,"end":5219,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":5194,"end":5206,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":5194,"end":5198},"property":{"type":"Identifier","start":5199,"end":5206,"name":"_config"}},"property":{"type":"Identifier","start":5207,"end":5219,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":5223,"end":5308,"optional":false,"callee":{"type":"MemberExpression","start":5223,"end":5236,"computed":false,"optional":false,"object":{"type":"Identifier","start":5223,"end":5230,"name":"console"},"property":{"type":"Identifier","start":5231,"end":5236,"name":"debug"}},"arguments":[{"type":"Literal","start":5237,"end":5286,"value":"FastMutex client \"%s\" is releasing lock on \"%s\"","raw":"'FastMutex client \"%s\" is releasing lock on \"%s\"'"},{"type":"MemberExpression","start":5288,"end":5302,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":5288,"end":5292},"property":{"type":"Identifier","start":5293,"end":5302,"name":"_clientId"}},{"type":"Identifier","start":5304,"end":5307,"name":"key"}]}}},{"type":"VariableDeclaration","start":5318,"end":5346,"kind":"let","declarations":[{"type":"VariableDeclarator","start":5322,"end":5345,"id":{"type":"Identifier","start":5322,"end":5323,"name":"x"},"init":{"type":"BinaryExpression","start":5326,"end":5345,"operator":"+","left":{"type":"MemberExpression","start":5326,"end":5339,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":5326,"end":5330},"property":{"type":"Identifier","start":5331,"end":5339,"name":"_xPrefix"}},"right":{"type":"Identifier","start":5342,"end":5345,"name":"key"}}}]},{"type":"VariableDeclaration","start":5355,"end":5383,"kind":"let","declarations":[{"type":"VariableDeclarator","start":5359,"end":5382,"id":{"type":"Identifier","start":5359,"end":5360,"name":"y"},"init":{"type":"BinaryExpression","start":5363,"end":5382,"operator":"+","left":{"type":"MemberExpression","start":5363,"end":5376,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":5363,"end":5367},"property":{"type":"Identifier","start":5368,"end":5376,"name":"_yPrefix"}},"right":{"type":"Identifier","start":5379,"end":5382,"name":"key"}}}]},{"type":"ExpressionStatement","start":5392,"end":5419,"expression":{"type":"CallExpression","start":5392,"end":5418,"optional":false,"callee":{"type":"MemberExpression","start":5392,"end":5415,"computed":false,"optional":false,"object":{"type":"Identifier","start":5392,"end":5404,"name":"localStorage"},"property":{"type":"Identifier","start":5405,"end":5415,"name":"removeItem"}},"arguments":[{"type":"Identifier","start":5416,"end":5417,"name":"x"}]}},{"type":"ExpressionStatement","start":5428,"end":5455,"expression":{"type":"CallExpression","start":5428,"end":5454,"optional":false,"callee":{"type":"MemberExpression","start":5428,"end":5451,"computed":false,"optional":false,"object":{"type":"Identifier","start":5428,"end":5440,"name":"localStorage"},"property":{"type":"Identifier","start":5441,"end":5451,"name":"removeItem"}},"arguments":[{"type":"Identifier","start":5452,"end":5453,"name":"y"}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":5725,"end":5813,"static":false,"computed":false,"key":{"type":"Identifier","start":5725,"end":5742,"name":"_generateRandomId"},"value":{"type":"FunctionExpression","start":5742,"end":5813,"async":false,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":5745,"end":5813,"body":[{"type":"ReturnStatement","start":5755,"end":5807,"argument":{"type":"BinaryExpression","start":5762,"end":5806,"operator":"+","left":{"type":"CallExpression","start":5762,"end":5801,"optional":false,"callee":{"type":"MemberExpression","start":5762,"end":5772,"computed":false,"optional":false,"object":{"type":"Identifier","start":5762,"end":5766,"name":"Math"},"property":{"type":"Identifier","start":5767,"end":5772,"name":"floor"}},"arguments":[{"type":"BinaryExpression","start":5773,"end":5800,"operator":"*","left":{"type":"CallExpression","start":5773,"end":5786,"optional":false,"callee":{"type":"MemberExpression","start":5773,"end":5784,"computed":false,"optional":false,"object":{"type":"Identifier","start":5773,"end":5777,"name":"Math"},"property":{"type":"Identifier","start":5778,"end":5784,"name":"random"}},"arguments":[]},"right":{"type":"Literal","start":5789,"end":5800,"raw":"10000000000","value":10000000000}}]},"right":{"type":"Literal","start":5804,"end":5806,"value":"","raw":"''"}}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":5818,"end":6033,"static":false,"computed":false,"key":{"type":"Identifier","start":5818,"end":5828,"name":"resetStats"},"value":{"type":"FunctionExpression","start":5828,"end":6033,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":5829,"end":5838,"name":"lockStats"}],"body":{"type":"BlockStatement","start":5840,"end":6033,"body":[{"type":"ExpressionStatement","start":5850,"end":5877,"expression":{"type":"AssignmentExpression","start":5850,"end":5876,"operator":"=","left":{"type":"MemberExpression","start":5850,"end":5872,"computed":false,"optional":false,"object":{"type":"Identifier","start":5850,"end":5859,"name":"lockStats"},"property":{"type":"Identifier","start":5860,"end":5872,"name":"restartCount"}},"right":{"type":"Literal","start":5875,"end":5876,"raw":"0","value":0}}},{"type":"ExpressionStatement","start":5886,"end":5910,"expression":{"type":"AssignmentExpression","start":5886,"end":5909,"operator":"=","left":{"type":"MemberExpression","start":5886,"end":5905,"computed":false,"optional":false,"object":{"type":"Identifier","start":5886,"end":5895,"name":"lockStats"},"property":{"type":"Identifier","start":5896,"end":5905,"name":"locksLost"}},"right":{"type":"Literal","start":5908,"end":5909,"raw":"0","value":0}}},{"type":"ExpressionStatement","start":5919,"end":5949,"expression":{"type":"AssignmentExpression","start":5919,"end":5948,"operator":"=","left":{"type":"MemberExpression","start":5919,"end":5944,"computed":false,"optional":false,"object":{"type":"Identifier","start":5919,"end":5928,"name":"lockStats"},"property":{"type":"Identifier","start":5929,"end":5944,"name":"contentionCount"}},"right":{"type":"Literal","start":5947,"end":5948,"raw":"0","value":0}}},{"type":"ExpressionStatement","start":5958,"end":5988,"expression":{"type":"AssignmentExpression","start":5958,"end":5987,"operator":"=","left":{"type":"MemberExpression","start":5958,"end":5983,"computed":false,"optional":false,"object":{"type":"Identifier","start":5958,"end":5967,"name":"lockStats"},"property":{"type":"Identifier","start":5968,"end":5983,"name":"acquireDuration"}},"right":{"type":"Literal","start":5986,"end":5987,"raw":"0","value":0}}},{"type":"ExpressionStatement","start":5997,"end":6027,"expression":{"type":"AssignmentExpression","start":5997,"end":6026,"operator":"=","left":{"type":"MemberExpression","start":5997,"end":6019,"computed":false,"optional":false,"object":{"type":"Identifier","start":5997,"end":6006,"name":"lockStats"},"property":{"type":"Identifier","start":6007,"end":6019,"name":"acquireStart"}},"right":{"type":"Literal","start":6022,"end":6026,"raw":"null","value":null}}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":6038,"end":6342,"static":false,"computed":false,"key":{"type":"Identifier","start":6038,"end":6054,"name":"resolveWithStats"},"value":{"type":"FunctionExpression","start":6054,"end":6342,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":6055,"end":6065,"name":"subscriber"},{"type":"Identifier","start":6067,"end":6072,"name":"stats"}],"body":{"type":"BlockStatement","start":6074,"end":6342,"body":[{"type":"VariableDeclaration","start":6084,"end":6123,"kind":"var","declarations":[{"type":"VariableDeclarator","start":6088,"end":6122,"id":{"type":"Identifier","start":6088,"end":6099,"name":"currentTime"},"init":{"type":"CallExpression","start":6102,"end":6122,"optional":false,"callee":{"type":"MemberExpression","start":6102,"end":6120,"computed":false,"optional":false,"object":{"type":"NewExpression","start":6102,"end":6112,"callee":{"type":"Identifier","start":6106,"end":6110,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6113,"end":6120,"name":"getTime"}},"arguments":[]}}]},{"type":"ExpressionStatement","start":6132,"end":6163,"expression":{"type":"AssignmentExpression","start":6132,"end":6162,"operator":"=","left":{"type":"MemberExpression","start":6132,"end":6148,"computed":false,"optional":false,"object":{"type":"Identifier","start":6132,"end":6137,"name":"stats"},"property":{"type":"Identifier","start":6138,"end":6148,"name":"acquireEnd"}},"right":{"type":"Identifier","start":6151,"end":6162,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6172,"end":6234,"expression":{"type":"AssignmentExpression","start":6172,"end":6233,"operator":"=","left":{"type":"MemberExpression","start":6172,"end":6193,"computed":false,"optional":false,"object":{"type":"Identifier","start":6172,"end":6177,"name":"stats"},"property":{"type":"Identifier","start":6178,"end":6193,"name":"acquireDuration"}},"right":{"type":"BinaryExpression","start":6196,"end":6233,"operator":"-","left":{"type":"MemberExpression","start":6196,"end":6212,"computed":false,"optional":false,"object":{"type":"Identifier","start":6196,"end":6201,"name":"stats"},"property":{"type":"Identifier","start":6202,"end":6212,"name":"acquireEnd"}},"right":{"type":"MemberExpression","start":6215,"end":6233,"computed":false,"optional":false,"object":{"type":"Identifier","start":6215,"end":6220,"name":"stats"},"property":{"type":"Identifier","start":6221,"end":6233,"name":"acquireStart"}}}}},{"type":"ExpressionStatement","start":6243,"end":6273,"expression":{"type":"AssignmentExpression","start":6243,"end":6272,"operator":"=","left":{"type":"MemberExpression","start":6243,"end":6258,"computed":false,"optional":false,"object":{"type":"Identifier","start":6243,"end":6248,"name":"stats"},"property":{"type":"Identifier","start":6249,"end":6258,"name":"lockStart"}},"right":{"type":"Identifier","start":6261,"end":6272,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6282,"end":6305,"expression":{"type":"CallExpression","start":6282,"end":6304,"optional":false,"callee":{"type":"MemberExpression","start":6282,"end":6297,"computed":false,"optional":false,"object":{"type":"Identifier","start":6282,"end":6292,"name":"subscriber"},"property":{"type":"Identifier","start":6293,"end":6297,"name":"next"}},"arguments":[{"type":"Identifier","start":6298,"end":6303,"name":"stats"}]}},{"type":"ExpressionStatement","start":6314,"end":6336,"expression":{"type":"CallExpression","start":6314,"end":6335,"optional":false,"callee":{"type":"MemberExpression","start":6314,"end":6333,"computed":false,"optional":false,"object":{"type":"Identifier","start":6314,"end":6324,"name":"subscriber"},"property":{"type":"Identifier","start":6325,"end":6333,"name":"complete"}},"arguments":[]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":6513,"end":6759,"static":false,"computed":false,"key":{"type":"Identifier","start":6513,"end":6521,"name":"_setItem"},"value":{"type":"FunctionExpression","start":6521,"end":6759,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":6522,"end":6525,"name":"key"},{"type":"Identifier","start":6527,"end":6535,"name":"clientId"},{"type":"Identifier","start":6537,"end":6544,"name":"timeout"}],"body":{"type":"BlockStatement","start":6546,"end":6759,"body":[{"type":"VariableDeclaration","start":6556,"end":6586,"kind":"let","declarations":[{"type":"VariableDeclarator","start":6560,"end":6585,"id":{"type":"Identifier","start":6560,"end":6568,"name":"lockItem"},"init":{"type":"NewExpression","start":6571,"end":6585,"callee":{"type":"Identifier","start":6575,"end":6583,"name":"LockItem"},"arguments":[]}}]},{"type":"ExpressionStatement","start":6595,"end":6624,"expression":{"type":"AssignmentExpression","start":6595,"end":6623,"operator":"=","left":{"type":"MemberExpression","start":6595,"end":6612,"computed":false,"optional":false,"object":{"type":"Identifier","start":6595,"end":6603,"name":"lockItem"},"property":{"type":"Identifier","start":6604,"end":6612,"name":"clientId"}},"right":{"type":"Identifier","start":6615,"end":6623,"name":"clientId"}}},{"type":"ExpressionStatement","start":6633,"end":6685,"expression":{"type":"AssignmentExpression","start":6633,"end":6684,"operator":"=","left":{"type":"MemberExpression","start":6633,"end":6651,"computed":false,"optional":false,"object":{"type":"Identifier","start":6633,"end":6641,"name":"lockItem"},"property":{"type":"Identifier","start":6642,"end":6651,"name":"expiresAt"}},"right":{"type":"BinaryExpression","start":6654,"end":6684,"operator":"+","left":{"type":"CallExpression","start":6654,"end":6674,"optional":false,"callee":{"type":"MemberExpression","start":6654,"end":6672,"computed":false,"optional":false,"object":{"type":"NewExpression","start":6654,"end":6664,"callee":{"type":"Identifier","start":6658,"end":6662,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6665,"end":6672,"name":"getTime"}},"arguments":[]},"right":{"type":"Identifier","start":6677,"end":6684,"name":"timeout"}}}},{"type":"ReturnStatement","start":6694,"end":6753,"argument":{"type":"CallExpression","start":6701,"end":6752,"optional":false,"callee":{"type":"MemberExpression","start":6701,"end":6721,"computed":false,"optional":false,"object":{"type":"Identifier","start":6701,"end":6713,"name":"localStorage"},"property":{"type":"Identifier","start":6714,"end":6721,"name":"setItem"}},"arguments":[{"type":"Identifier","start":6722,"end":6725,"name":"key"},{"type":"CallExpression","start":6727,"end":6751,"optional":false,"callee":{"type":"MemberExpression","start":6727,"end":6741,"computed":false,"optional":false,"object":{"type":"Identifier","start":6727,"end":6731,"name":"JSON"},"property":{"type":"Identifier","start":6732,"end":6741,"name":"stringify"}},"arguments":[{"type":"Identifier","start":6742,"end":6750,"name":"lockItem"}]}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":6852,"end":7328,"static":false,"computed":false,"key":{"type":"Identifier","start":6852,"end":6860,"name":"_getItem"},"value":{"type":"FunctionExpression","start":6860,"end":7328,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":6861,"end":6864,"name":"key"},{"type":"Identifier","start":6866,"end":6873,"name":"timeout"}],"body":{"type":"BlockStatement","start":6875,"end":7328,"body":[{"type":"VariableDeclaration","start":6885,"end":6922,"kind":"var","declarations":[{"type":"VariableDeclarator","start":6889,"end":6921,"id":{"type":"Identifier","start":6889,"end":6893,"name":"item"},"init":{"type":"CallExpression","start":6896,"end":6921,"optional":false,"callee":{"type":"MemberExpression","start":6896,"end":6916,"computed":false,"optional":false,"object":{"type":"Identifier","start":6896,"end":6908,"name":"localStorage"},"property":{"type":"Identifier","start":6909,"end":6916,"name":"getItem"}},"arguments":[{"type":"Identifier","start":6917,"end":6920,"name":"key"}]}}]},{"type":"IfStatement","start":6931,"end":6966,"test":{"type":"UnaryExpression","start":6935,"end":6940,"operator":"!","argument":{"type":"Identifier","start":6936,"end":6940,"name":"item"},"prefix":true},"consequent":{"type":"ReturnStatement","start":6954,"end":6966,"argument":{"type":"Literal","start":6961,"end":6965,"raw":"null","value":null}},"alternate":null},{"type":"VariableDeclaration","start":6975,"end":7007,"kind":"var","declarations":[{"type":"VariableDeclarator","start":6979,"end":7006,"id":{"type":"Identifier","start":6979,"end":6987,"name":"lockItem"},"init":{"type":"CallExpression","start":6990,"end":7006,"optional":false,"callee":{"type":"MemberExpression","start":6990,"end":7000,"computed":false,"optional":false,"object":{"type":"Identifier","start":6990,"end":6994,"name":"JSON"},"property":{"type":"Identifier","start":6995,"end":7000,"name":"parse"}},"arguments":[{"type":"Identifier","start":7001,"end":7005,"name":"item"}]}}]},{"type":"IfStatement","start":7016,"end":7288,"test":{"type":"BinaryExpression","start":7020,"end":7072,"operator":">=","left":{"type":"BinaryExpression","start":7020,"end":7061,"operator":"-","left":{"type":"CallExpression","start":7020,"end":7040,"optional":false,"callee":{"type":"MemberExpression","start":7020,"end":7038,"computed":false,"optional":false,"object":{"type":"NewExpression","start":7020,"end":7030,"callee":{"type":"Identifier","start":7024,"end":7028,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":7031,"end":7038,"name":"getTime"}},"arguments":[]},"right":{"type":"MemberExpression","start":7043,"end":7061,"computed":false,"optional":false,"object":{"type":"Identifier","start":7043,"end":7051,"name":"lockItem"},"property":{"type":"Identifier","start":7052,"end":7061,"name":"expiresAt"}}},"right":{"type":"Identifier","start":7065,"end":7072,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":7074,"end":7288,"body":[{"type":"ExpressionStatement","start":7088,"end":7211,"expression":{"type":"LogicalExpression","start":7088,"end":7210,"operator":"??","left":{"type":"MemberExpression","start":7088,"end":7113,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":7088,"end":7100,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":7088,"end":7092},"property":{"type":"Identifier","start":7093,"end":7100,"name":"_config"}},"property":{"type":"Identifier","start":7101,"end":7113,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":7117,"end":7210,"optional":false,"callee":{"type":"MemberExpression","start":7117,"end":7130,"computed":false,"optional":false,"object":{"type":"Identifier","start":7117,"end":7124,"name":"console"},"property":{"type":"Identifier","start":7125,"end":7130,"name":"debug"}},"arguments":[{"type":"Literal","start":7131,"end":7188,"value":"FastMutex client \"%s\" removed an expired record on \"%s\"","raw":"'FastMutex client \"%s\" removed an expired record on \"%s\"'"},{"type":"MemberExpression","start":7190,"end":7204,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":7190,"end":7194},"property":{"type":"Identifier","start":7195,"end":7204,"name":"_clientId"}},{"type":"Identifier","start":7206,"end":7209,"name":"key"}]}}},{"type":"ExpressionStatement","start":7224,"end":7253,"expression":{"type":"CallExpression","start":7224,"end":7252,"optional":false,"callee":{"type":"MemberExpression","start":7224,"end":7247,"computed":false,"optional":false,"object":{"type":"Identifier","start":7224,"end":7236,"name":"localStorage"},"property":{"type":"Identifier","start":7237,"end":7247,"name":"removeItem"}},"arguments":[{"type":"Identifier","start":7248,"end":7251,"name":"key"}]}},{"type":"ReturnStatement","start":7266,"end":7278,"argument":{"type":"Literal","start":7273,"end":7277,"raw":"null","value":null}}]},"alternate":null},{"type":"ReturnStatement","start":7297,"end":7322,"argument":{"type":"MemberExpression","start":7304,"end":7321,"computed":false,"optional":false,"object":{"type":"Identifier","start":7304,"end":7312,"name":"lockItem"},"property":{"type":"Identifier","start":7313,"end":7321,"name":"clientId"}}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":7333,"end":7719,"static":false,"computed":false,"key":{"type":"Identifier","start":7333,"end":7352,"name":"_releaseExpiredLock"},"value":{"type":"FunctionExpression","start":7352,"end":7719,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":7353,"end":7356,"name":"key"}],"body":{"type":"BlockStatement","start":7358,"end":7719,"body":[{"type":"VariableDeclaration","start":7368,"end":7405,"kind":"var","declarations":[{"type":"VariableDeclarator","start":7372,"end":7404,"id":{"type":"Identifier","start":7372,"end":7376,"name":"item"},"init":{"type":"CallExpression","start":7379,"end":7404,"optional":false,"callee":{"type":"MemberExpression","start":7379,"end":7399,"computed":false,"optional":false,"object":{"type":"Identifier","start":7379,"end":7391,"name":"localStorage"},"property":{"type":"Identifier","start":7392,"end":7399,"name":"getItem"}},"arguments":[{"type":"Identifier","start":7400,"end":7403,"name":"key"}]}}]},{"type":"IfStatement","start":7414,"end":7449,"test":{"type":"UnaryExpression","start":7418,"end":7423,"operator":"!","argument":{"type":"Identifier","start":7419,"end":7423,"name":"item"},"prefix":true},"consequent":{"type":"ReturnStatement","start":7437,"end":7449,"argument":{"type":"Literal","start":7444,"end":7448,"raw":"null","value":null}},"alternate":null},{"type":"VariableDeclaration","start":7458,"end":7490,"kind":"var","declarations":[{"type":"VariableDeclarator","start":7462,"end":7489,"id":{"type":"Identifier","start":7462,"end":7470,"name":"lockItem"},"init":{"type":"CallExpression","start":7473,"end":7489,"optional":false,"callee":{"type":"MemberExpression","start":7473,"end":7483,"computed":false,"optional":false,"object":{"type":"Identifier","start":7473,"end":7477,"name":"JSON"},"property":{"type":"Identifier","start":7478,"end":7483,"name":"parse"}},"arguments":[{"type":"Identifier","start":7484,"end":7488,"name":"item"}]}}]},{"type":"IfStatement","start":7499,"end":7713,"test":{"type":"BinaryExpression","start":7503,"end":7545,"operator":"<=","left":{"type":"MemberExpression","start":7503,"end":7521,"computed":false,"optional":false,"object":{"type":"Identifier","start":7503,"end":7511,"name":"lockItem"},"property":{"type":"Identifier","start":7512,"end":7521,"name":"expiresAt"}},"right":{"type":"CallExpression","start":7525,"end":7545,"optional":false,"callee":{"type":"MemberExpression","start":7525,"end":7543,"computed":false,"optional":false,"object":{"type":"NewExpression","start":7525,"end":7535,"callee":{"type":"Identifier","start":7529,"end":7533,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":7536,"end":7543,"name":"getTime"}},"arguments":[]}},"consequent":{"type":"BlockStatement","start":7547,"end":7713,"body":[{"type":"ExpressionStatement","start":7561,"end":7661,"expression":{"type":"LogicalExpression","start":7561,"end":7660,"operator":"??","left":{"type":"MemberExpression","start":7561,"end":7586,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":7561,"end":7573,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":7561,"end":7565},"property":{"type":"Identifier","start":7566,"end":7573,"name":"_config"}},"property":{"type":"Identifier","start":7574,"end":7586,"name":"debugEnabled"}},"right":{"type":"CallExpression","start":7590,"end":7660,"optional":false,"callee":{"type":"MemberExpression","start":7590,"end":7603,"computed":false,"optional":false,"object":{"type":"Identifier","start":7590,"end":7597,"name":"console"},"property":{"type":"Identifier","start":7598,"end":7603,"name":"debug"}},"arguments":[{"type":"Literal","start":7604,"end":7654,"value":"FastMutex auto removed an expired record on \"%s\"","raw":"'FastMutex auto removed an expired record on \"%s\"'"},{"type":"Identifier","start":7656,"end":7659,"name":"key"}]}}},{"type":"ExpressionStatement","start":7674,"end":7703,"expression":{"type":"CallExpression","start":7674,"end":7702,"optional":false,"callee":{"type":"MemberExpression","start":7674,"end":7697,"computed":false,"optional":false,"object":{"type":"Identifier","start":7674,"end":7686,"name":"localStorage"},"property":{"type":"Identifier","start":7687,"end":7697,"name":"removeItem"}},"arguments":[{"type":"Identifier","start":7698,"end":7701,"name":"key"}]}}]},"alternate":null}]},"expression":false},"kind":"method"},{"type":"PropertyDefinition","start":7724,"end":7929,"static":true,"computed":false,"key":{"type":"Identifier","start":7731,"end":7735,"name":"ɵfac"},"value":{"type":"CallExpression","start":7738,"end":7928,"optional":false,"callee":{"type":"MemberExpression","start":7738,"end":7759,"computed":false,"optional":false,"object":{"type":"Identifier","start":7738,"end":7740,"name":"i0"},"property":{"type":"Identifier","start":7741,"end":7759,"name":"ɵɵngDeclareFactory"}},"arguments":[{"type":"ObjectExpression","start":7760,"end":7927,"properties":[{"type":"Property","start":7762,"end":7782,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7762,"end":7772,"name":"minVersion"},"value":{"type":"Literal","start":7774,"end":7782,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":7784,"end":7801,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7784,"end":7791,"name":"version"},"value":{"type":"Literal","start":7793,"end":7801,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":7803,"end":7815,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7803,"end":7811,"name":"ngImport"},"value":{"type":"Identifier","start":7813,"end":7815,"name":"i0"},"kind":"init"},{"type":"Property","start":7817,"end":7843,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7817,"end":7821,"name":"type"},"value":{"type":"Identifier","start":7823,"end":7843,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":7845,"end":7886,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7845,"end":7849,"name":"deps"},"value":{"type":"ArrayExpression","start":7851,"end":7886,"elements":[{"type":"ObjectExpression","start":7852,"end":7885,"properties":[{"type":"Property","start":7854,"end":7883,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7854,"end":7859,"name":"token"},"value":{"type":"Identifier","start":7861,"end":7883,"name":"MUTEX_FAST_LOCK_CONFIG"},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":7888,"end":7925,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7888,"end":7894,"name":"target"},"value":{"type":"MemberExpression","start":7896,"end":7925,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":7896,"end":7914,"computed":false,"optional":false,"object":{"type":"Identifier","start":7896,"end":7898,"name":"i0"},"property":{"type":"Identifier","start":7899,"end":7914,"name":"ɵɵFactoryTarget"}},"property":{"type":"Identifier","start":7915,"end":7925,"name":"Injectable"}},"kind":"init"}]}]}},{"type":"PropertyDefinition","start":7934,"end":8081,"static":true,"computed":false,"key":{"type":"Identifier","start":7941,"end":7946,"name":"ɵprov"},"value":{"type":"CallExpression","start":7949,"end":8080,"optional":false,"callee":{"type":"MemberExpression","start":7949,"end":7973,"computed":false,"optional":false,"object":{"type":"Identifier","start":7949,"end":7951,"name":"i0"},"property":{"type":"Identifier","start":7952,"end":7973,"name":"ɵɵngDeclareInjectable"}},"arguments":[{"type":"ObjectExpression","start":7974,"end":8079,"properties":[{"type":"Property","start":7976,"end":7996,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7976,"end":7986,"name":"minVersion"},"value":{"type":"Literal","start":7988,"end":7996,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":7998,"end":8015,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7998,"end":8005,"name":"version"},"value":{"type":"Literal","start":8007,"end":8015,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":8017,"end":8029,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8017,"end":8025,"name":"ngImport"},"value":{"type":"Identifier","start":8027,"end":8029,"name":"i0"},"kind":"init"},{"type":"Property","start":8031,"end":8057,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8031,"end":8035,"name":"type"},"value":{"type":"Identifier","start":8037,"end":8057,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":8059,"end":8077,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8059,"end":8069,"name":"providedIn"},"value":{"type":"Literal","start":8071,"end":8077,"value":"root","raw":"'root'"},"kind":"init"}]}]}}]}}},{"type":"ExpressionStatement","start":8084,"end":8513,"expression":{"type":"CallExpression","start":8084,"end":8512,"optional":false,"callee":{"type":"MemberExpression","start":8084,"end":8111,"computed":false,"optional":false,"object":{"type":"Identifier","start":8084,"end":8086,"name":"i0"},"property":{"type":"Identifier","start":8087,"end":8111,"name":"ɵɵngDeclareClassMetadata"}},"arguments":[{"type":"ObjectExpression","start":8112,"end":8511,"properties":[{"type":"Property","start":8114,"end":8134,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8114,"end":8124,"name":"minVersion"},"value":{"type":"Literal","start":8126,"end":8134,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":8136,"end":8153,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8136,"end":8143,"name":"version"},"value":{"type":"Literal","start":8145,"end":8153,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":8155,"end":8167,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8155,"end":8163,"name":"ngImport"},"value":{"type":"Identifier","start":8165,"end":8167,"name":"i0"},"kind":"init"},{"type":"Property","start":8169,"end":8195,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8169,"end":8173,"name":"type"},"value":{"type":"Identifier","start":8175,"end":8195,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":8197,"end":8331,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8197,"end":8207,"name":"decorators"},"value":{"type":"ArrayExpression","start":8209,"end":8331,"elements":[{"type":"ObjectExpression","start":8210,"end":8330,"properties":[{"type":"Property","start":8224,"end":8240,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8224,"end":8228,"name":"type"},"value":{"type":"Identifier","start":8230,"end":8240,"name":"Injectable"},"kind":"init"},{"type":"Property","start":8254,"end":8320,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8254,"end":8258,"name":"args"},"value":{"type":"ArrayExpression","start":8260,"end":8320,"elements":[{"type":"ObjectExpression","start":8261,"end":8319,"properties":[{"type":"Property","start":8283,"end":8301,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8283,"end":8293,"name":"providedIn"},"value":{"type":"Literal","start":8295,"end":8301,"value":"root","raw":"'root'"},"kind":"init"}]}]},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":8333,"end":8509,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8333,"end":8347,"name":"ctorParameters"},"value":{"type":"ArrowFunctionExpression","start":8349,"end":8509,"async":false,"expression":true,"generator":false,"params":[],"body":{"type":"ArrayExpression","start":8355,"end":8509,"elements":[{"type":"ObjectExpression","start":8356,"end":8508,"properties":[{"type":"Property","start":8358,"end":8386,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8358,"end":8362,"name":"type"},"value":{"type":"MemberExpression","start":8364,"end":8386,"computed":false,"optional":false,"object":{"type":"Identifier","start":8364,"end":8366,"name":"i1"},"property":{"type":"Identifier","start":8367,"end":8386,"name":"MutexFastLockConfig"}},"kind":"init"},{"type":"Property","start":8388,"end":8506,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8388,"end":8398,"name":"decorators"},"value":{"type":"ArrayExpression","start":8400,"end":8506,"elements":[{"type":"ObjectExpression","start":8401,"end":8505,"properties":[{"type":"Property","start":8423,"end":8435,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8423,"end":8427,"name":"type"},"value":{"type":"Identifier","start":8429,"end":8435,"name":"Inject"},"kind":"init"},{"type":"Property","start":8457,"end":8487,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8457,"end":8461,"name":"args"},"value":{"type":"ArrayExpression","start":8463,"end":8487,"elements":[{"type":"Identifier","start":8464,"end":8486,"name":"MUTEX_FAST_LOCK_CONFIG"}]},"kind":"init"}]}]},"kind":"init"}]}]},"id":null},"kind":"init"}]}]}}],"_rollupRemoved":[{"end":27432,"start":8514,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nexport class MutexFastLockService {\n    _config;\n    _clientId;\n    _xPrefix;\n    _yPrefix;\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, deps: [{ token: MUTEX_FAST_LOCK_CONFIG }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: () => [{ type: i1.MutexFastLockConfig, decorators: [{\n                    type: Inject,\n                    args: [MUTEX_FAST_LOCK_CONFIG]\n                }] }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUs5QyxNQUFNLE9BQU8sb0JBQW9CO0lBT29CO0lBTDNDLFNBQVMsQ0FBUztJQUNsQixRQUFRLENBQVM7SUFDakIsUUFBUSxDQUFTO0lBRXpCLFlBQ21ELE9BQTRCO1FBQTVCLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBRTdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRTtZQUNsRCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFFYixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM3QyxJQUFJLFlBQVksQ0FB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QVU7bUJBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25COzswQkFRSSxNQUFNOzJCQUFDLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHIH0gZnJvbSAnLi9tdXRleC1mYXN0LWxvY2stY29uZmlnLmluamVjdG9yJztcclxuaW1wb3J0IHsgTXV0ZXhGYXN0TG9ja0NvbmZpZyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWcnO1xyXG5pbXBvcnQgeyBNdXRleExvY2tTdGF0cyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpYmVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IExvY2tJdGVtIH0gZnJvbSAnLi9tb2RlbHMvbG9jay1pdGVtJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIE11dGV4RmFzdExvY2tTZXJ2aWNlIHtcclxuXHJcbiAgcHJpdmF0ZSBfY2xpZW50SWQ6IHN0cmluZztcclxuICBwcml2YXRlIF94UHJlZml4OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfeVByZWZpeDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIEBJbmplY3QoTVVURVhfRkFTVF9MT0NLX0NPTkZJRykgcHJpdmF0ZSByZWFkb25seSBfY29uZmlnOiBNdXRleEZhc3RMb2NrQ29uZmlnLFxyXG4gICkge1xyXG4gICAgdGhpcy5fY2xpZW50SWQgPSB0aGlzLl9nZW5lcmF0ZVJhbmRvbUlkKCk7XHJcbiAgICB0aGlzLl94UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19YXyc7XHJcbiAgICB0aGlzLl95UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19ZXyc7XHJcblxyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgIHZhciBhcnIgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZih0aGF0Ll94UHJlZml4KSA9PSAwXHJcbiAgICAgICAgICB8fCBsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feVByZWZpeCkgPT0gMCkge1xyXG4gICAgICAgICAgYXJyLnB1c2gobG9jYWxTdG9yYWdlLmtleShpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGFycltpXSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvY2soa2V5OiBzdHJpbmcsIHRpbWVvdXQ6IG51bWJlciA9IC0xKSB7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHRpbWVvdXQgPT0gLTEpIHRpbWVvdXQgPSB0aGlzLl9jb25maWcudGltZW91dDtcclxuXHJcbiAgICBsZXQgeExvY2sgPSB0aGF0Ll94UHJlZml4ICsga2V5O1xyXG4gICAgbGV0IHlMb2NrID0gdGhhdC5feVByZWZpeCArIGtleTtcclxuXHJcbiAgICBsZXQgbG9ja1N0YXRzOiBNdXRleExvY2tTdGF0cyA9IG5ldyBNdXRleExvY2tTdGF0cygpO1xyXG5cclxuICAgIHRoYXQucmVzZXRTdGF0cyhsb2NrU3RhdHMpO1xyXG5cclxuICAgIHRoaXMuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnQXR0ZW1wdGluZyB0byBhY3F1aXJlIExvY2sgb24gXCIlc1wiIHVzaW5nIEZhc3RNdXRleCBpbnN0YW5jZSBcIiVzXCInLCBrZXksIHRoaXMuX2NsaWVudElkKTtcclxuXHJcbiAgICBsb2NrU3RhdHMuYWNxdWlyZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgLy9yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE11dGV4TG9ja1N0YXRzPihzdWJzY3JpYmVyID0+IHtcclxuICAgICAgLy8gd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gQVBJIGNhbGxzIHRvIGxvY2soKSBhbmQgb3VyIGludGVybmFsXHJcbiAgICAgIC8vIHJlY3Vyc2l2ZSBjYWxscyBzbyB0aGF0IHdlIGNhbiB0aW1lb3V0IGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBsb2NrKCkgYW5kXHJcbiAgICAgIC8vIG5vdCBlYWNoIHN1YnNlcXVlbnQgY2FsbC4gIFRoZXJlZm9yZSwgY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGhlcmUgd2l0aGluXHJcbiAgICAgIC8vIHRoZSBwcm9taXNlIGNsb3N1cmUgdGhhdCB3ZSB1c2UgZm9yIHN1YnNlcXVlbnQgY2FsbHM6XHJcbiAgICAgIGxldCBhY3F1aXJlTG9jayA9IGZ1bmN0aW9uIGFjcXVpcmVMb2NrKGtleSkge1xyXG5cclxuICAgICAgICB0aGF0Ll9yZWxlYXNlRXhwaXJlZExvY2soeExvY2spO1xyXG4gICAgICAgIHRoYXQuX3JlbGVhc2VFeHBpcmVkTG9jayh5TG9jayk7XHJcblxyXG4gICAgICAgIHZhciBlbGFwc2VkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9ja1N0YXRzLmFjcXVpcmVTdGFydDtcclxuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIG9uIFwiJXNcIiBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICVzbXMgYnkgRmFzdE11dGV4IGNsaWVudCBcIiVzXCInLCBrZXksIHRpbWVvdXQsIHRoYXQuX2NsaWVudElkKTtcclxuICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IobmV3IEVycm9yKCdMb2NrIGNvdWxkIG5vdCBiZSBhY3F1aXJlZCB3aXRoaW4gJyArIHRpbWVvdXQgKyAnbXMnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGF0Ll9zZXRJdGVtKHhMb2NrLCB0aGF0Ll9jbGllbnRJZCwgdGltZW91dCk7XHJcblxyXG4gICAgICAgIC8vIGlmIHkgZXhpc3RzLCBhbm90aGVyIGNsaWVudCBpcyBnZXR0aW5nIGEgbG9jaywgc28gcmV0cnkgaW4gYSBiaXRcclxuICAgICAgICB2YXIgbHNZID0gdGhhdC5fZ2V0SXRlbSh5TG9jaywgdGltZW91dCk7XHJcbiAgICAgICAgaWYgKGxzWSkge1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGV4aXN0cyBvbiBZICglcyksIHJlc3RhcnRpbmcuLi4nLCBsc1kpO1xyXG4gICAgICAgICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCsrO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3F1aXJlTG9jayhrZXkpO1xyXG4gICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXNrIGZvciBpbm5lciBsb2NrXHJcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh5TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAvLyBpZiB4IHdhcyBjaGFuZ2VkLCBhbm90aGVyIGNsaWVudCBpcyBjb250ZW5kaW5nIGZvciBhbiBpbm5lciBsb2NrXHJcbiAgICAgICAgdmFyIGxzWCA9IHRoYXQuX2dldEl0ZW0oeExvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgIGlmIChsc1ggIT09IHRoYXQuX2NsaWVudElkKSB7XHJcbiAgICAgICAgICBsb2NrU3RhdHMuY29udGVudGlvbkNvdW50Kys7XHJcbiAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0xvY2sgY29udGVudGlvbiBkZXRlY3RlZC4gWD1cIiVzXCInLCBsc1gpO1xyXG5cclxuICAgICAgICAgIC8vIEdpdmUgZW5vdWdoIHRpbWUgZm9yIGNyaXRpY2FsIHNlY3Rpb246XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbHNZID0gdGhhdC5fZ2V0SXRlbSh5TG9jaywgdGltZW91dCk7XHJcbiAgICAgICAgICAgIGlmIChsc1kgPT09IHRoYXQuX2NsaWVudElkKSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIGxvY2tcclxuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIHdvbiB0aGUgbG9jayBjb250ZW50aW9uIG9uIFwiJXNcIicsIHRoYXQuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICAgICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGxvc3QgdGhlIGxvY2ssIHJlc3RhcnQgdGhlIHByb2Nlc3MgYWdhaW5cclxuICAgICAgICAgICAgICBsb2NrU3RhdHMucmVzdGFydENvdW50Kys7XHJcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLmxvY2tzTG9zdCsrO1xyXG4gICAgICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnRmFzdE11dGV4IGNsaWVudCBcIiVzXCIgbG9zdCB0aGUgbG9jayBjb250ZW50aW9uIG9uIFwiJXNcIiB0byBhbm90aGVyIHByb2Nlc3MgKCVzKS4gUmVzdGFydGluZy4uLicsIHRoYXQuX2NsaWVudElkLCBrZXksIGxzWSk7XHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcclxuICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIDEwMCk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbm8gY29udGVudGlvbjpcclxuICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGFjcXVpcmVkIGEgbG9jayBvbiBcIiVzXCIgd2l0aCBubyBjb250ZW50aW9uJywgdGhhdC5fY2xpZW50SWQsIGtleSk7XHJcbiAgICAgICAgdGhhdC5yZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXIsIGxvY2tTdGF0cyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhY3F1aXJlTG9jayhrZXkpO1xyXG5cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbGVhc2Uoa2V5KSB7XHJcbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGlzIHJlbGVhc2luZyBsb2NrIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xyXG5cclxuICAgIGxldCB4ID0gdGhpcy5feFByZWZpeCArIGtleTtcclxuICAgIGxldCB5ID0gdGhpcy5feVByZWZpeCArIGtleTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeSk7XHJcblxyXG4gICAgLy90aGF0LmxvY2tTdGF0cy5sb2NrRW5kID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tEdXJhdGlvbiA9IHRoYXQubG9ja1N0YXRzLmxvY2tFbmQgLSB0aGF0LmxvY2tTdGF0cy5sb2NrU3RhcnQ7XHJcblxyXG4gICAgLy9sZXQgcmV0U3RhdHMgPSBhbmd1bGFyLmNvcHkodGhhdC5sb2NrU3RhdHMpO1xyXG5cclxuICAgIC8vdGhhdC5yZXNldFN0YXRzKCk7XHJcblxyXG4gICAgLy9yZXR1cm4gcmV0U3RhdHM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9nZW5lcmF0ZVJhbmRvbUlkKCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMDAwKSArICcnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNldFN0YXRzKGxvY2tTdGF0czogTXV0ZXhMb2NrU3RhdHMpIHtcclxuICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQgPSAwO1xyXG4gICAgbG9ja1N0YXRzLmxvY2tzTG9zdCA9IDA7XHJcbiAgICBsb2NrU3RhdHMuY29udGVudGlvbkNvdW50ID0gMDtcclxuICAgIGxvY2tTdGF0cy5hY3F1aXJlRHVyYXRpb24gPSAwO1xyXG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxNdXRleExvY2tTdGF0cz4sIHN0YXRzOiBNdXRleExvY2tTdGF0cykge1xyXG4gICAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICBzdGF0cy5hY3F1aXJlRW5kID0gY3VycmVudFRpbWU7XHJcbiAgICBzdGF0cy5hY3F1aXJlRHVyYXRpb24gPSBzdGF0cy5hY3F1aXJlRW5kIC0gc3RhdHMuYWNxdWlyZVN0YXJ0O1xyXG4gICAgc3RhdHMubG9ja1N0YXJ0ID0gY3VycmVudFRpbWU7XHJcbiAgICBzdWJzY3JpYmVyLm5leHQoc3RhdHMpO1xyXG4gICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHdyYXAgYWxsIHZhbHVlcyBpbiBhbiBvYmplY3QgdGhhdCBpbmNsdWRlcyB0aGUgdGltZSAoc29cclxuICAgKiB0aGF0IHdlIGNhbiBleHBpcmUgaXQgaW4gdGhlIGZ1dHVyZSkgYW5kIGpzb24uc3RyaW5naWZ5J3MgaXRcclxuICAgKi9cclxuICBwcml2YXRlIF9zZXRJdGVtKGtleSwgY2xpZW50SWQsIHRpbWVvdXQpIHtcclxuICAgIGxldCBsb2NrSXRlbSA9IG5ldyBMb2NrSXRlbSgpO1xyXG4gICAgbG9ja0l0ZW0uY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgIGxvY2tJdGVtLmV4cGlyZXNBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdGltZW91dDtcclxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGxvY2tJdGVtKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgSlNPTiBlbmNvZGVkIHZhbHVlcyBzZXQgaW4gbG9jYWxTdG9yYWdlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfZ2V0SXRlbShrZXksIHRpbWVvdXQpIHtcclxuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xyXG4gICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9ja0l0ZW0uZXhwaXJlc0F0ID49IHRpbWVvdXQpIHtcclxuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbG9ja0l0ZW0uY2xpZW50SWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9yZWxlYXNlRXhwaXJlZExvY2soa2V5OiBzdHJpbmcpe1xyXG4gICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG5cclxuICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdmFyIGxvY2tJdGVtID0gPExvY2tJdGVtPkpTT04ucGFyc2UoaXRlbSk7XHJcblxyXG4gICAgaWYgKGxvY2tJdGVtLmV4cGlyZXNBdCA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xyXG4gICAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBhdXRvIHJlbW92ZWQgYW4gZXhwaXJlZCByZWNvcmQgb24gXCIlc1wiJywga2V5KTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19","customTransformCache":false,"dependencies":["@angular/core","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","rxjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs"],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nexport class MutexFastLockService {\n    _config;\n    _clientId;\n    _xPrefix;\n    _yPrefix;\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, deps: [{ token: MUTEX_FAST_LOCK_CONFIG }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: () => [{ type: i1.MutexFastLockConfig, decorators: [{\n                    type: Inject,\n                    args: [MUTEX_FAST_LOCK_CONFIG]\n                }] }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUs5QyxNQUFNLE9BQU8sb0JBQW9CO0lBT29CO0lBTDNDLFNBQVMsQ0FBUztJQUNsQixRQUFRLENBQVM7SUFDakIsUUFBUSxDQUFTO0lBRXpCLFlBQ21ELE9BQTRCO1FBQTVCLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBRTdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRTtZQUNsRCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFFYixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUM3QyxJQUFJLFlBQVksQ0FB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QVU7bUJBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25COzswQkFRSSxNQUFNOzJCQUFDLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHIH0gZnJvbSAnLi9tdXRleC1mYXN0LWxvY2stY29uZmlnLmluamVjdG9yJztcclxuaW1wb3J0IHsgTXV0ZXhGYXN0TG9ja0NvbmZpZyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWcnO1xyXG5pbXBvcnQgeyBNdXRleExvY2tTdGF0cyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpYmVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IExvY2tJdGVtIH0gZnJvbSAnLi9tb2RlbHMvbG9jay1pdGVtJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIE11dGV4RmFzdExvY2tTZXJ2aWNlIHtcclxuXHJcbiAgcHJpdmF0ZSBfY2xpZW50SWQ6IHN0cmluZztcclxuICBwcml2YXRlIF94UHJlZml4OiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfeVByZWZpeDogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIEBJbmplY3QoTVVURVhfRkFTVF9MT0NLX0NPTkZJRykgcHJpdmF0ZSByZWFkb25seSBfY29uZmlnOiBNdXRleEZhc3RMb2NrQ29uZmlnLFxyXG4gICkge1xyXG4gICAgdGhpcy5fY2xpZW50SWQgPSB0aGlzLl9nZW5lcmF0ZVJhbmRvbUlkKCk7XHJcbiAgICB0aGlzLl94UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19YXyc7XHJcbiAgICB0aGlzLl95UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19ZXyc7XHJcblxyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgIHZhciBhcnIgPSBbXTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZih0aGF0Ll94UHJlZml4KSA9PSAwXHJcbiAgICAgICAgICB8fCBsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feVByZWZpeCkgPT0gMCkge1xyXG4gICAgICAgICAgYXJyLnB1c2gobG9jYWxTdG9yYWdlLmtleShpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGFycltpXSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGxvY2soa2V5OiBzdHJpbmcsIHRpbWVvdXQ6IG51bWJlciA9IC0xKSB7XHJcbiAgICBsZXQgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgaWYgKHRpbWVvdXQgPT0gLTEpIHRpbWVvdXQgPSB0aGlzLl9jb25maWcudGltZW91dDtcclxuXHJcbiAgICBsZXQgeExvY2sgPSB0aGF0Ll94UHJlZml4ICsga2V5O1xyXG4gICAgbGV0IHlMb2NrID0gdGhhdC5feVByZWZpeCArIGtleTtcclxuXHJcbiAgICBsZXQgbG9ja1N0YXRzOiBNdXRleExvY2tTdGF0cyA9IG5ldyBNdXRleExvY2tTdGF0cygpO1xyXG5cclxuICAgIHRoYXQucmVzZXRTdGF0cyhsb2NrU3RhdHMpO1xyXG5cclxuICAgIHRoaXMuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnQXR0ZW1wdGluZyB0byBhY3F1aXJlIExvY2sgb24gXCIlc1wiIHVzaW5nIEZhc3RNdXRleCBpbnN0YW5jZSBcIiVzXCInLCBrZXksIHRoaXMuX2NsaWVudElkKTtcclxuXHJcbiAgICBsb2NrU3RhdHMuYWNxdWlyZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgLy9yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE11dGV4TG9ja1N0YXRzPihzdWJzY3JpYmVyID0+IHtcclxuICAgICAgLy8gd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gQVBJIGNhbGxzIHRvIGxvY2soKSBhbmQgb3VyIGludGVybmFsXHJcbiAgICAgIC8vIHJlY3Vyc2l2ZSBjYWxscyBzbyB0aGF0IHdlIGNhbiB0aW1lb3V0IGJhc2VkIG9uIHRoZSBvcmlnaW5hbCBsb2NrKCkgYW5kXHJcbiAgICAgIC8vIG5vdCBlYWNoIHN1YnNlcXVlbnQgY2FsbC4gIFRoZXJlZm9yZSwgY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGhlcmUgd2l0aGluXHJcbiAgICAgIC8vIHRoZSBwcm9taXNlIGNsb3N1cmUgdGhhdCB3ZSB1c2UgZm9yIHN1YnNlcXVlbnQgY2FsbHM6XHJcbiAgICAgIGxldCBhY3F1aXJlTG9jayA9IGZ1bmN0aW9uIGFjcXVpcmVMb2NrKGtleSkge1xyXG5cclxuICAgICAgICB0aGF0Ll9yZWxlYXNlRXhwaXJlZExvY2soeExvY2spO1xyXG4gICAgICAgIHRoYXQuX3JlbGVhc2VFeHBpcmVkTG9jayh5TG9jayk7XHJcblxyXG4gICAgICAgIHZhciBlbGFwc2VkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9ja1N0YXRzLmFjcXVpcmVTdGFydDtcclxuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gdGltZW91dCkge1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIG9uIFwiJXNcIiBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICVzbXMgYnkgRmFzdE11dGV4IGNsaWVudCBcIiVzXCInLCBrZXksIHRpbWVvdXQsIHRoYXQuX2NsaWVudElkKTtcclxuICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IobmV3IEVycm9yKCdMb2NrIGNvdWxkIG5vdCBiZSBhY3F1aXJlZCB3aXRoaW4gJyArIHRpbWVvdXQgKyAnbXMnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGF0Ll9zZXRJdGVtKHhMb2NrLCB0aGF0Ll9jbGllbnRJZCwgdGltZW91dCk7XHJcblxyXG4gICAgICAgIC8vIGlmIHkgZXhpc3RzLCBhbm90aGVyIGNsaWVudCBpcyBnZXR0aW5nIGEgbG9jaywgc28gcmV0cnkgaW4gYSBiaXRcclxuICAgICAgICB2YXIgbHNZID0gdGhhdC5fZ2V0SXRlbSh5TG9jaywgdGltZW91dCk7XHJcbiAgICAgICAgaWYgKGxzWSkge1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGV4aXN0cyBvbiBZICglcyksIHJlc3RhcnRpbmcuLi4nLCBsc1kpO1xyXG4gICAgICAgICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCsrO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3F1aXJlTG9jayhrZXkpO1xyXG4gICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gYXNrIGZvciBpbm5lciBsb2NrXHJcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh5TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAvLyBpZiB4IHdhcyBjaGFuZ2VkLCBhbm90aGVyIGNsaWVudCBpcyBjb250ZW5kaW5nIGZvciBhbiBpbm5lciBsb2NrXHJcbiAgICAgICAgdmFyIGxzWCA9IHRoYXQuX2dldEl0ZW0oeExvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgIGlmIChsc1ggIT09IHRoYXQuX2NsaWVudElkKSB7XHJcbiAgICAgICAgICBsb2NrU3RhdHMuY29udGVudGlvbkNvdW50Kys7XHJcbiAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0xvY2sgY29udGVudGlvbiBkZXRlY3RlZC4gWD1cIiVzXCInLCBsc1gpO1xyXG5cclxuICAgICAgICAgIC8vIEdpdmUgZW5vdWdoIHRpbWUgZm9yIGNyaXRpY2FsIHNlY3Rpb246XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbHNZID0gdGhhdC5fZ2V0SXRlbSh5TG9jaywgdGltZW91dCk7XHJcbiAgICAgICAgICAgIGlmIChsc1kgPT09IHRoYXQuX2NsaWVudElkKSB7XHJcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIGxvY2tcclxuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIHdvbiB0aGUgbG9jayBjb250ZW50aW9uIG9uIFwiJXNcIicsIHRoYXQuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICAgICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGxvc3QgdGhlIGxvY2ssIHJlc3RhcnQgdGhlIHByb2Nlc3MgYWdhaW5cclxuICAgICAgICAgICAgICBsb2NrU3RhdHMucmVzdGFydENvdW50Kys7XHJcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLmxvY2tzTG9zdCsrO1xyXG4gICAgICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnRmFzdE11dGV4IGNsaWVudCBcIiVzXCIgbG9zdCB0aGUgbG9jayBjb250ZW50aW9uIG9uIFwiJXNcIiB0byBhbm90aGVyIHByb2Nlc3MgKCVzKS4gUmVzdGFydGluZy4uLicsIHRoYXQuX2NsaWVudElkLCBrZXksIGxzWSk7XHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcclxuICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIDEwMCk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbm8gY29udGVudGlvbjpcclxuICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGFjcXVpcmVkIGEgbG9jayBvbiBcIiVzXCIgd2l0aCBubyBjb250ZW50aW9uJywgdGhhdC5fY2xpZW50SWQsIGtleSk7XHJcbiAgICAgICAgdGhhdC5yZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXIsIGxvY2tTdGF0cyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhY3F1aXJlTG9jayhrZXkpO1xyXG5cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbGVhc2Uoa2V5KSB7XHJcbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGlzIHJlbGVhc2luZyBsb2NrIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xyXG5cclxuICAgIGxldCB4ID0gdGhpcy5feFByZWZpeCArIGtleTtcclxuICAgIGxldCB5ID0gdGhpcy5feVByZWZpeCArIGtleTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHgpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeSk7XHJcblxyXG4gICAgLy90aGF0LmxvY2tTdGF0cy5sb2NrRW5kID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tEdXJhdGlvbiA9IHRoYXQubG9ja1N0YXRzLmxvY2tFbmQgLSB0aGF0LmxvY2tTdGF0cy5sb2NrU3RhcnQ7XHJcblxyXG4gICAgLy9sZXQgcmV0U3RhdHMgPSBhbmd1bGFyLmNvcHkodGhhdC5sb2NrU3RhdHMpO1xyXG5cclxuICAgIC8vdGhhdC5yZXNldFN0YXRzKCk7XHJcblxyXG4gICAgLy9yZXR1cm4gcmV0U3RhdHM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9nZW5lcmF0ZVJhbmRvbUlkKCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMDAwKSArICcnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNldFN0YXRzKGxvY2tTdGF0czogTXV0ZXhMb2NrU3RhdHMpIHtcclxuICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQgPSAwO1xyXG4gICAgbG9ja1N0YXRzLmxvY2tzTG9zdCA9IDA7XHJcbiAgICBsb2NrU3RhdHMuY29udGVudGlvbkNvdW50ID0gMDtcclxuICAgIGxvY2tTdGF0cy5hY3F1aXJlRHVyYXRpb24gPSAwO1xyXG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxNdXRleExvY2tTdGF0cz4sIHN0YXRzOiBNdXRleExvY2tTdGF0cykge1xyXG4gICAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICBzdGF0cy5hY3F1aXJlRW5kID0gY3VycmVudFRpbWU7XHJcbiAgICBzdGF0cy5hY3F1aXJlRHVyYXRpb24gPSBzdGF0cy5hY3F1aXJlRW5kIC0gc3RhdHMuYWNxdWlyZVN0YXJ0O1xyXG4gICAgc3RhdHMubG9ja1N0YXJ0ID0gY3VycmVudFRpbWU7XHJcbiAgICBzdWJzY3JpYmVyLm5leHQoc3RhdHMpO1xyXG4gICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHdyYXAgYWxsIHZhbHVlcyBpbiBhbiBvYmplY3QgdGhhdCBpbmNsdWRlcyB0aGUgdGltZSAoc29cclxuICAgKiB0aGF0IHdlIGNhbiBleHBpcmUgaXQgaW4gdGhlIGZ1dHVyZSkgYW5kIGpzb24uc3RyaW5naWZ5J3MgaXRcclxuICAgKi9cclxuICBwcml2YXRlIF9zZXRJdGVtKGtleSwgY2xpZW50SWQsIHRpbWVvdXQpIHtcclxuICAgIGxldCBsb2NrSXRlbSA9IG5ldyBMb2NrSXRlbSgpO1xyXG4gICAgbG9ja0l0ZW0uY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgIGxvY2tJdGVtLmV4cGlyZXNBdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdGltZW91dDtcclxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KGxvY2tJdGVtKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgSlNPTiBlbmNvZGVkIHZhbHVlcyBzZXQgaW4gbG9jYWxTdG9yYWdlXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfZ2V0SXRlbShrZXksIHRpbWVvdXQpIHtcclxuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xyXG4gICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbG9ja0l0ZW0uZXhwaXJlc0F0ID49IHRpbWVvdXQpIHtcclxuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbG9ja0l0ZW0uY2xpZW50SWQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9yZWxlYXNlRXhwaXJlZExvY2soa2V5OiBzdHJpbmcpe1xyXG4gICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG5cclxuICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdmFyIGxvY2tJdGVtID0gPExvY2tJdGVtPkpTT04ucGFyc2UoaXRlbSk7XHJcblxyXG4gICAgaWYgKGxvY2tJdGVtLmV4cGlyZXNBdCA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xyXG4gICAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBhdXRvIHJlbW92ZWQgYW4gZXhwaXJlZCByZWNvcmQgb24gXCIlc1wiJywga2V5KTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19","originalSourcemap":{"version":3,"file":"mutex-fast-lock.service.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.service.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[15,0,0,15],[17,0,0,17],[27,0,0,27],[29,0,0,29],[35,0,0,35],[50,0,0,50],[51,0,0,51]],[[0,0,1,0],[7,0,1,7],[9,0,1,9],[31,0,1,31],[33,0,1,33],[39,0,1,39],[74,0,1,74],[75,0,1,75]],[[0,0,3,0],[7,0,3,7],[9,0,3,9],[23,0,3,23],[25,0,3,25],[31,0,3,31],[58,0,3,58],[59,0,3,59]],[[0,0,4,0],[7,0,4,7],[9,0,4,9],[19,0,4,19],[21,0,4,33],[27,0,4,39],[33,0,4,45],[34,0,4,46]],[[0,0,5,0],[7,0,5,7],[9,0,5,9],[17,0,5,17],[19,0,5,19],[25,0,5,25],[45,0,5,45],[46,0,5,46]],[],[],[[0,0,10,0],[6,0,10,6],[13,0,10,13],[33,0,10,33]],[[4,0,17,53]],[[4,0,12,10],[13,0,12,19],[14,0,12,28]],[[4,0,13,10],[12,0,13,18],[13,0,13,27]],[[4,0,14,10],[12,0,14,18],[13,0,14,27]],[[4,0,16,2],[16,0,17,53],[23,0,17,81]],[[8,0,17,53],[20,0,17,60],[23,0,17,53],[30,0,17,60],[31,0,17,81]],[[8,0,19,4],[12,0,19,8],[13,0,19,9],[22,0,19,18],[25,0,19,21],[29,0,19,25],[30,0,19,26],[47,0,19,43],[49,0,19,45],[50,0,19,46]],[[8,0,20,4],[12,0,20,8],[13,0,20,9],[21,0,20,17],[24,0,20,20],[31,0,20,27],[32,0,20,28],[42,0,20,38],[45,0,20,41],[50,0,20,46],[51,0,20,47]],[[8,0,21,4],[12,0,21,8],[13,0,21,9],[21,0,21,17],[24,0,21,20],[31,0,21,27],[32,0,21,28],[42,0,21,38],[45,0,21,41],[50,0,21,46],[51,0,21,47]],[[8,0,23,4],[12,0,23,8],[16,0,23,12],[19,0,23,15],[23,0,23,19],[24,0,23,20]],[[8,0,24,4],[14,0,24,10],[15,0,24,11],[31,0,24,27],[32,0,24,28],[46,0,24,42],[48,0,24,44],[58,0,24,54],[60,0,24,56]],[[12,0,25,6],[16,0,25,10],[19,0,25,13],[22,0,25,16],[24,0,25,18],[25,0,25,19]],[[12,0,27,6],[17,0,27,11],[21,0,27,15],[22,0,27,16],[25,0,27,19],[26,0,27,20],[28,0,27,22],[29,0,27,23],[32,0,27,26],[44,0,27,38],[45,0,27,39],[51,0,27,45],[53,0,27,47],[54,0,27,48],[56,0,27,50],[58,0,27,52],[59,0,27,53]],[[16,0,28,8],[20,0,28,12],[32,0,28,24],[33,0,28,25],[36,0,28,28],[37,0,28,29],[38,0,28,30],[39,0,28,31],[40,0,28,32],[47,0,28,39],[48,0,28,40],[52,0,28,44],[53,0,28,45],[61,0,28,53],[62,0,28,54],[66,0,28,58],[67,0,28,59]],[[23,0,29,13],[35,0,29,25],[36,0,29,26],[39,0,29,29],[40,0,29,30],[41,0,29,31],[42,0,29,32],[43,0,29,33],[50,0,29,40],[51,0,29,41],[55,0,29,45],[56,0,29,46],[64,0,29,54],[65,0,29,55],[69,0,29,59],[70,0,29,60],[72,0,29,62],[73,0,29,63]],[[20,0,30,10],[23,0,30,13],[24,0,30,14],[28,0,30,18],[29,0,30,19],[41,0,30,31],[42,0,30,32],[45,0,30,35],[46,0,30,36],[47,0,30,37],[48,0,30,38],[49,0,30,39],[50,0,30,40]],[[16,0,31,8],[17,0,31,9]],[[12,0,32,6],[13,0,32,7]],[[12,0,34,6],[17,0,34,11],[21,0,34,15],[22,0,34,16],[25,0,34,19],[26,0,34,20],[28,0,34,22],[29,0,34,23],[32,0,34,26],[35,0,34,29],[36,0,34,30],[42,0,34,36],[44,0,34,38],[45,0,34,39],[47,0,34,41],[49,0,34,43],[50,0,34,44]],[[16,0,35,8],[28,0,35,20],[29,0,35,21],[39,0,35,31],[40,0,35,32],[43,0,35,35],[44,0,35,36],[45,0,35,37],[46,0,35,38],[47,0,35,39],[48,0,35,40]],[[12,0,36,6],[13,0,36,7]],[[8,0,37,4],[9,0,37,5],[10,0,37,6],[11,0,37,7]],[[4,0,38,2],[5,0,38,3]],[[4,0,40,9],[8,0,40,13],[9,0,40,14],[12,0,40,25],[14,0,40,27],[24,0,40,45],[25,0,40,46],[26,0,40,47]],[[8,0,41,4],[12,0,41,8],[16,0,41,12],[19,0,41,15],[23,0,41,19],[24,0,41,20]],[[8,0,43,4],[12,0,43,8],[19,0,43,15],[23,0,43,19],[24,0,43,20],[25,0,43,21]],[[12,0,43,23],[19,0,43,30],[22,0,43,33],[26,0,43,37],[27,0,43,38],[34,0,43,45],[35,0,43,46],[42,0,43,53],[43,0,43,54]],[[8,0,45,4],[12,0,45,8],[17,0,45,13],[20,0,45,16],[24,0,45,20],[25,0,45,21],[33,0,45,29],[36,0,45,32],[39,0,45,35],[40,0,45,36]],[[8,0,46,4],[12,0,46,8],[17,0,46,13],[20,0,46,16],[24,0,46,20],[25,0,46,21],[33,0,46,29],[36,0,46,32],[39,0,46,35],[40,0,46,36]],[[8,0,48,4],[12,0,48,8],[21,0,48,17],[24,0,48,36],[28,0,48,40],[42,0,48,54],[44,0,48,56],[45,0,48,57]],[[8,0,50,4],[12,0,50,8],[13,0,50,9],[23,0,50,19],[24,0,50,20],[33,0,50,29],[34,0,50,30],[35,0,50,31]],[[8,0,52,4],[12,0,52,8],[13,0,52,9],[20,0,52,16],[21,0,52,17],[33,0,52,29],[37,0,52,33],[44,0,52,40],[45,0,52,41],[50,0,52,46],[51,0,52,47],[117,0,52,113],[119,0,52,115],[122,0,52,118],[124,0,52,120],[128,0,52,124],[129,0,52,125],[138,0,52,134],[139,0,52,135],[140,0,52,136]],[[8,0,54,4],[17,0,54,13],[18,0,54,14],[30,0,54,26],[33,0,54,29],[37,0,54,33],[41,0,54,37],[43,0,54,39],[44,0,54,40],[51,0,54,47],[53,0,54,49],[54,0,54,50]],[[8,0,56,4],[57,0,56,53]],[[8,0,57,4],[15,0,57,11],[19,0,57,15],[29,0,57,25],[30,0,57,42],[40,0,57,52],[41,0,57,53],[43,0,57,55]],[[12,0,58,6],[84,0,58,78]],[[12,0,59,6],[86,0,59,80]],[[12,0,60,6],[86,0,60,80]],[[12,0,61,6],[68,0,61,62]],[[12,0,62,6],[16,0,62,10],[27,0,62,21],[30,0,62,24],[39,0,62,33],[50,0,62,44],[51,0,62,45],[54,0,62,48]],[[16,0,64,8],[20,0,64,12],[21,0,64,13],[40,0,64,32],[41,0,64,33],[46,0,64,38],[47,0,64,39],[48,0,64,40]],[[16,0,65,8],[20,0,65,12],[21,0,65,13],[40,0,65,32],[41,0,65,33],[46,0,65,38],[47,0,65,39],[48,0,65,40]],[[16,0,67,8],[20,0,67,12],[31,0,67,23],[34,0,67,26],[38,0,67,30],[42,0,67,34],[44,0,67,36],[45,0,67,37],[52,0,67,44],[54,0,67,46],[57,0,67,49],[66,0,67,58],[67,0,67,59],[79,0,67,71],[80,0,67,72]],[[16,0,68,8],[20,0,68,12],[31,0,68,23],[35,0,68,27],[42,0,68,34],[44,0,68,36],[45,0,68,37]],[[20,0,69,10],[24,0,69,14],[25,0,69,15],[32,0,69,22],[33,0,69,23],[45,0,69,35],[49,0,69,39],[56,0,69,46],[57,0,69,47],[62,0,69,52],[63,0,69,53],[136,0,69,126],[138,0,69,128],[141,0,69,131],[143,0,69,133],[150,0,69,140],[152,0,69,142],[156,0,69,146],[157,0,69,147],[166,0,69,156],[167,0,69,157],[168,0,69,158]],[[20,0,70,10],[30,0,70,20],[31,0,70,21],[36,0,70,26],[37,0,70,27],[41,0,70,31],[46,0,70,36],[47,0,70,37],[83,0,70,73],[86,0,70,76],[93,0,70,83],[96,0,70,86],[100,0,70,90],[101,0,70,91],[102,0,70,92],[103,0,70,93]],[[16,0,71,8],[17,0,71,9]],[[16,0,73,8],[20,0,73,12],[21,0,73,13],[29,0,73,21],[30,0,73,22],[35,0,73,27],[37,0,73,29],[41,0,73,33],[42,0,73,34],[51,0,73,43],[53,0,73,45],[60,0,73,52],[61,0,73,53],[62,0,73,54]],[[16,0,75,8],[83,0,75,75]],[[16,0,76,8],[20,0,76,12],[23,0,76,15],[26,0,76,18],[30,0,76,22],[31,0,76,23],[39,0,76,31],[40,0,76,32],[45,0,76,37],[47,0,76,39],[54,0,76,46],[55,0,76,47],[56,0,76,48]],[[16,0,77,8],[20,0,77,12],[23,0,77,15],[25,0,77,17],[26,0,77,18]],[[20,0,78,10],[24,0,78,14],[25,0,78,15],[32,0,78,22],[33,0,78,23],[45,0,78,35],[49,0,78,39],[56,0,78,46],[57,0,78,47],[62,0,78,52],[63,0,78,53],[101,0,78,91],[103,0,78,93],[106,0,78,96],[107,0,78,97],[108,0,78,98]],[[20,0,79,10],[29,0,79,19],[30,0,79,20],[42,0,79,32],[44,0,79,34],[45,0,79,35]],[[20,0,80,10],[30,0,80,20],[31,0,80,21]],[[24,0,81,12],[31,0,81,19],[42,0,81,30],[43,0,81,31],[46,0,81,34],[47,0,81,35],[48,0,81,36]],[[20,0,82,10],[21,0,82,11],[23,0,82,13],[25,0,82,15],[26,0,82,16],[27,0,82,17]],[[20,0,83,10],[27,0,83,17]],[[16,0,84,8],[17,0,84,9]],[[16,0,86,8],[37,0,86,29]],[[16,0,87,8],[20,0,87,12],[21,0,87,13],[29,0,87,21],[30,0,87,22],[35,0,87,27],[37,0,87,29],[41,0,87,33],[42,0,87,34],[51,0,87,43],[53,0,87,45],[60,0,87,52],[61,0,87,53],[62,0,87,54]],[[16,0,89,8],[83,0,89,75]],[[16,0,90,8],[20,0,90,12],[23,0,90,15],[26,0,90,18],[30,0,90,22],[31,0,90,23],[39,0,90,31],[40,0,90,32],[45,0,90,37],[47,0,90,39],[54,0,90,46],[55,0,90,47],[56,0,90,48]],[[16,0,91,8],[20,0,91,12],[23,0,91,15],[28,0,91,20],[32,0,91,24],[33,0,91,25],[42,0,91,34],[44,0,91,36],[45,0,91,37]],[[20,0,92,10],[29,0,92,19],[30,0,92,20],[45,0,92,35],[47,0,92,37],[48,0,92,38]],[[20,0,93,10],[24,0,93,14],[25,0,93,15],[32,0,93,22],[33,0,93,23],[45,0,93,35],[49,0,93,39],[56,0,93,46],[57,0,93,47],[62,0,93,52],[63,0,93,53],[97,0,93,87],[99,0,93,89],[102,0,93,92],[103,0,93,93],[104,0,93,94]],[[20,0,95,10],[61,0,95,51]],[[20,0,96,10],[30,0,96,20],[31,0,96,21]],[[24,0,97,12],[27,0,97,15],[30,0,97,18],[34,0,97,22],[35,0,97,23],[43,0,97,31],[44,0,97,32],[49,0,97,37],[51,0,97,39],[58,0,97,46],[59,0,97,47],[60,0,97,48]],[[24,0,98,12],[28,0,98,16],[31,0,98,19],[36,0,98,24],[40,0,98,28],[41,0,98,29],[50,0,98,38],[52,0,98,40],[53,0,98,41]],[[28,0,99,14],[45,0,99,31]],[[28,0,100,14],[32,0,100,18],[33,0,100,19],[40,0,100,26],[41,0,100,27],[53,0,100,39],[57,0,100,43],[64,0,100,50],[65,0,100,51],[70,0,100,56],[71,0,100,57],[126,0,100,112],[128,0,100,114],[132,0,100,118],[133,0,100,119],[142,0,100,128],[144,0,100,130],[147,0,100,133],[148,0,100,134],[149,0,100,135]],[[28,0,101,14],[32,0,101,18],[33,0,101,19],[49,0,101,35],[50,0,101,36],[60,0,101,46],[62,0,101,48],[71,0,101,57],[72,0,101,58],[73,0,101,59]],[[24,0,102,12],[25,0,102,13]],[[29,0,102,19],[30,0,102,20]],[[28,0,103,14],[74,0,103,60]],[[28,0,104,14],[37,0,104,23],[38,0,104,24],[50,0,104,36],[52,0,104,38],[53,0,104,39]],[[28,0,105,14],[37,0,105,23],[38,0,105,24],[47,0,105,33],[49,0,105,35],[50,0,105,36]],[[28,0,106,14],[32,0,106,18],[33,0,106,19],[40,0,106,26],[41,0,106,27],[53,0,106,39],[57,0,106,43],[64,0,106,50],[65,0,106,51],[70,0,106,56],[71,0,106,57],[166,0,106,152],[168,0,106,154],[172,0,106,158],[173,0,106,159],[182,0,106,168],[184,0,106,170],[187,0,106,173],[189,0,106,175],[192,0,106,178],[193,0,106,179],[194,0,106,180]],[[28,0,107,14],[38,0,107,24],[39,0,107,25]],[[32,0,108,16],[39,0,108,23],[50,0,108,34],[51,0,108,35],[54,0,108,38],[55,0,108,39],[56,0,108,40]],[[28,0,109,14],[29,0,109,15],[31,0,109,17],[33,0,109,19],[34,0,109,20],[35,0,109,21]],[[24,0,110,12],[25,0,110,13]],[[20,0,111,10],[21,0,111,11],[23,0,111,13],[26,0,111,16],[27,0,111,17],[28,0,111,18]],[[20,0,113,10],[27,0,113,17]],[[16,0,114,8],[17,0,114,9]],[[16,0,116,8],[33,0,116,25]],[[16,0,117,8],[20,0,117,12],[21,0,117,13],[28,0,117,20],[29,0,117,21],[41,0,117,33],[45,0,117,37],[52,0,117,44],[53,0,117,45],[58,0,117,50],[59,0,117,51],[125,0,117,117],[127,0,117,119],[131,0,117,123],[132,0,117,124],[141,0,117,133],[143,0,117,135],[146,0,117,138],[147,0,117,139],[148,0,117,140]],[[16,0,118,8],[20,0,118,12],[21,0,118,13],[37,0,118,29],[38,0,118,30],[48,0,118,40],[50,0,118,42],[59,0,118,51],[60,0,118,52],[61,0,118,53]],[[12,0,119,6],[13,0,119,7],[14,0,119,8]],[[12,0,121,6],[23,0,121,17],[24,0,121,18],[27,0,121,21],[28,0,121,22],[29,0,121,23]],[[8,0,123,4],[9,0,123,5],[10,0,123,6],[11,0,123,7]],[[4,0,124,2],[5,0,124,3]],[[4,0,126,9],[11,0,126,16],[12,0,126,17],[15,0,126,20]],[[8,0,127,4],[12,0,127,8],[13,0,127,9],[20,0,127,16],[21,0,127,17],[33,0,127,29],[37,0,127,33],[44,0,127,40],[45,0,127,41],[50,0,127,46],[51,0,127,47],[100,0,127,96],[102,0,127,98],[106,0,127,102],[107,0,127,103],[116,0,127,112],[118,0,127,114],[121,0,127,117],[122,0,127,118],[123,0,127,119]],[[8,0,129,4],[12,0,129,8],[13,0,129,9],[16,0,129,12],[20,0,129,16],[21,0,129,17],[29,0,129,25],[32,0,129,28],[35,0,129,31],[36,0,129,32]],[[8,0,130,4],[12,0,130,8],[13,0,130,9],[16,0,130,12],[20,0,130,16],[21,0,130,17],[29,0,130,25],[32,0,130,28],[35,0,130,31],[36,0,130,32]],[[8,0,131,4],[20,0,131,16],[21,0,131,17],[31,0,131,27],[32,0,131,28],[33,0,131,29],[34,0,131,30],[35,0,131,31]],[[8,0,132,4],[20,0,132,16],[21,0,132,17],[31,0,132,27],[32,0,132,28],[33,0,132,29],[34,0,132,30],[35,0,132,31]],[[8,0,134,4],[56,0,134,52]],[[8,0,135,4],[90,0,135,86]],[[8,0,137,4],[54,0,137,50]],[[8,0,139,4],[28,0,139,24]],[[8,0,141,4],[26,0,141,22]],[[4,0,142,2],[5,0,142,3]],[[4,0,144,10],[21,0,144,27]],[[8,0,145,4],[15,0,145,11],[19,0,145,15],[20,0,145,16],[25,0,145,21],[26,0,145,22],[30,0,145,26],[31,0,145,27],[37,0,145,33],[39,0,145,35],[42,0,145,38],[53,0,145,49],[54,0,145,50],[57,0,145,53],[59,0,145,55],[60,0,145,56]],[[4,0,146,2],[5,0,146,3]],[[4,0,148,10],[14,0,148,20],[15,0,148,21],[24,0,148,46]],[[8,0,149,4],[17,0,149,13],[18,0,149,14],[30,0,149,26],[33,0,149,29],[34,0,149,30],[35,0,149,31]],[[8,0,150,4],[17,0,150,13],[18,0,150,14],[27,0,150,23],[30,0,150,26],[31,0,150,27],[32,0,150,28]],[[8,0,151,4],[17,0,151,13],[18,0,151,14],[33,0,151,29],[36,0,151,32],[37,0,151,33],[38,0,151,34]],[[8,0,152,4],[17,0,152,13],[18,0,152,14],[33,0,152,29],[36,0,152,32],[37,0,152,33],[38,0,152,34]],[[8,0,153,4],[17,0,153,13],[18,0,153,14],[30,0,153,26],[33,0,153,29],[37,0,153,33],[38,0,153,34]],[[4,0,154,2],[5,0,154,3]],[[4,0,156,10],[20,0,156,26],[21,0,156,27],[31,0,156,65],[33,0,156,67],[38,0,156,88]],[[8,0,157,4],[12,0,157,8],[23,0,157,19],[26,0,157,22],[30,0,157,26],[34,0,157,30],[36,0,157,32],[37,0,157,33],[44,0,157,40],[46,0,157,42],[47,0,157,43]],[[8,0,158,4],[13,0,158,9],[14,0,158,10],[24,0,158,20],[27,0,158,23],[38,0,158,34],[39,0,158,35]],[[8,0,159,4],[13,0,159,9],[14,0,159,10],[29,0,159,25],[32,0,159,28],[37,0,159,33],[38,0,159,34],[48,0,159,44],[51,0,159,47],[56,0,159,52],[57,0,159,53],[69,0,159,65],[70,0,159,66]],[[8,0,160,4],[13,0,160,9],[14,0,160,10],[23,0,160,19],[26,0,160,22],[37,0,160,33],[38,0,160,34]],[[8,0,161,4],[18,0,161,14],[19,0,161,15],[23,0,161,19],[24,0,161,20],[29,0,161,25],[30,0,161,26],[31,0,161,27]],[[8,0,162,4],[18,0,162,14],[19,0,162,15],[27,0,162,23],[29,0,162,25],[30,0,162,26]],[[4,0,163,2],[5,0,163,3]],[[4,0,165,2]],[],[],[[7,0,168,5]],[[4,0,169,10],[12,0,169,18],[13,0,169,19],[16,0,169,22],[18,0,169,24],[26,0,169,32],[28,0,169,34],[35,0,169,41]],[[8,0,170,4],[12,0,170,8],[20,0,170,16],[23,0,170,19],[27,0,170,23],[35,0,170,31],[37,0,170,33],[38,0,170,34]],[[8,0,171,4],[16,0,171,12],[17,0,171,13],[25,0,171,21],[28,0,171,24],[36,0,171,32],[37,0,171,33]],[[8,0,172,4],[16,0,172,12],[17,0,172,13],[26,0,172,22],[29,0,172,25],[33,0,172,29],[37,0,172,33],[39,0,172,35],[40,0,172,36],[47,0,172,43],[49,0,172,45],[52,0,172,48],[59,0,172,55],[60,0,172,56]],[[8,0,173,4],[15,0,173,11],[27,0,173,23],[28,0,173,24],[35,0,173,31],[36,0,173,32],[39,0,173,35],[41,0,173,37],[45,0,173,41],[46,0,173,42],[55,0,173,51],[56,0,173,52],[64,0,173,60],[65,0,173,61],[66,0,173,62],[67,0,173,63]],[[4,0,174,2],[5,0,174,3]],[[4,0,176,2]],[],[[7,0,178,5]],[[4,0,179,10],[12,0,179,18],[13,0,179,19],[16,0,179,22],[18,0,179,24],[25,0,179,31]],[[8,0,180,4],[12,0,180,8],[16,0,180,12],[19,0,180,15],[31,0,180,27],[32,0,180,28],[39,0,180,35],[40,0,180,36],[43,0,180,39],[44,0,180,40],[45,0,180,41]],[[8,0,182,4],[12,0,182,8],[13,0,182,9],[17,0,182,13]],[[12,0,182,15],[19,0,182,22],[23,0,182,26],[24,0,182,27]],[[8,0,184,4],[12,0,184,8],[20,0,184,16],[23,0,184,29],[27,0,184,33],[28,0,184,34],[33,0,184,39],[34,0,184,40],[38,0,184,44],[39,0,184,45],[40,0,184,46]],[[8,0,185,4],[12,0,185,8],[16,0,185,12],[20,0,185,16],[22,0,185,18],[23,0,185,19],[30,0,185,26],[32,0,185,28],[35,0,185,31],[43,0,185,39],[44,0,185,40],[53,0,185,49],[57,0,185,53],[64,0,185,60],[66,0,185,62],[67,0,185,63]],[[12,0,186,6],[16,0,186,10],[17,0,186,11],[24,0,186,18],[25,0,186,19],[37,0,186,31],[41,0,186,35],[48,0,186,42],[49,0,186,43],[54,0,186,48],[55,0,186,49],[112,0,186,106],[114,0,186,108],[118,0,186,112],[119,0,186,113],[128,0,186,122],[130,0,186,124],[133,0,186,127],[134,0,186,128],[135,0,186,129]],[[12,0,187,6],[24,0,187,18],[25,0,187,19],[35,0,187,29],[36,0,187,30],[39,0,187,33],[40,0,187,34],[41,0,187,35]],[[12,0,188,6],[19,0,188,13],[23,0,188,17],[24,0,188,18]],[[8,0,189,4],[9,0,189,5]],[[8,0,191,4],[15,0,191,11],[23,0,191,19],[24,0,191,20],[32,0,191,28],[33,0,191,29]],[[4,0,192,2],[5,0,192,3]],[[4,0,194,10],[23,0,194,29],[24,0,194,30],[27,0,194,41]],[[8,0,195,4],[12,0,195,8],[16,0,195,12],[19,0,195,15],[31,0,195,27],[32,0,195,28],[39,0,195,35],[40,0,195,36],[43,0,195,39],[44,0,195,40],[45,0,195,41]],[[8,0,197,4],[12,0,197,8],[13,0,197,9],[17,0,197,13]],[[12,0,197,15],[19,0,197,22],[23,0,197,26],[24,0,197,27]],[[8,0,199,4],[12,0,199,8],[20,0,199,16],[23,0,199,29],[27,0,199,33],[28,0,199,34],[33,0,199,39],[34,0,199,40],[38,0,199,44],[39,0,199,45],[40,0,199,46]],[[8,0,201,4],[12,0,201,8],[20,0,201,16],[21,0,201,17],[30,0,201,26],[34,0,201,30],[38,0,201,34],[42,0,201,38],[44,0,201,40],[45,0,201,41],[52,0,201,48],[54,0,201,50],[56,0,201,52],[57,0,201,53]],[[12,0,202,6],[16,0,202,10],[17,0,202,11],[24,0,202,18],[25,0,202,19],[37,0,202,31],[41,0,202,35],[48,0,202,42],[49,0,202,43],[54,0,202,48],[55,0,202,49],[105,0,202,99],[107,0,202,101],[110,0,202,104],[111,0,202,105],[112,0,202,106]],[[12,0,203,6],[24,0,203,18],[25,0,203,19],[35,0,203,29],[36,0,203,30],[39,0,203,33],[40,0,203,34],[41,0,203,35]],[[8,0,204,4],[9,0,204,5]],[[4,0,205,2],[5,0,205,3]],[[103,0,10,13],[123,0,10,33],[141,0,17,12],[163,0,17,34]],[[107,0,10,13],[127,0,10,33],[141,0,8,14],[147,0,8,20]],[],[[91,0,10,13],[111,0,10,33]],[[18,0,7,1],[28,0,7,11]],[[19,0,7,12]],[[20,0,8,2],[30,0,8,12],[32,0,8,14],[38,0,8,20]],[[17,0,9,1]],[],[[26,0,17,5],[32,0,17,11]],[[27,0,17,12],[49,0,17,34]]],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\r\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\r\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\r\nimport { MutexLockStats } from './models/mutex-lock-stats';\r\nimport { Observable, Subscriber } from 'rxjs';\r\nimport { LockItem } from './models/lock-item';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MutexFastLockService {\r\n\r\n  private _clientId: string;\r\n  private _xPrefix: string;\r\n  private _yPrefix: string;\r\n\r\n  constructor(\r\n    @Inject(MUTEX_FAST_LOCK_CONFIG) private readonly _config: MutexFastLockConfig,\r\n  ) {\r\n    this._clientId = this._generateRandomId();\r\n    this._xPrefix = _config.lockPrefix + '_X_';\r\n    this._yPrefix = _config.lockPrefix + '_Y_';\r\n\r\n    let that = this;\r\n    window.addEventListener(\"beforeunload\", function (ev) {\r\n      var arr = [];\r\n\r\n      for (var i = 0; i < localStorage.length; i++) {\r\n        if (localStorage.key(i).indexOf(that._xPrefix) == 0\r\n          || localStorage.key(i).indexOf(that._yPrefix) == 0) {\r\n          arr.push(localStorage.key(i));\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < arr.length; i++) {\r\n        localStorage.removeItem(arr[i]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public lock(key: string, timeout: number = -1) {\r\n    let that = this;\r\n\r\n    if (timeout == -1) timeout = this._config.timeout;\r\n\r\n    let xLock = that._xPrefix + key;\r\n    let yLock = that._yPrefix + key;\r\n\r\n    let lockStats: MutexLockStats = new MutexLockStats();\r\n\r\n    that.resetStats(lockStats);\r\n\r\n    this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\r\n\r\n    lockStats.acquireStart = new Date().getTime();\r\n\r\n    //return new Promise(function (resolve, reject) {\r\n    return new Observable<MutexLockStats>(subscriber => {\r\n      // we need to differentiate between API calls to lock() and our internal\r\n      // recursive calls so that we can timeout based on the original lock() and\r\n      // not each subsequent call.  Therefore, create a new function here within\r\n      // the promise closure that we use for subsequent calls:\r\n      let acquireLock = function acquireLock(key) {\r\n\r\n        that._releaseExpiredLock(xLock);\r\n        that._releaseExpiredLock(yLock);\r\n\r\n        var elapsedTime = new Date().getTime() - lockStats.acquireStart;\r\n        if (elapsedTime >= timeout) {\r\n          that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\r\n          subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\r\n        }\r\n\r\n        that._setItem(xLock, that._clientId, timeout);\r\n\r\n        // if y exists, another client is getting a lock, so retry in a bit\r\n        var lsY = that._getItem(yLock, timeout);\r\n        if (lsY) {\r\n          that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\r\n          lockStats.restartCount++;\r\n          setTimeout(function () {\r\n            return acquireLock(key);\r\n          }, 10);\r\n          return;\r\n        }\r\n\r\n        // ask for inner lock\r\n        that._setItem(yLock, that._clientId, timeout);\r\n\r\n        // if x was changed, another client is contending for an inner lock\r\n        var lsX = that._getItem(xLock, timeout);\r\n        if (lsX !== that._clientId) {\r\n          lockStats.contentionCount++;\r\n          that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\r\n\r\n          // Give enough time for critical section:\r\n          setTimeout(function () {\r\n            lsY = that._getItem(yLock, timeout);\r\n            if (lsY === that._clientId) {\r\n              // we have a lock\r\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\r\n              that.resolveWithStats(subscriber, lockStats);\r\n            } else {\r\n              // we lost the lock, restart the process again\r\n              lockStats.restartCount++;\r\n              lockStats.locksLost++;\r\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\r\n              setTimeout(function () {\r\n                return acquireLock(key);\r\n              }, 10);\r\n            }\r\n          }, 100);\r\n\r\n          return;\r\n        }\r\n\r\n        // no contention:\r\n        that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\r\n        that.resolveWithStats(subscriber, lockStats);\r\n      };\r\n\r\n      acquireLock(key);\r\n\r\n    });\r\n  }\r\n\r\n  public release(key) {\r\n    this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\r\n\r\n    let x = this._xPrefix + key;\r\n    let y = this._yPrefix + key;\r\n    localStorage.removeItem(x);\r\n    localStorage.removeItem(y);\r\n\r\n    //that.lockStats.lockEnd = new Date().getTime();\r\n    //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\r\n\r\n    //let retStats = angular.copy(that.lockStats);\r\n\r\n    //that.resetStats();\r\n\r\n    //return retStats;\r\n  }\r\n\r\n  private _generateRandomId() {\r\n    return Math.floor(Math.random() * 10000000000) + '';\r\n  }\r\n\r\n  private resetStats(lockStats: MutexLockStats) {\r\n    lockStats.restartCount = 0;\r\n    lockStats.locksLost = 0;\r\n    lockStats.contentionCount = 0;\r\n    lockStats.acquireDuration = 0;\r\n    lockStats.acquireStart = null;\r\n  }\r\n\r\n  private resolveWithStats(subscriber: Subscriber<MutexLockStats>, stats: MutexLockStats) {\r\n    var currentTime = new Date().getTime();\r\n    stats.acquireEnd = currentTime;\r\n    stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\r\n    stats.lockStart = currentTime;\r\n    subscriber.next(stats);\r\n    subscriber.complete();\r\n  }\r\n\r\n  /**\r\n   * Helper function to wrap all values in an object that includes the time (so\r\n   * that we can expire it in the future) and json.stringify's it\r\n   */\r\n  private _setItem(key, clientId, timeout) {\r\n    let lockItem = new LockItem();\r\n    lockItem.clientId = clientId;\r\n    lockItem.expiresAt = new Date().getTime() + timeout;\r\n    return localStorage.setItem(key, JSON.stringify(lockItem));\r\n  }\r\n\r\n  /**\r\n   * Helper function to parse JSON encoded values set in localStorage\r\n   */\r\n  private _getItem(key, timeout) {\r\n    var item = localStorage.getItem(key);\r\n\r\n    if (!item) return null;\r\n\r\n    var lockItem = <LockItem>JSON.parse(item);\r\n    if (new Date().getTime() - lockItem.expiresAt >= timeout) {\r\n      this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\r\n      localStorage.removeItem(key);\r\n      return null;\r\n    }\r\n\r\n    return lockItem.clientId;\r\n  }\r\n\r\n  private _releaseExpiredLock(key: string){\r\n    var item = localStorage.getItem(key);\r\n\r\n    if (!item) return null;\r\n\r\n    var lockItem = <LockItem>JSON.parse(item);\r\n\r\n    if (lockItem.expiresAt <= new Date().getTime()) {\r\n      this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\r\n      localStorage.removeItem(key);\r\n    }\r\n  }\r\n}\r\n"]},"resolvedIds":{"@angular/core":{"attributes":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"rxjs":{"attributes":{},"external":true,"id":"rxjs","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./models/mutex-lock-stats":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/mutex-fast-lock-config":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/lock-item":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":2535,"body":[{"type":"ImportDeclaration","start":0,"end":41,"specifiers":[{"type":"ImportSpecifier","start":9,"end":17,"imported":{"type":"Identifier","start":9,"end":17,"name":"NgModule"},"local":{"type":"Identifier","start":9,"end":17,"name":"NgModule"}}],"source":{"type":"Literal","start":25,"end":40,"value":"@angular/core","raw":"\"@angular/core\""},"attributes":[]},{"type":"ImportDeclaration","start":42,"end":117,"specifiers":[{"type":"ImportSpecifier","start":51,"end":73,"imported":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":81,"end":116,"value":"./mutex-fast-lock-config.injector","raw":"\"./mutex-fast-lock-config.injector\""},"attributes":[]},{"type":"ImportDeclaration","start":118,"end":154,"specifiers":[{"type":"ImportNamespaceSpecifier","start":125,"end":132,"local":{"type":"Identifier","start":130,"end":132,"name":"i0"}}],"source":{"type":"Literal","start":138,"end":153,"value":"@angular/core","raw":"\"@angular/core\""},"attributes":[]},{"type":"ExportNamedDeclaration","start":155,"end":839,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":162,"end":839,"id":{"type":"Identifier","start":168,"end":187,"name":"MutexFastLockModule"},"superClass":null,"body":{"type":"ClassBody","start":188,"end":839,"body":[{"type":"MethodDefinition","start":194,"end":407,"static":true,"computed":false,"key":{"type":"Identifier","start":201,"end":208,"name":"forRoot"},"value":{"type":"FunctionExpression","start":208,"end":407,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":209,"end":215,"name":"config"}],"body":{"type":"BlockStatement","start":217,"end":407,"body":[{"type":"ReturnStatement","start":227,"end":401,"argument":{"type":"ObjectExpression","start":235,"end":399,"properties":[{"type":"Property","start":249,"end":278,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":249,"end":257,"name":"ngModule"},"value":{"type":"Identifier","start":259,"end":278,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":292,"end":389,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":292,"end":301,"name":"providers"},"value":{"type":"ArrayExpression","start":303,"end":389,"elements":[{"type":"ObjectExpression","start":321,"end":374,"properties":[{"type":"Property","start":323,"end":354,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":323,"end":330,"name":"provide"},"value":{"type":"Identifier","start":332,"end":354,"name":"MUTEX_FAST_LOCK_CONFIG"},"kind":"init"},{"type":"Property","start":356,"end":372,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":356,"end":364,"name":"useValue"},"value":{"type":"Identifier","start":366,"end":372,"name":"config"},"kind":"init"}]}]},"kind":"init"}]}}]},"expression":false},"kind":"method"},{"type":"PropertyDefinition","start":412,"end":581,"static":true,"computed":false,"key":{"type":"Identifier","start":419,"end":423,"name":"ɵfac"},"value":{"type":"CallExpression","start":426,"end":580,"optional":false,"callee":{"type":"MemberExpression","start":426,"end":447,"computed":false,"optional":false,"object":{"type":"Identifier","start":426,"end":428,"name":"i0"},"property":{"type":"Identifier","start":429,"end":447,"name":"ɵɵngDeclareFactory"}},"arguments":[{"type":"ObjectExpression","start":448,"end":579,"properties":[{"type":"Property","start":450,"end":470,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":450,"end":460,"name":"minVersion"},"value":{"type":"Literal","start":462,"end":470,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":472,"end":489,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":472,"end":479,"name":"version"},"value":{"type":"Literal","start":481,"end":489,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":491,"end":503,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":491,"end":499,"name":"ngImport"},"value":{"type":"Identifier","start":501,"end":503,"name":"i0"},"kind":"init"},{"type":"Property","start":505,"end":530,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":505,"end":509,"name":"type"},"value":{"type":"Identifier","start":511,"end":530,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":532,"end":540,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":532,"end":536,"name":"deps"},"value":{"type":"ArrayExpression","start":538,"end":540,"elements":[]},"kind":"init"},{"type":"Property","start":542,"end":577,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":542,"end":548,"name":"target"},"value":{"type":"MemberExpression","start":550,"end":577,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":550,"end":568,"computed":false,"optional":false,"object":{"type":"Identifier","start":550,"end":552,"name":"i0"},"property":{"type":"Identifier","start":553,"end":568,"name":"ɵɵFactoryTarget"}},"property":{"type":"Identifier","start":569,"end":577,"name":"NgModule"}},"kind":"init"}]}]}},{"type":"PropertyDefinition","start":586,"end":709,"static":true,"computed":false,"key":{"type":"Identifier","start":593,"end":597,"name":"ɵmod"},"value":{"type":"CallExpression","start":600,"end":708,"optional":false,"callee":{"type":"MemberExpression","start":600,"end":622,"computed":false,"optional":false,"object":{"type":"Identifier","start":600,"end":602,"name":"i0"},"property":{"type":"Identifier","start":603,"end":622,"name":"ɵɵngDeclareNgModule"}},"arguments":[{"type":"ObjectExpression","start":623,"end":707,"properties":[{"type":"Property","start":625,"end":645,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":625,"end":635,"name":"minVersion"},"value":{"type":"Literal","start":637,"end":645,"value":"14.0.0","raw":"\"14.0.0\""},"kind":"init"},{"type":"Property","start":647,"end":664,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":647,"end":654,"name":"version"},"value":{"type":"Literal","start":656,"end":664,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":666,"end":678,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":666,"end":674,"name":"ngImport"},"value":{"type":"Identifier","start":676,"end":678,"name":"i0"},"kind":"init"},{"type":"Property","start":680,"end":705,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":680,"end":684,"name":"type"},"value":{"type":"Identifier","start":686,"end":705,"name":"MutexFastLockModule"},"kind":"init"}]}]}},{"type":"PropertyDefinition","start":714,"end":837,"static":true,"computed":false,"key":{"type":"Identifier","start":721,"end":725,"name":"ɵinj"},"value":{"type":"CallExpression","start":728,"end":836,"optional":false,"callee":{"type":"MemberExpression","start":728,"end":750,"computed":false,"optional":false,"object":{"type":"Identifier","start":728,"end":730,"name":"i0"},"property":{"type":"Identifier","start":731,"end":750,"name":"ɵɵngDeclareInjector"}},"arguments":[{"type":"ObjectExpression","start":751,"end":835,"properties":[{"type":"Property","start":753,"end":773,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":753,"end":763,"name":"minVersion"},"value":{"type":"Literal","start":765,"end":773,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":775,"end":792,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":775,"end":782,"name":"version"},"value":{"type":"Literal","start":784,"end":792,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":794,"end":806,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":794,"end":802,"name":"ngImport"},"value":{"type":"Identifier","start":804,"end":806,"name":"i0"},"kind":"init"},{"type":"Property","start":808,"end":833,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":808,"end":812,"name":"type"},"value":{"type":"Identifier","start":814,"end":833,"name":"MutexFastLockModule"},"kind":"init"}]}]}}]}}},{"type":"ExpressionStatement","start":840,"end":1008,"expression":{"type":"CallExpression","start":840,"end":1007,"optional":false,"callee":{"type":"MemberExpression","start":840,"end":867,"computed":false,"optional":false,"object":{"type":"Identifier","start":840,"end":842,"name":"i0"},"property":{"type":"Identifier","start":843,"end":867,"name":"ɵɵngDeclareClassMetadata"}},"arguments":[{"type":"ObjectExpression","start":868,"end":1006,"properties":[{"type":"Property","start":870,"end":890,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":870,"end":880,"name":"minVersion"},"value":{"type":"Literal","start":882,"end":890,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":892,"end":909,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":892,"end":899,"name":"version"},"value":{"type":"Literal","start":901,"end":909,"value":"17.3.7","raw":"\"17.3.7\""},"kind":"init"},{"type":"Property","start":911,"end":923,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":911,"end":919,"name":"ngImport"},"value":{"type":"Identifier","start":921,"end":923,"name":"i0"},"kind":"init"},{"type":"Property","start":925,"end":950,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":925,"end":929,"name":"type"},"value":{"type":"Identifier","start":931,"end":950,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":952,"end":1004,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":952,"end":962,"name":"decorators"},"value":{"type":"ArrayExpression","start":964,"end":1004,"elements":[{"type":"ObjectExpression","start":965,"end":1003,"properties":[{"type":"Property","start":979,"end":993,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":979,"end":983,"name":"type"},"value":{"type":"Identifier","start":985,"end":993,"name":"NgModule"},"kind":"init"}]}]},"kind":"init"}]}]}}],"_rollupRemoved":[{"end":2535,"start":1009,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nexport class MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule, decorators: [{\n            type: NgModule\n        }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRzNFLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUEyQjtRQUV4QyxPQUFPLENBQUM7WUFDTixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLFNBQVMsRUFBRTtnQkFDVCxFQUFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO2FBQ3REO1NBQ0YsQ0FBQyxDQUFDO0lBRUwsQ0FBQzt1R0FWVSxtQkFBbUI7d0dBQW5CLG1CQUFtQjt3R0FBbkIsbUJBQW1COzsyRkFBbkIsbUJBQW1CO2tCQUQvQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSBcIi4vbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWdcIjtcclxuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gXCIuL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3JcIjtcclxuXHJcbkBOZ01vZHVsZSgpXHJcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrTW9kdWxlIHtcclxuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IE11dGV4RmFzdExvY2tDb25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJzPE11dGV4RmFzdExvY2tNb2R1bGU+IHtcclxuXHJcbiAgICByZXR1cm4gKHtcclxuICAgICAgbmdNb2R1bGU6IE11dGV4RmFzdExvY2tNb2R1bGUsXHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHsgcHJvdmlkZTogTVVURVhfRkFTVF9MT0NLX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxyXG4gICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs"],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nexport class MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.3.7\", ngImport: i0, type: MutexFastLockModule, decorators: [{\n            type: NgModule\n        }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRzNFLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUEyQjtRQUV4QyxPQUFPLENBQUM7WUFDTixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLFNBQVMsRUFBRTtnQkFDVCxFQUFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO2FBQ3REO1NBQ0YsQ0FBQyxDQUFDO0lBRUwsQ0FBQzt1R0FWVSxtQkFBbUI7d0dBQW5CLG1CQUFtQjt3R0FBbkIsbUJBQW1COzsyRkFBbkIsbUJBQW1CO2tCQUQvQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSBcIi4vbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWdcIjtcclxuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gXCIuL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3JcIjtcclxuXHJcbkBOZ01vZHVsZSgpXHJcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrTW9kdWxlIHtcclxuICBzdGF0aWMgZm9yUm9vdChjb25maWc6IE11dGV4RmFzdExvY2tDb25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJzPE11dGV4RmFzdExvY2tNb2R1bGU+IHtcclxuXHJcbiAgICByZXR1cm4gKHtcclxuICAgICAgbmdNb2R1bGU6IE11dGV4RmFzdExvY2tNb2R1bGUsXHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIHsgcHJvdmlkZTogTVVURVhfRkFTVF9MT0NLX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxyXG4gICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"mutex-fast-lock.module.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.module.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,30],[17,0,0,38],[19,0,0,40],[25,0,0,46],[40,0,0,61],[41,0,0,62]],[[0,0,2,0],[7,0,2,7],[9,0,2,9],[31,0,2,31],[33,0,2,33],[39,0,2,39],[74,0,2,74],[75,0,2,75]],[],[[0,0,5,0],[6,0,5,6],[13,0,5,13],[32,0,5,32]],[[4,0,6,2],[10,0,6,8],[11,0,6,9],[18,0,6,16],[19,0,6,17],[25,0,6,44]],[[8,0,8,4],[15,0,8,11],[16,0,8,12]],[[12,0,9,6],[20,0,9,14],[22,0,9,16],[41,0,9,35]],[[12,0,10,6],[21,0,10,15],[23,0,10,17]],[[16,0,11,8],[18,0,11,10],[25,0,11,17],[27,0,11,19],[49,0,11,41],[51,0,11,43],[59,0,11,51],[61,0,11,53],[67,0,11,59],[69,0,11,61]],[[13,0,12,7]],[[9,0,13,5],[10,0,13,6],[11,0,13,7]],[[4,0,15,2],[5,0,15,3]],[[103,0,5,13],[122,0,5,32]],[[104,0,5,13],[123,0,5,32]],[[104,0,5,13],[123,0,5,32]],[],[[91,0,5,13],[110,0,5,32]],[[18,0,4,1],[26,0,4,9]]],"sourcesContent":["import { ModuleWithProviders, NgModule } from \"@angular/core\";\r\nimport { MutexFastLockConfig } from \"./models/mutex-fast-lock-config\";\r\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\r\n\r\n@NgModule()\r\nexport class MutexFastLockModule {\r\n  static forRoot(config: MutexFastLockConfig): ModuleWithProviders<MutexFastLockModule> {\r\n\r\n    return ({\r\n      ngModule: MutexFastLockModule,\r\n      providers: [\r\n        { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\r\n      ]\r\n    });\r\n\r\n  }\r\n}\r\n"]},"resolvedIds":{"@angular/core":{"attributes":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":1012,"body":[{"type":"ExportAllDeclaration","start":53,"end":105,"exported":null,"source":{"type":"Literal","start":67,"end":104,"value":"./lib/models/mutex-fast-lock-config","raw":"'./lib/models/mutex-fast-lock-config'"},"attributes":[]},{"type":"ExportAllDeclaration","start":106,"end":152,"exported":null,"source":{"type":"Literal","start":120,"end":151,"value":"./lib/models/mutex-lock-stats","raw":"'./lib/models/mutex-lock-stats'"},"attributes":[]},{"type":"ExportAllDeclaration","start":153,"end":199,"exported":null,"source":{"type":"Literal","start":167,"end":198,"value":"./lib/mutex-fast-lock.service","raw":"'./lib/mutex-fast-lock.service'"},"attributes":[]},{"type":"ExportAllDeclaration","start":200,"end":245,"exported":null,"source":{"type":"Literal","start":214,"end":244,"value":"./lib/mutex-fast-lock.module","raw":"'./lib/mutex-fast-lock.module'"},"attributes":[]}],"_rollupRemoved":[{"end":1012,"start":246,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgY25ldC1tdXRleC1mYXN0LWxvY2tcclxuICovXHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tdXRleC1mYXN0LWxvY2subW9kdWxlJztcclxuIl19","customTransformCache":false,"dependencies":["D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs"],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgY25ldC1tdXRleC1mYXN0LWxvY2tcclxuICovXHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tdXRleC1mYXN0LWxvY2subW9kdWxlJztcclxuIl19","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[51,0,4,51],[52,0,4,52]],[[0,0,5,0],[14,0,5,14],[45,0,5,45],[46,0,5,46]],[[0,0,6,0],[14,0,6,14],[45,0,6,45],[46,0,6,46]],[[0,0,7,0],[14,0,7,14],[44,0,7,44],[45,0,7,45]]],"sourcesContent":["/*\r\n * Public API Surface of cnet-mutex-fast-lock\r\n */\r\n\r\nexport * from './lib/models/mutex-fast-lock-config';\r\nexport * from './lib/models/mutex-lock-stats';\r\nexport * from './lib/mutex-fast-lock.service';\r\nexport * from './lib/mutex-fast-lock.module';\r\n"]},"resolvedIds":{"./lib/mutex-fast-lock.service":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/mutex-fast-lock.module":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-fast-lock-config":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-lock-stats":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":548,"body":[{"type":"ExportAllDeclaration","start":48,"end":77,"exported":null,"source":{"type":"Literal","start":62,"end":76,"value":"./public-api","raw":"'./public-api'"},"attributes":[]}],"_rollupRemoved":[{"end":548,"start":78,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs"],"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\devlearning-mutex-fast-lock.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"devlearning-mutex-fast-lock.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/devlearning-mutex-fast-lock.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"attributes":{},"external":false,"id":"D:\\Dev\\DevLearninGRepo\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"json":{},"file-loader":{}}}