{"modules":[{"assertions":{},"ast":{"type":"Program","start":0,"end":662,"body":[{"type":"ExportNamedDeclaration","start":0,"end":83,"declaration":{"type":"ClassDeclaration","start":7,"end":83,"id":{"type":"Identifier","start":13,"end":32,"name":"MutexFastLockConfig"},"superClass":null,"body":{"type":"ClassBody","start":33,"end":83,"body":[{"type":"PropertyDefinition","start":39,"end":50,"static":false,"computed":false,"key":{"type":"Identifier","start":39,"end":49,"name":"lockPrefix"},"value":null},{"type":"PropertyDefinition","start":55,"end":63,"static":false,"computed":false,"key":{"type":"Identifier","start":55,"end":62,"name":"timeout"},"value":null},{"type":"PropertyDefinition","start":68,"end":81,"static":false,"computed":false,"key":{"type":"Identifier","start":68,"end":80,"name":"debugEnabled"},"value":null}]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsVUFBVSxDQUFTO0lBQ25CLE9BQU8sQ0FBUztJQUNoQixZQUFZLENBQVU7Q0FDdkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcclxuICBsb2NrUHJlZml4OiBzdHJpbmc7XHJcbiAgdGltZW91dDogbnVtYmVyO1xyXG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcclxufSJdfQ==","start":84,"end":662}]},"code":"export class MutexFastLockConfig {\n    lockPrefix;\n    timeout;\n    debugEnabled;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsVUFBVSxDQUFTO0lBQ25CLE9BQU8sQ0FBUztJQUNoQixZQUFZLENBQVU7Q0FDdkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcclxuICBsb2NrUHJlZml4OiBzdHJpbmc7XHJcbiAgdGltZW91dDogbnVtYmVyO1xyXG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcclxufSJdfQ==","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexFastLockConfig {\n    lockPrefix;\n    timeout;\n    debugEnabled;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsVUFBVSxDQUFTO0lBQ25CLE9BQU8sQ0FBUztJQUNoQixZQUFZLENBQVU7Q0FDdkIiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcclxuICBsb2NrUHJlZml4OiBzdHJpbmc7XHJcbiAgdGltZW91dDogbnVtYmVyO1xyXG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcclxufSJdfQ==","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-fast-lock-config.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[32,0,0,32]],[[4,0,1,2],[14,0,1,12],[15,0,1,21]],[[4,0,2,2],[11,0,2,9],[12,0,2,18]],[[4,0,3,2],[16,0,3,14],[17,0,3,24]],[[1,0,4,1]]],"sourcesContent":["export class MutexFastLockConfig{\r\n  lockPrefix: string;\r\n  timeout: number;\r\n  debugEnabled: boolean;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":1081,"body":[{"type":"ExportNamedDeclaration","start":0,"end":186,"declaration":{"type":"ClassDeclaration","start":7,"end":186,"id":{"type":"Identifier","start":13,"end":27,"name":"MutexLockStats"},"superClass":null,"body":{"type":"ClassBody","start":28,"end":186,"body":[{"type":"PropertyDefinition","start":34,"end":47,"static":false,"computed":false,"key":{"type":"Identifier","start":34,"end":46,"name":"restartCount"},"value":null},{"type":"PropertyDefinition","start":52,"end":62,"static":false,"computed":false,"key":{"type":"Identifier","start":52,"end":61,"name":"locksLost"},"value":null},{"type":"PropertyDefinition","start":67,"end":83,"static":false,"computed":false,"key":{"type":"Identifier","start":67,"end":82,"name":"contentionCount"},"value":null},{"type":"PropertyDefinition","start":88,"end":104,"static":false,"computed":false,"key":{"type":"Identifier","start":88,"end":103,"name":"acquireDuration"},"value":null},{"type":"PropertyDefinition","start":109,"end":122,"static":false,"computed":false,"key":{"type":"Identifier","start":109,"end":121,"name":"acquireStart"},"value":null},{"type":"PropertyDefinition","start":127,"end":138,"static":false,"computed":false,"key":{"type":"Identifier","start":127,"end":137,"name":"acquireEnd"},"value":null},{"type":"PropertyDefinition","start":143,"end":153,"static":false,"computed":false,"key":{"type":"Identifier","start":143,"end":152,"name":"lockStart"},"value":null},{"type":"PropertyDefinition","start":158,"end":166,"static":false,"computed":false,"key":{"type":"Identifier","start":158,"end":165,"name":"lockEnd"},"value":null},{"type":"PropertyDefinition","start":171,"end":184,"static":false,"computed":false,"key":{"type":"Identifier","start":171,"end":183,"name":"lockDuration"},"value":null}]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0lBQ3pCLFlBQVksQ0FBUztJQUNyQixTQUFTLENBQVM7SUFDbEIsZUFBZSxDQUFTO0lBQ3hCLGVBQWUsQ0FBUztJQUN4QixZQUFZLENBQVM7SUFDckIsVUFBVSxDQUFTO0lBQ25CLFNBQVMsQ0FBUztJQUNsQixPQUFPLENBQVM7SUFDaEIsWUFBWSxDQUFTO0NBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcclxuICByZXN0YXJ0Q291bnQ6IG51bWJlcjtcclxuICBsb2Nrc0xvc3Q6IG51bWJlcjtcclxuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRHVyYXRpb246IG51bWJlcjtcclxuICBhY3F1aXJlU3RhcnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRW5kOiBudW1iZXI7XHJcbiAgbG9ja1N0YXJ0OiBudW1iZXI7XHJcbiAgbG9ja0VuZDogbnVtYmVyO1xyXG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xyXG59Il19","start":187,"end":1081}]},"code":"export class MutexLockStats {\n    restartCount;\n    locksLost;\n    contentionCount;\n    acquireDuration;\n    acquireStart;\n    acquireEnd;\n    lockStart;\n    lockEnd;\n    lockDuration;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0lBQ3pCLFlBQVksQ0FBUztJQUNyQixTQUFTLENBQVM7SUFDbEIsZUFBZSxDQUFTO0lBQ3hCLGVBQWUsQ0FBUztJQUN4QixZQUFZLENBQVM7SUFDckIsVUFBVSxDQUFTO0lBQ25CLFNBQVMsQ0FBUztJQUNsQixPQUFPLENBQVM7SUFDaEIsWUFBWSxDQUFTO0NBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcclxuICByZXN0YXJ0Q291bnQ6IG51bWJlcjtcclxuICBsb2Nrc0xvc3Q6IG51bWJlcjtcclxuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRHVyYXRpb246IG51bWJlcjtcclxuICBhY3F1aXJlU3RhcnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRW5kOiBudW1iZXI7XHJcbiAgbG9ja1N0YXJ0OiBudW1iZXI7XHJcbiAgbG9ja0VuZDogbnVtYmVyO1xyXG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xyXG59Il19","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexLockStats {\n    restartCount;\n    locksLost;\n    contentionCount;\n    acquireDuration;\n    acquireStart;\n    acquireEnd;\n    lockStart;\n    lockEnd;\n    lockDuration;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0lBQ3pCLFlBQVksQ0FBUztJQUNyQixTQUFTLENBQVM7SUFDbEIsZUFBZSxDQUFTO0lBQ3hCLGVBQWUsQ0FBUztJQUN4QixZQUFZLENBQVM7SUFDckIsVUFBVSxDQUFTO0lBQ25CLFNBQVMsQ0FBUztJQUNsQixPQUFPLENBQVM7SUFDaEIsWUFBWSxDQUFTO0NBQ3RCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcclxuICByZXN0YXJ0Q291bnQ6IG51bWJlcjtcclxuICBsb2Nrc0xvc3Q6IG51bWJlcjtcclxuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRHVyYXRpb246IG51bWJlcjtcclxuICBhY3F1aXJlU3RhcnQ6IG51bWJlcjtcclxuICBhY3F1aXJlRW5kOiBudW1iZXI7XHJcbiAgbG9ja1N0YXJ0OiBudW1iZXI7XHJcbiAgbG9ja0VuZDogbnVtYmVyO1xyXG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xyXG59Il19","originalSourcemap":{"version":3,"file":"mutex-lock-stats.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-lock-stats.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[27,0,0,27]],[[4,0,1,2],[16,0,1,14],[17,0,1,23]],[[4,0,2,2],[13,0,2,11],[14,0,2,20]],[[4,0,3,2],[19,0,3,17],[20,0,3,26]],[[4,0,4,2],[19,0,4,17],[20,0,4,26]],[[4,0,5,2],[16,0,5,14],[17,0,5,23]],[[4,0,6,2],[14,0,6,12],[15,0,6,21]],[[4,0,7,2],[13,0,7,11],[14,0,7,20]],[[4,0,8,2],[11,0,8,9],[12,0,8,18]],[[4,0,9,2],[16,0,9,14],[17,0,9,23]],[[1,0,10,1]]],"sourcesContent":["export class MutexLockStats {\r\n  restartCount: number;\r\n  locksLost: number;\r\n  contentionCount: number;\r\n  acquireDuration: number;\r\n  acquireStart: number;\r\n  acquireEnd: number;\r\n  lockStart: number;\r\n  lockEnd: number;\r\n  lockDuration: number;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":918,"body":[{"type":"ImportDeclaration","start":0,"end":47,"specifiers":[{"type":"ImportSpecifier","start":9,"end":23,"imported":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"},"local":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"}}],"source":{"type":"Literal","start":31,"end":46,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ExportNamedDeclaration","start":48,"end":131,"declaration":{"type":"VariableDeclaration","start":55,"end":131,"declarations":[{"type":"VariableDeclarator","start":61,"end":130,"id":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"init":{"type":"NewExpression","start":86,"end":130,"callee":{"type":"Identifier","start":90,"end":104,"name":"InjectionToken"},"arguments":[{"type":"Literal","start":105,"end":129,"value":"MUTEX_FAST_LOCK_CONFIG","raw":"'MUTEX_FAST_LOCK_CONFIG'"}]}}],"kind":"const"},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","start":132,"end":918}]},"code":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","customTransformCache":false,"dependencies":["@angular/core"],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuXHJcbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.injector.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock-config.injector.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[23,0,0,23],[25,0,0,25],[31,0,0,31],[46,0,0,46],[47,0,0,47]],[[0,0,3,0],[6,0,3,6],[7,0,3,7],[13,0,3,13],[35,0,3,35],[38,0,3,38],[42,0,3,42],[56,0,3,56],[57,0,3,78],[81,0,3,102],[82,0,3,103],[83,0,3,104]]],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\r\n\r\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken<MutexFastLockConfig>('MUTEX_FAST_LOCK_CONFIG');"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":521,"body":[{"type":"ExportNamedDeclaration","start":0,"end":54,"declaration":{"type":"ClassDeclaration","start":7,"end":54,"id":{"type":"Identifier","start":13,"end":21,"name":"LockItem"},"superClass":null,"body":{"type":"ClassBody","start":22,"end":54,"body":[{"type":"PropertyDefinition","start":28,"end":37,"static":false,"computed":false,"key":{"type":"Identifier","start":28,"end":36,"name":"clientId"},"value":null},{"type":"PropertyDefinition","start":42,"end":52,"static":false,"computed":false,"key":{"type":"Identifier","start":42,"end":51,"name":"expiresAt"},"value":null}]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtJQUNuQixRQUFRLENBQVM7SUFDakIsU0FBUyxDQUFTO0NBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExvY2tJdGVte1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn0iXX0=","start":55,"end":521}]},"code":"export class LockItem {\n    clientId;\n    expiresAt;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtJQUNuQixRQUFRLENBQVM7SUFDakIsU0FBUyxDQUFTO0NBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExvY2tJdGVte1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn0iXX0=","customTransformCache":false,"dependencies":[],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class LockItem {\n    clientId;\n    expiresAt;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtJQUNuQixRQUFRLENBQVM7SUFDakIsU0FBUyxDQUFTO0NBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExvY2tJdGVte1xyXG4gIGNsaWVudElkOiBzdHJpbmc7XHJcbiAgZXhwaXJlc0F0OiBudW1iZXI7XHJcbn0iXX0=","originalSourcemap":{"version":3,"file":"lock-item.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/lock-item.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[21,0,0,21]],[[4,0,1,2],[12,0,1,10],[13,0,1,19]],[[4,0,2,2],[13,0,2,11],[14,0,2,20]],[[1,0,3,1]]],"sourcesContent":["export class LockItem{\r\n  clientId: string;\r\n  expiresAt: number;\r\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":27356,"body":[{"type":"ImportDeclaration","start":0,"end":51,"specifiers":[{"type":"ImportSpecifier","start":9,"end":15,"imported":{"type":"Identifier","start":9,"end":15,"name":"Inject"},"local":{"type":"Identifier","start":9,"end":15,"name":"Inject"}},{"type":"ImportSpecifier","start":17,"end":27,"imported":{"type":"Identifier","start":17,"end":27,"name":"Injectable"},"local":{"type":"Identifier","start":17,"end":27,"name":"Injectable"}}],"source":{"type":"Literal","start":35,"end":50,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ImportDeclaration","start":52,"end":127,"specifiers":[{"type":"ImportSpecifier","start":61,"end":83,"imported":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":91,"end":126,"value":"./mutex-fast-lock-config.injector","raw":"'./mutex-fast-lock-config.injector'"}},{"type":"ImportDeclaration","start":128,"end":187,"specifiers":[{"type":"ImportSpecifier","start":137,"end":151,"imported":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"},"local":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"}}],"source":{"type":"Literal","start":159,"end":186,"value":"./models/mutex-lock-stats","raw":"'./models/mutex-lock-stats'"}},{"type":"ImportDeclaration","start":188,"end":222,"specifiers":[{"type":"ImportSpecifier","start":197,"end":207,"imported":{"type":"Identifier","start":197,"end":207,"name":"Observable"},"local":{"type":"Identifier","start":197,"end":207,"name":"Observable"}}],"source":{"type":"Literal","start":215,"end":221,"value":"rxjs","raw":"'rxjs'"}},{"type":"ImportDeclaration","start":223,"end":269,"specifiers":[{"type":"ImportSpecifier","start":232,"end":240,"imported":{"type":"Identifier","start":232,"end":240,"name":"LockItem"},"local":{"type":"Identifier","start":232,"end":240,"name":"LockItem"}}],"source":{"type":"Literal","start":248,"end":268,"value":"./models/lock-item","raw":"'./models/lock-item'"}},{"type":"ImportDeclaration","start":270,"end":306,"specifiers":[{"type":"ImportNamespaceSpecifier","start":277,"end":284,"local":{"type":"Identifier","start":282,"end":284,"name":"i0"}}],"source":{"type":"Literal","start":290,"end":305,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":307,"end":361,"specifiers":[{"type":"ImportNamespaceSpecifier","start":314,"end":321,"local":{"type":"Identifier","start":319,"end":321,"name":"i1"}}],"source":{"type":"Literal","start":327,"end":360,"value":"./models/mutex-fast-lock-config","raw":"\"./models/mutex-fast-lock-config\""}},{"type":"ClassDeclaration","start":362,"end":8076,"id":{"type":"Identifier","start":368,"end":388,"name":"MutexFastLockService"},"superClass":null,"body":{"type":"ClassBody","start":389,"end":8076,"body":[{"type":"PropertyDefinition","start":395,"end":403,"static":false,"computed":false,"key":{"type":"Identifier","start":395,"end":402,"name":"_config"},"value":null},{"type":"PropertyDefinition","start":408,"end":418,"static":false,"computed":false,"key":{"type":"Identifier","start":408,"end":417,"name":"_clientId"},"value":null},{"type":"PropertyDefinition","start":423,"end":432,"static":false,"computed":false,"key":{"type":"Identifier","start":423,"end":431,"name":"_xPrefix"},"value":null},{"type":"PropertyDefinition","start":437,"end":446,"static":false,"computed":false,"key":{"type":"Identifier","start":437,"end":445,"name":"_yPrefix"},"value":null},{"type":"MethodDefinition","start":451,"end":1192,"static":false,"computed":false,"key":{"type":"Identifier","start":451,"end":462,"name":"constructor"},"kind":"constructor","value":{"type":"FunctionExpression","start":462,"end":1192,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":463,"end":470,"name":"_config"}],"body":{"type":"BlockStatement","start":472,"end":1192,"body":[{"type":"ExpressionStatement","start":482,"end":505,"expression":{"type":"AssignmentExpression","start":482,"end":504,"operator":"=","left":{"type":"MemberExpression","start":482,"end":494,"object":{"type":"ThisExpression","start":482,"end":486},"property":{"type":"Identifier","start":487,"end":494,"name":"_config"},"computed":false,"optional":false},"right":{"type":"Identifier","start":497,"end":504,"name":"_config"}}},{"type":"ExpressionStatement","start":514,"end":556,"expression":{"type":"AssignmentExpression","start":514,"end":555,"operator":"=","left":{"type":"MemberExpression","start":514,"end":528,"object":{"type":"ThisExpression","start":514,"end":518},"property":{"type":"Identifier","start":519,"end":528,"name":"_clientId"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":531,"end":555,"callee":{"type":"MemberExpression","start":531,"end":553,"object":{"type":"ThisExpression","start":531,"end":535},"property":{"type":"Identifier","start":536,"end":553,"name":"_generateRandomId"},"computed":false,"optional":false},"arguments":[],"optional":false}}},{"type":"ExpressionStatement","start":565,"end":608,"expression":{"type":"AssignmentExpression","start":565,"end":607,"operator":"=","left":{"type":"MemberExpression","start":565,"end":578,"object":{"type":"ThisExpression","start":565,"end":569},"property":{"type":"Identifier","start":570,"end":578,"name":"_xPrefix"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":581,"end":607,"left":{"type":"MemberExpression","start":581,"end":599,"object":{"type":"Identifier","start":581,"end":588,"name":"_config"},"property":{"type":"Identifier","start":589,"end":599,"name":"lockPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Literal","start":602,"end":607,"value":"_X_","raw":"'_X_'"}}}},{"type":"ExpressionStatement","start":617,"end":660,"expression":{"type":"AssignmentExpression","start":617,"end":659,"operator":"=","left":{"type":"MemberExpression","start":617,"end":630,"object":{"type":"ThisExpression","start":617,"end":621},"property":{"type":"Identifier","start":622,"end":630,"name":"_yPrefix"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":633,"end":659,"left":{"type":"MemberExpression","start":633,"end":651,"object":{"type":"Identifier","start":633,"end":640,"name":"_config"},"property":{"type":"Identifier","start":641,"end":651,"name":"lockPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Literal","start":654,"end":659,"value":"_Y_","raw":"'_Y_'"}}}},{"type":"VariableDeclaration","start":669,"end":685,"declarations":[{"type":"VariableDeclarator","start":673,"end":684,"id":{"type":"Identifier","start":673,"end":677,"name":"that"},"init":{"type":"ThisExpression","start":680,"end":684}}],"kind":"let"},{"type":"ExpressionStatement","start":694,"end":1186,"expression":{"type":"CallExpression","start":694,"end":1185,"callee":{"type":"MemberExpression","start":694,"end":717,"object":{"type":"Identifier","start":694,"end":700,"name":"window"},"property":{"type":"Identifier","start":701,"end":717,"name":"addEventListener"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":718,"end":732,"value":"beforeunload","raw":"\"beforeunload\""},{"type":"FunctionExpression","start":734,"end":1184,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":744,"end":746,"name":"ev"}],"body":{"type":"BlockStatement","start":748,"end":1184,"body":[{"type":"VariableDeclaration","start":762,"end":775,"declarations":[{"type":"VariableDeclarator","start":766,"end":774,"id":{"type":"Identifier","start":766,"end":769,"name":"arr"},"init":{"type":"ArrayExpression","start":772,"end":774,"elements":[]}}],"kind":"var"},{"type":"ForStatement","start":788,"end":1060,"init":{"type":"VariableDeclaration","start":793,"end":802,"declarations":[{"type":"VariableDeclarator","start":797,"end":802,"id":{"type":"Identifier","start":797,"end":798,"name":"i"},"init":{"type":"Literal","start":801,"end":802,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":804,"end":827,"left":{"type":"Identifier","start":804,"end":805,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":808,"end":827,"object":{"type":"Identifier","start":808,"end":820,"name":"localStorage"},"property":{"type":"Identifier","start":821,"end":827,"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":829,"end":832,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":829,"end":830,"name":"i"}},"body":{"type":"BlockStatement","start":834,"end":1060,"body":[{"type":"IfStatement","start":852,"end":1046,"test":{"type":"LogicalExpression","start":856,"end":974,"left":{"type":"BinaryExpression","start":856,"end":903,"left":{"type":"CallExpression","start":856,"end":898,"callee":{"type":"MemberExpression","start":856,"end":883,"object":{"type":"CallExpression","start":856,"end":875,"callee":{"type":"MemberExpression","start":856,"end":872,"object":{"type":"Identifier","start":856,"end":868,"name":"localStorage"},"property":{"type":"Identifier","start":869,"end":872,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":873,"end":874,"name":"i"}],"optional":false},"property":{"type":"Identifier","start":876,"end":883,"name":"indexOf"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":884,"end":897,"object":{"type":"Identifier","start":884,"end":888,"name":"that"},"property":{"type":"Identifier","start":889,"end":897,"name":"_xPrefix"},"computed":false,"optional":false}],"optional":false},"operator":"==","right":{"type":"Literal","start":902,"end":903,"value":0,"raw":"0"}},"operator":"||","right":{"type":"BinaryExpression","start":927,"end":974,"left":{"type":"CallExpression","start":927,"end":969,"callee":{"type":"MemberExpression","start":927,"end":954,"object":{"type":"CallExpression","start":927,"end":946,"callee":{"type":"MemberExpression","start":927,"end":943,"object":{"type":"Identifier","start":927,"end":939,"name":"localStorage"},"property":{"type":"Identifier","start":940,"end":943,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":944,"end":945,"name":"i"}],"optional":false},"property":{"type":"Identifier","start":947,"end":954,"name":"indexOf"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":955,"end":968,"object":{"type":"Identifier","start":955,"end":959,"name":"that"},"property":{"type":"Identifier","start":960,"end":968,"name":"_yPrefix"},"computed":false,"optional":false}],"optional":false},"operator":"==","right":{"type":"Literal","start":973,"end":974,"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":976,"end":1046,"body":[{"type":"ExpressionStatement","start":998,"end":1028,"expression":{"type":"CallExpression","start":998,"end":1027,"callee":{"type":"MemberExpression","start":998,"end":1006,"object":{"type":"Identifier","start":998,"end":1001,"name":"arr"},"property":{"type":"Identifier","start":1002,"end":1006,"name":"push"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":1007,"end":1026,"callee":{"type":"MemberExpression","start":1007,"end":1023,"object":{"type":"Identifier","start":1007,"end":1019,"name":"localStorage"},"property":{"type":"Identifier","start":1020,"end":1023,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1024,"end":1025,"name":"i"}],"optional":false}],"optional":false}}]},"alternate":null}]}},{"type":"ForStatement","start":1073,"end":1174,"init":{"type":"VariableDeclaration","start":1078,"end":1087,"declarations":[{"type":"VariableDeclarator","start":1082,"end":1087,"id":{"type":"Identifier","start":1082,"end":1083,"name":"i"},"init":{"type":"Literal","start":1086,"end":1087,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":1089,"end":1103,"left":{"type":"Identifier","start":1089,"end":1090,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":1093,"end":1103,"object":{"type":"Identifier","start":1093,"end":1096,"name":"arr"},"property":{"type":"Identifier","start":1097,"end":1103,"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":1105,"end":1108,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":1105,"end":1106,"name":"i"}},"body":{"type":"BlockStatement","start":1110,"end":1174,"body":[{"type":"ExpressionStatement","start":1128,"end":1160,"expression":{"type":"CallExpression","start":1128,"end":1159,"callee":{"type":"MemberExpression","start":1128,"end":1151,"object":{"type":"Identifier","start":1128,"end":1140,"name":"localStorage"},"property":{"type":"Identifier","start":1141,"end":1151,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":1152,"end":1158,"object":{"type":"Identifier","start":1152,"end":1155,"name":"arr"},"property":{"type":"Identifier","start":1156,"end":1157,"name":"i"},"computed":true,"optional":false}],"optional":false}}]}}]}}],"optional":false}}]}}},{"type":"MethodDefinition","start":1197,"end":5159,"static":false,"computed":false,"key":{"type":"Identifier","start":1197,"end":1201,"name":"lock"},"kind":"method","value":{"type":"FunctionExpression","start":1201,"end":5159,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1202,"end":1205,"name":"key"},{"type":"AssignmentPattern","start":1207,"end":1219,"left":{"type":"Identifier","start":1207,"end":1214,"name":"timeout"},"right":{"type":"UnaryExpression","start":1217,"end":1219,"operator":"-","prefix":true,"argument":{"type":"Literal","start":1218,"end":1219,"value":1,"raw":"1"}}}],"body":{"type":"BlockStatement","start":1221,"end":5159,"body":[{"type":"VariableDeclaration","start":1231,"end":1247,"declarations":[{"type":"VariableDeclarator","start":1235,"end":1246,"id":{"type":"Identifier","start":1235,"end":1239,"name":"that"},"init":{"type":"ThisExpression","start":1242,"end":1246}}],"kind":"let"},{"type":"IfStatement","start":1256,"end":1318,"test":{"type":"BinaryExpression","start":1260,"end":1273,"left":{"type":"Identifier","start":1260,"end":1267,"name":"timeout"},"operator":"==","right":{"type":"UnaryExpression","start":1271,"end":1273,"operator":"-","prefix":true,"argument":{"type":"Literal","start":1272,"end":1273,"value":1,"raw":"1"}}},"consequent":{"type":"ExpressionStatement","start":1287,"end":1318,"expression":{"type":"AssignmentExpression","start":1287,"end":1317,"operator":"=","left":{"type":"Identifier","start":1287,"end":1294,"name":"timeout"},"right":{"type":"MemberExpression","start":1297,"end":1317,"object":{"type":"MemberExpression","start":1297,"end":1309,"object":{"type":"ThisExpression","start":1297,"end":1301},"property":{"type":"Identifier","start":1302,"end":1309,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1310,"end":1317,"name":"timeout"},"computed":false,"optional":false}}},"alternate":null},{"type":"VariableDeclaration","start":1327,"end":1359,"declarations":[{"type":"VariableDeclarator","start":1331,"end":1358,"id":{"type":"Identifier","start":1331,"end":1336,"name":"xLock"},"init":{"type":"BinaryExpression","start":1339,"end":1358,"left":{"type":"MemberExpression","start":1339,"end":1352,"object":{"type":"Identifier","start":1339,"end":1343,"name":"that"},"property":{"type":"Identifier","start":1344,"end":1352,"name":"_xPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":1355,"end":1358,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":1368,"end":1400,"declarations":[{"type":"VariableDeclarator","start":1372,"end":1399,"id":{"type":"Identifier","start":1372,"end":1377,"name":"yLock"},"init":{"type":"BinaryExpression","start":1380,"end":1399,"left":{"type":"MemberExpression","start":1380,"end":1393,"object":{"type":"Identifier","start":1380,"end":1384,"name":"that"},"property":{"type":"Identifier","start":1385,"end":1393,"name":"_yPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":1396,"end":1399,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":1409,"end":1446,"declarations":[{"type":"VariableDeclarator","start":1413,"end":1445,"id":{"type":"Identifier","start":1413,"end":1422,"name":"lockStats"},"init":{"type":"NewExpression","start":1425,"end":1445,"callee":{"type":"Identifier","start":1429,"end":1443,"name":"MutexLockStats"},"arguments":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":1455,"end":1482,"expression":{"type":"CallExpression","start":1455,"end":1481,"callee":{"type":"MemberExpression","start":1455,"end":1470,"object":{"type":"Identifier","start":1455,"end":1459,"name":"that"},"property":{"type":"Identifier","start":1460,"end":1470,"name":"resetStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1471,"end":1480,"name":"lockStats"}],"optional":false}},{"type":"ExpressionStatement","start":1491,"end":1623,"expression":{"type":"LogicalExpression","start":1491,"end":1622,"left":{"type":"MemberExpression","start":1491,"end":1516,"object":{"type":"MemberExpression","start":1491,"end":1503,"object":{"type":"ThisExpression","start":1491,"end":1495},"property":{"type":"Identifier","start":1496,"end":1503,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1504,"end":1516,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":1520,"end":1622,"callee":{"type":"MemberExpression","start":1520,"end":1533,"object":{"type":"Identifier","start":1520,"end":1527,"name":"console"},"property":{"type":"Identifier","start":1528,"end":1533,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":1534,"end":1600,"value":"Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"","raw":"'Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"'"},{"type":"Identifier","start":1602,"end":1605,"name":"key"},{"type":"MemberExpression","start":1607,"end":1621,"object":{"type":"ThisExpression","start":1607,"end":1611},"property":{"type":"Identifier","start":1612,"end":1621,"name":"_clientId"},"computed":false,"optional":false}],"optional":false}}},{"type":"ExpressionStatement","start":1632,"end":1678,"expression":{"type":"AssignmentExpression","start":1632,"end":1677,"operator":"=","left":{"type":"MemberExpression","start":1632,"end":1654,"object":{"type":"Identifier","start":1632,"end":1641,"name":"lockStats"},"property":{"type":"Identifier","start":1642,"end":1654,"name":"acquireStart"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":1657,"end":1677,"callee":{"type":"MemberExpression","start":1657,"end":1675,"object":{"type":"NewExpression","start":1657,"end":1667,"callee":{"type":"Identifier","start":1661,"end":1665,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":1668,"end":1675,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}}},{"type":"ReturnStatement","start":1745,"end":5153,"argument":{"type":"NewExpression","start":1752,"end":5152,"callee":{"type":"Identifier","start":1756,"end":1766,"name":"Observable"},"arguments":[{"type":"ArrowFunctionExpression","start":1767,"end":5151,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1767,"end":1777,"name":"subscriber"}],"body":{"type":"BlockStatement","start":1781,"end":5151,"body":[{"type":"VariableDeclaration","start":2123,"end":5111,"declarations":[{"type":"VariableDeclarator","start":2127,"end":5110,"id":{"type":"Identifier","start":2127,"end":2138,"name":"acquireLock"},"init":{"type":"FunctionExpression","start":2141,"end":5110,"id":{"type":"Identifier","start":2150,"end":2161,"name":"acquireLock"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2162,"end":2165,"name":"key"}],"body":{"type":"BlockStatement","start":2167,"end":5110,"body":[{"type":"ExpressionStatement","start":2185,"end":2217,"expression":{"type":"CallExpression","start":2185,"end":2216,"callee":{"type":"MemberExpression","start":2185,"end":2209,"object":{"type":"Identifier","start":2185,"end":2189,"name":"that"},"property":{"type":"Identifier","start":2190,"end":2209,"name":"_releaseExpiredLock"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2210,"end":2215,"name":"xLock"}],"optional":false}},{"type":"ExpressionStatement","start":2234,"end":2266,"expression":{"type":"CallExpression","start":2234,"end":2265,"callee":{"type":"MemberExpression","start":2234,"end":2258,"object":{"type":"Identifier","start":2234,"end":2238,"name":"that"},"property":{"type":"Identifier","start":2239,"end":2258,"name":"_releaseExpiredLock"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2259,"end":2264,"name":"yLock"}],"optional":false}},{"type":"VariableDeclaration","start":2283,"end":2347,"declarations":[{"type":"VariableDeclarator","start":2287,"end":2346,"id":{"type":"Identifier","start":2287,"end":2298,"name":"elapsedTime"},"init":{"type":"BinaryExpression","start":2301,"end":2346,"left":{"type":"CallExpression","start":2301,"end":2321,"callee":{"type":"MemberExpression","start":2301,"end":2319,"object":{"type":"NewExpression","start":2301,"end":2311,"callee":{"type":"Identifier","start":2305,"end":2309,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":2312,"end":2319,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"-","right":{"type":"MemberExpression","start":2324,"end":2346,"object":{"type":"Identifier","start":2324,"end":2333,"name":"lockStats"},"property":{"type":"Identifier","start":2334,"end":2346,"name":"acquireStart"},"computed":false,"optional":false}}}],"kind":"var"},{"type":"IfStatement","start":2364,"end":2684,"test":{"type":"BinaryExpression","start":2368,"end":2390,"left":{"type":"Identifier","start":2368,"end":2379,"name":"elapsedTime"},"operator":">=","right":{"type":"Identifier","start":2383,"end":2390,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":2392,"end":2684,"body":[{"type":"ExpressionStatement","start":2414,"end":2562,"expression":{"type":"LogicalExpression","start":2414,"end":2561,"left":{"type":"MemberExpression","start":2414,"end":2439,"object":{"type":"MemberExpression","start":2414,"end":2426,"object":{"type":"Identifier","start":2414,"end":2418,"name":"that"},"property":{"type":"Identifier","start":2419,"end":2426,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":2427,"end":2439,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":2443,"end":2561,"callee":{"type":"MemberExpression","start":2443,"end":2456,"object":{"type":"Identifier","start":2443,"end":2450,"name":"console"},"property":{"type":"Identifier","start":2451,"end":2456,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":2457,"end":2530,"value":"Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"","raw":"'Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"'"},{"type":"Identifier","start":2532,"end":2535,"name":"key"},{"type":"Identifier","start":2537,"end":2544,"name":"timeout"},{"type":"MemberExpression","start":2546,"end":2560,"object":{"type":"Identifier","start":2546,"end":2550,"name":"that"},"property":{"type":"Identifier","start":2551,"end":2560,"name":"_clientId"},"computed":false,"optional":false}],"optional":false}}},{"type":"ExpressionStatement","start":2583,"end":2666,"expression":{"type":"CallExpression","start":2583,"end":2665,"callee":{"type":"MemberExpression","start":2583,"end":2599,"object":{"type":"Identifier","start":2583,"end":2593,"name":"subscriber"},"property":{"type":"Identifier","start":2594,"end":2599,"name":"error"},"computed":false,"optional":false},"arguments":[{"type":"NewExpression","start":2600,"end":2664,"callee":{"type":"Identifier","start":2604,"end":2609,"name":"Error"},"arguments":[{"type":"BinaryExpression","start":2610,"end":2663,"left":{"type":"BinaryExpression","start":2610,"end":2656,"left":{"type":"Literal","start":2610,"end":2646,"value":"Lock could not be acquired within ","raw":"'Lock could not be acquired within '"},"operator":"+","right":{"type":"Identifier","start":2649,"end":2656,"name":"timeout"}},"operator":"+","right":{"type":"Literal","start":2659,"end":2663,"value":"ms","raw":"'ms'"}}]}],"optional":false}}]},"alternate":null},{"type":"ExpressionStatement","start":2701,"end":2747,"expression":{"type":"CallExpression","start":2701,"end":2746,"callee":{"type":"MemberExpression","start":2701,"end":2714,"object":{"type":"Identifier","start":2701,"end":2705,"name":"that"},"property":{"type":"Identifier","start":2706,"end":2714,"name":"_setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2715,"end":2720,"name":"xLock"},{"type":"MemberExpression","start":2722,"end":2736,"object":{"type":"Identifier","start":2722,"end":2726,"name":"that"},"property":{"type":"Identifier","start":2727,"end":2736,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":2738,"end":2745,"name":"timeout"}],"optional":false}},{"type":"VariableDeclaration","start":2848,"end":2888,"declarations":[{"type":"VariableDeclarator","start":2852,"end":2887,"id":{"type":"Identifier","start":2852,"end":2855,"name":"lsY"},"init":{"type":"CallExpression","start":2858,"end":2887,"callee":{"type":"MemberExpression","start":2858,"end":2871,"object":{"type":"Identifier","start":2858,"end":2862,"name":"that"},"property":{"type":"Identifier","start":2863,"end":2871,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2872,"end":2877,"name":"yLock"},{"type":"Identifier","start":2879,"end":2886,"name":"timeout"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":2905,"end":3238,"test":{"type":"Identifier","start":2909,"end":2912,"name":"lsY"},"consequent":{"type":"BlockStatement","start":2914,"end":3238,"body":[{"type":"ExpressionStatement","start":2936,"end":3024,"expression":{"type":"LogicalExpression","start":2936,"end":3023,"left":{"type":"MemberExpression","start":2936,"end":2961,"object":{"type":"MemberExpression","start":2936,"end":2948,"object":{"type":"Identifier","start":2936,"end":2940,"name":"that"},"property":{"type":"Identifier","start":2941,"end":2948,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":2949,"end":2961,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":2965,"end":3023,"callee":{"type":"MemberExpression","start":2965,"end":2978,"object":{"type":"Identifier","start":2965,"end":2972,"name":"console"},"property":{"type":"Identifier","start":2973,"end":2978,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":2979,"end":3017,"value":"Lock exists on Y (%s), restarting...","raw":"'Lock exists on Y (%s), restarting...'"},{"type":"Identifier","start":3019,"end":3022,"name":"lsY"}],"optional":false}}},{"type":"ExpressionStatement","start":3045,"end":3070,"expression":{"type":"UpdateExpression","start":3045,"end":3069,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":3045,"end":3067,"object":{"type":"Identifier","start":3045,"end":3054,"name":"lockStats"},"property":{"type":"Identifier","start":3055,"end":3067,"name":"restartCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":3091,"end":3192,"expression":{"type":"CallExpression","start":3091,"end":3191,"callee":{"type":"Identifier","start":3091,"end":3101,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3102,"end":3186,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3114,"end":3186,"body":[{"type":"ReturnStatement","start":3140,"end":3164,"argument":{"type":"CallExpression","start":3147,"end":3163,"callee":{"type":"Identifier","start":3147,"end":3158,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":3159,"end":3162,"name":"key"}],"optional":false}}]}},{"type":"Literal","start":3188,"end":3190,"value":10,"raw":"10"}],"optional":false}},{"type":"ReturnStatement","start":3213,"end":3220,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3293,"end":3339,"expression":{"type":"CallExpression","start":3293,"end":3338,"callee":{"type":"MemberExpression","start":3293,"end":3306,"object":{"type":"Identifier","start":3293,"end":3297,"name":"that"},"property":{"type":"Identifier","start":3298,"end":3306,"name":"_setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3307,"end":3312,"name":"yLock"},{"type":"MemberExpression","start":3314,"end":3328,"object":{"type":"Identifier","start":3314,"end":3318,"name":"that"},"property":{"type":"Identifier","start":3319,"end":3328,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":3330,"end":3337,"name":"timeout"}],"optional":false}},{"type":"VariableDeclaration","start":3440,"end":3480,"declarations":[{"type":"VariableDeclarator","start":3444,"end":3479,"id":{"type":"Identifier","start":3444,"end":3447,"name":"lsX"},"init":{"type":"CallExpression","start":3450,"end":3479,"callee":{"type":"MemberExpression","start":3450,"end":3463,"object":{"type":"Identifier","start":3450,"end":3454,"name":"that"},"property":{"type":"Identifier","start":3455,"end":3463,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3464,"end":3469,"name":"xLock"},{"type":"Identifier","start":3471,"end":3478,"name":"timeout"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":3497,"end":4851,"test":{"type":"BinaryExpression","start":3501,"end":3523,"left":{"type":"Identifier","start":3501,"end":3504,"name":"lsX"},"operator":"!==","right":{"type":"MemberExpression","start":3509,"end":3523,"object":{"type":"Identifier","start":3509,"end":3513,"name":"that"},"property":{"type":"Identifier","start":3514,"end":3523,"name":"_clientId"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":3525,"end":4851,"body":[{"type":"ExpressionStatement","start":3547,"end":3575,"expression":{"type":"UpdateExpression","start":3547,"end":3574,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":3547,"end":3572,"object":{"type":"Identifier","start":3547,"end":3556,"name":"lockStats"},"property":{"type":"Identifier","start":3557,"end":3572,"name":"contentionCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":3596,"end":3680,"expression":{"type":"LogicalExpression","start":3596,"end":3679,"left":{"type":"MemberExpression","start":3596,"end":3621,"object":{"type":"MemberExpression","start":3596,"end":3608,"object":{"type":"Identifier","start":3596,"end":3600,"name":"that"},"property":{"type":"Identifier","start":3601,"end":3608,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":3609,"end":3621,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":3625,"end":3679,"callee":{"type":"MemberExpression","start":3625,"end":3638,"object":{"type":"Identifier","start":3625,"end":3632,"name":"console"},"property":{"type":"Identifier","start":3633,"end":3638,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":3639,"end":3673,"value":"Lock contention detected. X=\"%s\"","raw":"'Lock contention detected. X=\"%s\"'"},{"type":"Identifier","start":3675,"end":3678,"name":"lsX"}],"optional":false}}},{"type":"ExpressionStatement","start":3763,"end":4805,"expression":{"type":"CallExpression","start":3763,"end":4804,"callee":{"type":"Identifier","start":3763,"end":3773,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3774,"end":4798,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3786,"end":4798,"body":[{"type":"ExpressionStatement","start":3812,"end":3848,"expression":{"type":"AssignmentExpression","start":3812,"end":3847,"operator":"=","left":{"type":"Identifier","start":3812,"end":3815,"name":"lsY"},"right":{"type":"CallExpression","start":3818,"end":3847,"callee":{"type":"MemberExpression","start":3818,"end":3831,"object":{"type":"Identifier","start":3818,"end":3822,"name":"that"},"property":{"type":"Identifier","start":3823,"end":3831,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3832,"end":3837,"name":"yLock"},{"type":"Identifier","start":3839,"end":3846,"name":"timeout"}],"optional":false}}},{"type":"IfStatement","start":3873,"end":4776,"test":{"type":"BinaryExpression","start":3877,"end":3899,"left":{"type":"Identifier","start":3877,"end":3880,"name":"lsY"},"operator":"===","right":{"type":"MemberExpression","start":3885,"end":3899,"object":{"type":"Identifier","start":3885,"end":3889,"name":"that"},"property":{"type":"Identifier","start":3890,"end":3899,"name":"_clientId"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":3901,"end":4198,"body":[{"type":"ExpressionStatement","start":3977,"end":4098,"expression":{"type":"LogicalExpression","start":3977,"end":4097,"left":{"type":"MemberExpression","start":3977,"end":4002,"object":{"type":"MemberExpression","start":3977,"end":3989,"object":{"type":"Identifier","start":3977,"end":3981,"name":"that"},"property":{"type":"Identifier","start":3982,"end":3989,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":3990,"end":4002,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":4006,"end":4097,"callee":{"type":"MemberExpression","start":4006,"end":4019,"object":{"type":"Identifier","start":4006,"end":4013,"name":"console"},"property":{"type":"Identifier","start":4014,"end":4019,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4020,"end":4075,"value":"FastMutex client \"%s\" won the lock contention on \"%s\"","raw":"'FastMutex client \"%s\" won the lock contention on \"%s\"'"},{"type":"MemberExpression","start":4077,"end":4091,"object":{"type":"Identifier","start":4077,"end":4081,"name":"that"},"property":{"type":"Identifier","start":4082,"end":4091,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":4093,"end":4096,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":4127,"end":4172,"expression":{"type":"CallExpression","start":4127,"end":4171,"callee":{"type":"MemberExpression","start":4127,"end":4148,"object":{"type":"Identifier","start":4127,"end":4131,"name":"that"},"property":{"type":"Identifier","start":4132,"end":4148,"name":"resolveWithStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":4149,"end":4159,"name":"subscriber"},{"type":"Identifier","start":4161,"end":4170,"name":"lockStats"}],"optional":false}}]},"alternate":{"type":"BlockStatement","start":4228,"end":4776,"body":[{"type":"ExpressionStatement","start":4333,"end":4358,"expression":{"type":"UpdateExpression","start":4333,"end":4357,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":4333,"end":4355,"object":{"type":"Identifier","start":4333,"end":4342,"name":"lockStats"},"property":{"type":"Identifier","start":4343,"end":4355,"name":"restartCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":4387,"end":4409,"expression":{"type":"UpdateExpression","start":4387,"end":4408,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":4387,"end":4406,"object":{"type":"Identifier","start":4387,"end":4396,"name":"lockStats"},"property":{"type":"Identifier","start":4397,"end":4406,"name":"locksLost"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":4438,"end":4604,"expression":{"type":"LogicalExpression","start":4438,"end":4603,"left":{"type":"MemberExpression","start":4438,"end":4463,"object":{"type":"MemberExpression","start":4438,"end":4450,"object":{"type":"Identifier","start":4438,"end":4442,"name":"that"},"property":{"type":"Identifier","start":4443,"end":4450,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":4451,"end":4463,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":4467,"end":4603,"callee":{"type":"MemberExpression","start":4467,"end":4480,"object":{"type":"Identifier","start":4467,"end":4474,"name":"console"},"property":{"type":"Identifier","start":4475,"end":4480,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4481,"end":4576,"value":"FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...","raw":"'FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...'"},{"type":"MemberExpression","start":4578,"end":4592,"object":{"type":"Identifier","start":4578,"end":4582,"name":"that"},"property":{"type":"Identifier","start":4583,"end":4592,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":4594,"end":4597,"name":"key"},{"type":"Identifier","start":4599,"end":4602,"name":"lsY"}],"optional":false}}},{"type":"ExpressionStatement","start":4633,"end":4750,"expression":{"type":"CallExpression","start":4633,"end":4749,"callee":{"type":"Identifier","start":4633,"end":4643,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":4644,"end":4744,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4656,"end":4744,"body":[{"type":"ReturnStatement","start":4690,"end":4714,"argument":{"type":"CallExpression","start":4697,"end":4713,"callee":{"type":"Identifier","start":4697,"end":4708,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":4709,"end":4712,"name":"key"}],"optional":false}}]}},{"type":"Literal","start":4746,"end":4748,"value":10,"raw":"10"}],"optional":false}}]}}]}},{"type":"Literal","start":4800,"end":4803,"value":100,"raw":"100"}],"optional":false}},{"type":"ReturnStatement","start":4826,"end":4833,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":4902,"end":5034,"expression":{"type":"LogicalExpression","start":4902,"end":5033,"left":{"type":"MemberExpression","start":4902,"end":4927,"object":{"type":"MemberExpression","start":4902,"end":4914,"object":{"type":"Identifier","start":4902,"end":4906,"name":"that"},"property":{"type":"Identifier","start":4907,"end":4914,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":4915,"end":4927,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":4931,"end":5033,"callee":{"type":"MemberExpression","start":4931,"end":4944,"object":{"type":"Identifier","start":4931,"end":4938,"name":"console"},"property":{"type":"Identifier","start":4939,"end":4944,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4945,"end":5011,"value":"FastMutex client \"%s\" acquired a lock on \"%s\" with no contention","raw":"'FastMutex client \"%s\" acquired a lock on \"%s\" with no contention'"},{"type":"MemberExpression","start":5013,"end":5027,"object":{"type":"Identifier","start":5013,"end":5017,"name":"that"},"property":{"type":"Identifier","start":5018,"end":5027,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":5029,"end":5032,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":5051,"end":5096,"expression":{"type":"CallExpression","start":5051,"end":5095,"callee":{"type":"MemberExpression","start":5051,"end":5072,"object":{"type":"Identifier","start":5051,"end":5055,"name":"that"},"property":{"type":"Identifier","start":5056,"end":5072,"name":"resolveWithStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5073,"end":5083,"name":"subscriber"},{"type":"Identifier","start":5085,"end":5094,"name":"lockStats"}],"optional":false}}]}}}],"kind":"let"},{"type":"ExpressionStatement","start":5124,"end":5141,"expression":{"type":"CallExpression","start":5124,"end":5140,"callee":{"type":"Identifier","start":5124,"end":5135,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":5136,"end":5139,"name":"key"}],"optional":false}}]}}]}}]}}},{"type":"MethodDefinition","start":5164,"end":5713,"static":false,"computed":false,"key":{"type":"Identifier","start":5164,"end":5171,"name":"release"},"kind":"method","value":{"type":"FunctionExpression","start":5171,"end":5713,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5172,"end":5175,"name":"key"}],"body":{"type":"BlockStatement","start":5177,"end":5713,"body":[{"type":"ExpressionStatement","start":5187,"end":5302,"expression":{"type":"LogicalExpression","start":5187,"end":5301,"left":{"type":"MemberExpression","start":5187,"end":5212,"object":{"type":"MemberExpression","start":5187,"end":5199,"object":{"type":"ThisExpression","start":5187,"end":5191},"property":{"type":"Identifier","start":5192,"end":5199,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":5200,"end":5212,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":5216,"end":5301,"callee":{"type":"MemberExpression","start":5216,"end":5229,"object":{"type":"Identifier","start":5216,"end":5223,"name":"console"},"property":{"type":"Identifier","start":5224,"end":5229,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":5230,"end":5279,"value":"FastMutex client \"%s\" is releasing lock on \"%s\"","raw":"'FastMutex client \"%s\" is releasing lock on \"%s\"'"},{"type":"MemberExpression","start":5281,"end":5295,"object":{"type":"ThisExpression","start":5281,"end":5285},"property":{"type":"Identifier","start":5286,"end":5295,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":5297,"end":5300,"name":"key"}],"optional":false}}},{"type":"VariableDeclaration","start":5311,"end":5339,"declarations":[{"type":"VariableDeclarator","start":5315,"end":5338,"id":{"type":"Identifier","start":5315,"end":5316,"name":"x"},"init":{"type":"BinaryExpression","start":5319,"end":5338,"left":{"type":"MemberExpression","start":5319,"end":5332,"object":{"type":"ThisExpression","start":5319,"end":5323},"property":{"type":"Identifier","start":5324,"end":5332,"name":"_xPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":5335,"end":5338,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":5348,"end":5376,"declarations":[{"type":"VariableDeclarator","start":5352,"end":5375,"id":{"type":"Identifier","start":5352,"end":5353,"name":"y"},"init":{"type":"BinaryExpression","start":5356,"end":5375,"left":{"type":"MemberExpression","start":5356,"end":5369,"object":{"type":"ThisExpression","start":5356,"end":5360},"property":{"type":"Identifier","start":5361,"end":5369,"name":"_yPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":5372,"end":5375,"name":"key"}}}],"kind":"let"},{"type":"ExpressionStatement","start":5385,"end":5412,"expression":{"type":"CallExpression","start":5385,"end":5411,"callee":{"type":"MemberExpression","start":5385,"end":5408,"object":{"type":"Identifier","start":5385,"end":5397,"name":"localStorage"},"property":{"type":"Identifier","start":5398,"end":5408,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5409,"end":5410,"name":"x"}],"optional":false}},{"type":"ExpressionStatement","start":5421,"end":5448,"expression":{"type":"CallExpression","start":5421,"end":5447,"callee":{"type":"MemberExpression","start":5421,"end":5444,"object":{"type":"Identifier","start":5421,"end":5433,"name":"localStorage"},"property":{"type":"Identifier","start":5434,"end":5444,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5445,"end":5446,"name":"y"}],"optional":false}}]}}},{"type":"MethodDefinition","start":5718,"end":5806,"static":false,"computed":false,"key":{"type":"Identifier","start":5718,"end":5735,"name":"_generateRandomId"},"kind":"method","value":{"type":"FunctionExpression","start":5735,"end":5806,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5738,"end":5806,"body":[{"type":"ReturnStatement","start":5748,"end":5800,"argument":{"type":"BinaryExpression","start":5755,"end":5799,"left":{"type":"CallExpression","start":5755,"end":5794,"callee":{"type":"MemberExpression","start":5755,"end":5765,"object":{"type":"Identifier","start":5755,"end":5759,"name":"Math"},"property":{"type":"Identifier","start":5760,"end":5765,"name":"floor"},"computed":false,"optional":false},"arguments":[{"type":"BinaryExpression","start":5766,"end":5793,"left":{"type":"CallExpression","start":5766,"end":5779,"callee":{"type":"MemberExpression","start":5766,"end":5777,"object":{"type":"Identifier","start":5766,"end":5770,"name":"Math"},"property":{"type":"Identifier","start":5771,"end":5777,"name":"random"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"*","right":{"type":"Literal","start":5782,"end":5793,"value":10000000000,"raw":"10000000000"}}],"optional":false},"operator":"+","right":{"type":"Literal","start":5797,"end":5799,"value":"","raw":"''"}}}]}}},{"type":"MethodDefinition","start":5811,"end":6026,"static":false,"computed":false,"key":{"type":"Identifier","start":5811,"end":5821,"name":"resetStats"},"kind":"method","value":{"type":"FunctionExpression","start":5821,"end":6026,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5822,"end":5831,"name":"lockStats"}],"body":{"type":"BlockStatement","start":5833,"end":6026,"body":[{"type":"ExpressionStatement","start":5843,"end":5870,"expression":{"type":"AssignmentExpression","start":5843,"end":5869,"operator":"=","left":{"type":"MemberExpression","start":5843,"end":5865,"object":{"type":"Identifier","start":5843,"end":5852,"name":"lockStats"},"property":{"type":"Identifier","start":5853,"end":5865,"name":"restartCount"},"computed":false,"optional":false},"right":{"type":"Literal","start":5868,"end":5869,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5879,"end":5903,"expression":{"type":"AssignmentExpression","start":5879,"end":5902,"operator":"=","left":{"type":"MemberExpression","start":5879,"end":5898,"object":{"type":"Identifier","start":5879,"end":5888,"name":"lockStats"},"property":{"type":"Identifier","start":5889,"end":5898,"name":"locksLost"},"computed":false,"optional":false},"right":{"type":"Literal","start":5901,"end":5902,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5912,"end":5942,"expression":{"type":"AssignmentExpression","start":5912,"end":5941,"operator":"=","left":{"type":"MemberExpression","start":5912,"end":5937,"object":{"type":"Identifier","start":5912,"end":5921,"name":"lockStats"},"property":{"type":"Identifier","start":5922,"end":5937,"name":"contentionCount"},"computed":false,"optional":false},"right":{"type":"Literal","start":5940,"end":5941,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5951,"end":5981,"expression":{"type":"AssignmentExpression","start":5951,"end":5980,"operator":"=","left":{"type":"MemberExpression","start":5951,"end":5976,"object":{"type":"Identifier","start":5951,"end":5960,"name":"lockStats"},"property":{"type":"Identifier","start":5961,"end":5976,"name":"acquireDuration"},"computed":false,"optional":false},"right":{"type":"Literal","start":5979,"end":5980,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5990,"end":6020,"expression":{"type":"AssignmentExpression","start":5990,"end":6019,"operator":"=","left":{"type":"MemberExpression","start":5990,"end":6012,"object":{"type":"Identifier","start":5990,"end":5999,"name":"lockStats"},"property":{"type":"Identifier","start":6000,"end":6012,"name":"acquireStart"},"computed":false,"optional":false},"right":{"type":"Literal","start":6015,"end":6019,"value":null,"raw":"null"}}}]}}},{"type":"MethodDefinition","start":6031,"end":6335,"static":false,"computed":false,"key":{"type":"Identifier","start":6031,"end":6047,"name":"resolveWithStats"},"kind":"method","value":{"type":"FunctionExpression","start":6047,"end":6335,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6048,"end":6058,"name":"subscriber"},{"type":"Identifier","start":6060,"end":6065,"name":"stats"}],"body":{"type":"BlockStatement","start":6067,"end":6335,"body":[{"type":"VariableDeclaration","start":6077,"end":6116,"declarations":[{"type":"VariableDeclarator","start":6081,"end":6115,"id":{"type":"Identifier","start":6081,"end":6092,"name":"currentTime"},"init":{"type":"CallExpression","start":6095,"end":6115,"callee":{"type":"MemberExpression","start":6095,"end":6113,"object":{"type":"NewExpression","start":6095,"end":6105,"callee":{"type":"Identifier","start":6099,"end":6103,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6106,"end":6113,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}}],"kind":"var"},{"type":"ExpressionStatement","start":6125,"end":6156,"expression":{"type":"AssignmentExpression","start":6125,"end":6155,"operator":"=","left":{"type":"MemberExpression","start":6125,"end":6141,"object":{"type":"Identifier","start":6125,"end":6130,"name":"stats"},"property":{"type":"Identifier","start":6131,"end":6141,"name":"acquireEnd"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6144,"end":6155,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6165,"end":6227,"expression":{"type":"AssignmentExpression","start":6165,"end":6226,"operator":"=","left":{"type":"MemberExpression","start":6165,"end":6186,"object":{"type":"Identifier","start":6165,"end":6170,"name":"stats"},"property":{"type":"Identifier","start":6171,"end":6186,"name":"acquireDuration"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":6189,"end":6226,"left":{"type":"MemberExpression","start":6189,"end":6205,"object":{"type":"Identifier","start":6189,"end":6194,"name":"stats"},"property":{"type":"Identifier","start":6195,"end":6205,"name":"acquireEnd"},"computed":false,"optional":false},"operator":"-","right":{"type":"MemberExpression","start":6208,"end":6226,"object":{"type":"Identifier","start":6208,"end":6213,"name":"stats"},"property":{"type":"Identifier","start":6214,"end":6226,"name":"acquireStart"},"computed":false,"optional":false}}}},{"type":"ExpressionStatement","start":6236,"end":6266,"expression":{"type":"AssignmentExpression","start":6236,"end":6265,"operator":"=","left":{"type":"MemberExpression","start":6236,"end":6251,"object":{"type":"Identifier","start":6236,"end":6241,"name":"stats"},"property":{"type":"Identifier","start":6242,"end":6251,"name":"lockStart"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6254,"end":6265,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6275,"end":6298,"expression":{"type":"CallExpression","start":6275,"end":6297,"callee":{"type":"MemberExpression","start":6275,"end":6290,"object":{"type":"Identifier","start":6275,"end":6285,"name":"subscriber"},"property":{"type":"Identifier","start":6286,"end":6290,"name":"next"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6291,"end":6296,"name":"stats"}],"optional":false}},{"type":"ExpressionStatement","start":6307,"end":6329,"expression":{"type":"CallExpression","start":6307,"end":6328,"callee":{"type":"MemberExpression","start":6307,"end":6326,"object":{"type":"Identifier","start":6307,"end":6317,"name":"subscriber"},"property":{"type":"Identifier","start":6318,"end":6326,"name":"complete"},"computed":false,"optional":false},"arguments":[],"optional":false}}]}}},{"type":"MethodDefinition","start":6506,"end":6752,"static":false,"computed":false,"key":{"type":"Identifier","start":6506,"end":6514,"name":"_setItem"},"kind":"method","value":{"type":"FunctionExpression","start":6514,"end":6752,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6515,"end":6518,"name":"key"},{"type":"Identifier","start":6520,"end":6528,"name":"clientId"},{"type":"Identifier","start":6530,"end":6537,"name":"timeout"}],"body":{"type":"BlockStatement","start":6539,"end":6752,"body":[{"type":"VariableDeclaration","start":6549,"end":6579,"declarations":[{"type":"VariableDeclarator","start":6553,"end":6578,"id":{"type":"Identifier","start":6553,"end":6561,"name":"lockItem"},"init":{"type":"NewExpression","start":6564,"end":6578,"callee":{"type":"Identifier","start":6568,"end":6576,"name":"LockItem"},"arguments":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":6588,"end":6617,"expression":{"type":"AssignmentExpression","start":6588,"end":6616,"operator":"=","left":{"type":"MemberExpression","start":6588,"end":6605,"object":{"type":"Identifier","start":6588,"end":6596,"name":"lockItem"},"property":{"type":"Identifier","start":6597,"end":6605,"name":"clientId"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6608,"end":6616,"name":"clientId"}}},{"type":"ExpressionStatement","start":6626,"end":6678,"expression":{"type":"AssignmentExpression","start":6626,"end":6677,"operator":"=","left":{"type":"MemberExpression","start":6626,"end":6644,"object":{"type":"Identifier","start":6626,"end":6634,"name":"lockItem"},"property":{"type":"Identifier","start":6635,"end":6644,"name":"expiresAt"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":6647,"end":6677,"left":{"type":"CallExpression","start":6647,"end":6667,"callee":{"type":"MemberExpression","start":6647,"end":6665,"object":{"type":"NewExpression","start":6647,"end":6657,"callee":{"type":"Identifier","start":6651,"end":6655,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6658,"end":6665,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"+","right":{"type":"Identifier","start":6670,"end":6677,"name":"timeout"}}}},{"type":"ReturnStatement","start":6687,"end":6746,"argument":{"type":"CallExpression","start":6694,"end":6745,"callee":{"type":"MemberExpression","start":6694,"end":6714,"object":{"type":"Identifier","start":6694,"end":6706,"name":"localStorage"},"property":{"type":"Identifier","start":6707,"end":6714,"name":"setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6715,"end":6718,"name":"key"},{"type":"CallExpression","start":6720,"end":6744,"callee":{"type":"MemberExpression","start":6720,"end":6734,"object":{"type":"Identifier","start":6720,"end":6724,"name":"JSON"},"property":{"type":"Identifier","start":6725,"end":6734,"name":"stringify"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6735,"end":6743,"name":"lockItem"}],"optional":false}],"optional":false}}]}}},{"type":"MethodDefinition","start":6845,"end":7321,"static":false,"computed":false,"key":{"type":"Identifier","start":6845,"end":6853,"name":"_getItem"},"kind":"method","value":{"type":"FunctionExpression","start":6853,"end":7321,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6854,"end":6857,"name":"key"},{"type":"Identifier","start":6859,"end":6866,"name":"timeout"}],"body":{"type":"BlockStatement","start":6868,"end":7321,"body":[{"type":"VariableDeclaration","start":6878,"end":6915,"declarations":[{"type":"VariableDeclarator","start":6882,"end":6914,"id":{"type":"Identifier","start":6882,"end":6886,"name":"item"},"init":{"type":"CallExpression","start":6889,"end":6914,"callee":{"type":"MemberExpression","start":6889,"end":6909,"object":{"type":"Identifier","start":6889,"end":6901,"name":"localStorage"},"property":{"type":"Identifier","start":6902,"end":6909,"name":"getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6910,"end":6913,"name":"key"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":6924,"end":6959,"test":{"type":"UnaryExpression","start":6928,"end":6933,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":6929,"end":6933,"name":"item"}},"consequent":{"type":"ReturnStatement","start":6947,"end":6959,"argument":{"type":"Literal","start":6954,"end":6958,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":6968,"end":7000,"declarations":[{"type":"VariableDeclarator","start":6972,"end":6999,"id":{"type":"Identifier","start":6972,"end":6980,"name":"lockItem"},"init":{"type":"CallExpression","start":6983,"end":6999,"callee":{"type":"MemberExpression","start":6983,"end":6993,"object":{"type":"Identifier","start":6983,"end":6987,"name":"JSON"},"property":{"type":"Identifier","start":6988,"end":6993,"name":"parse"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6994,"end":6998,"name":"item"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":7009,"end":7281,"test":{"type":"BinaryExpression","start":7013,"end":7065,"left":{"type":"BinaryExpression","start":7013,"end":7054,"left":{"type":"CallExpression","start":7013,"end":7033,"callee":{"type":"MemberExpression","start":7013,"end":7031,"object":{"type":"NewExpression","start":7013,"end":7023,"callee":{"type":"Identifier","start":7017,"end":7021,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":7024,"end":7031,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"-","right":{"type":"MemberExpression","start":7036,"end":7054,"object":{"type":"Identifier","start":7036,"end":7044,"name":"lockItem"},"property":{"type":"Identifier","start":7045,"end":7054,"name":"expiresAt"},"computed":false,"optional":false}},"operator":">=","right":{"type":"Identifier","start":7058,"end":7065,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":7067,"end":7281,"body":[{"type":"ExpressionStatement","start":7081,"end":7204,"expression":{"type":"LogicalExpression","start":7081,"end":7203,"left":{"type":"MemberExpression","start":7081,"end":7106,"object":{"type":"MemberExpression","start":7081,"end":7093,"object":{"type":"ThisExpression","start":7081,"end":7085},"property":{"type":"Identifier","start":7086,"end":7093,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":7094,"end":7106,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":7110,"end":7203,"callee":{"type":"MemberExpression","start":7110,"end":7123,"object":{"type":"Identifier","start":7110,"end":7117,"name":"console"},"property":{"type":"Identifier","start":7118,"end":7123,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":7124,"end":7181,"value":"FastMutex client \"%s\" removed an expired record on \"%s\"","raw":"'FastMutex client \"%s\" removed an expired record on \"%s\"'"},{"type":"MemberExpression","start":7183,"end":7197,"object":{"type":"ThisExpression","start":7183,"end":7187},"property":{"type":"Identifier","start":7188,"end":7197,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":7199,"end":7202,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":7217,"end":7246,"expression":{"type":"CallExpression","start":7217,"end":7245,"callee":{"type":"MemberExpression","start":7217,"end":7240,"object":{"type":"Identifier","start":7217,"end":7229,"name":"localStorage"},"property":{"type":"Identifier","start":7230,"end":7240,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7241,"end":7244,"name":"key"}],"optional":false}},{"type":"ReturnStatement","start":7259,"end":7271,"argument":{"type":"Literal","start":7266,"end":7270,"value":null,"raw":"null"}}]},"alternate":null},{"type":"ReturnStatement","start":7290,"end":7315,"argument":{"type":"MemberExpression","start":7297,"end":7314,"object":{"type":"Identifier","start":7297,"end":7305,"name":"lockItem"},"property":{"type":"Identifier","start":7306,"end":7314,"name":"clientId"},"computed":false,"optional":false}}]}}},{"type":"MethodDefinition","start":7326,"end":7712,"static":false,"computed":false,"key":{"type":"Identifier","start":7326,"end":7345,"name":"_releaseExpiredLock"},"kind":"method","value":{"type":"FunctionExpression","start":7345,"end":7712,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7346,"end":7349,"name":"key"}],"body":{"type":"BlockStatement","start":7351,"end":7712,"body":[{"type":"VariableDeclaration","start":7361,"end":7398,"declarations":[{"type":"VariableDeclarator","start":7365,"end":7397,"id":{"type":"Identifier","start":7365,"end":7369,"name":"item"},"init":{"type":"CallExpression","start":7372,"end":7397,"callee":{"type":"MemberExpression","start":7372,"end":7392,"object":{"type":"Identifier","start":7372,"end":7384,"name":"localStorage"},"property":{"type":"Identifier","start":7385,"end":7392,"name":"getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7393,"end":7396,"name":"key"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":7407,"end":7442,"test":{"type":"UnaryExpression","start":7411,"end":7416,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":7412,"end":7416,"name":"item"}},"consequent":{"type":"ReturnStatement","start":7430,"end":7442,"argument":{"type":"Literal","start":7437,"end":7441,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":7451,"end":7483,"declarations":[{"type":"VariableDeclarator","start":7455,"end":7482,"id":{"type":"Identifier","start":7455,"end":7463,"name":"lockItem"},"init":{"type":"CallExpression","start":7466,"end":7482,"callee":{"type":"MemberExpression","start":7466,"end":7476,"object":{"type":"Identifier","start":7466,"end":7470,"name":"JSON"},"property":{"type":"Identifier","start":7471,"end":7476,"name":"parse"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7477,"end":7481,"name":"item"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":7492,"end":7706,"test":{"type":"BinaryExpression","start":7496,"end":7538,"left":{"type":"MemberExpression","start":7496,"end":7514,"object":{"type":"Identifier","start":7496,"end":7504,"name":"lockItem"},"property":{"type":"Identifier","start":7505,"end":7514,"name":"expiresAt"},"computed":false,"optional":false},"operator":"<=","right":{"type":"CallExpression","start":7518,"end":7538,"callee":{"type":"MemberExpression","start":7518,"end":7536,"object":{"type":"NewExpression","start":7518,"end":7528,"callee":{"type":"Identifier","start":7522,"end":7526,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":7529,"end":7536,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}},"consequent":{"type":"BlockStatement","start":7540,"end":7706,"body":[{"type":"ExpressionStatement","start":7554,"end":7654,"expression":{"type":"LogicalExpression","start":7554,"end":7653,"left":{"type":"MemberExpression","start":7554,"end":7579,"object":{"type":"MemberExpression","start":7554,"end":7566,"object":{"type":"ThisExpression","start":7554,"end":7558},"property":{"type":"Identifier","start":7559,"end":7566,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":7567,"end":7579,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":7583,"end":7653,"callee":{"type":"MemberExpression","start":7583,"end":7596,"object":{"type":"Identifier","start":7583,"end":7590,"name":"console"},"property":{"type":"Identifier","start":7591,"end":7596,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":7597,"end":7647,"value":"FastMutex auto removed an expired record on \"%s\"","raw":"'FastMutex auto removed an expired record on \"%s\"'"},{"type":"Identifier","start":7649,"end":7652,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":7667,"end":7696,"expression":{"type":"CallExpression","start":7667,"end":7695,"callee":{"type":"MemberExpression","start":7667,"end":7690,"object":{"type":"Identifier","start":7667,"end":7679,"name":"localStorage"},"property":{"type":"Identifier","start":7680,"end":7690,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7691,"end":7694,"name":"key"}],"optional":false}}]},"alternate":null}]}}},{"type":"PropertyDefinition","start":7717,"end":7922,"static":true,"computed":false,"key":{"type":"Identifier","start":7724,"end":7728,"name":"ɵfac"},"value":{"type":"CallExpression","start":7731,"end":7921,"callee":{"type":"MemberExpression","start":7731,"end":7752,"object":{"type":"Identifier","start":7731,"end":7733,"name":"i0"},"property":{"type":"Identifier","start":7734,"end":7752,"name":"ɵɵngDeclareFactory"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":7753,"end":7920,"properties":[{"type":"Property","start":7755,"end":7775,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7755,"end":7765,"name":"minVersion"},"value":{"type":"Literal","start":7767,"end":7775,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":7777,"end":7794,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7777,"end":7784,"name":"version"},"value":{"type":"Literal","start":7786,"end":7794,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":7796,"end":7808,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7796,"end":7804,"name":"ngImport"},"value":{"type":"Identifier","start":7806,"end":7808,"name":"i0"},"kind":"init"},{"type":"Property","start":7810,"end":7836,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7810,"end":7814,"name":"type"},"value":{"type":"Identifier","start":7816,"end":7836,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":7838,"end":7879,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7838,"end":7842,"name":"deps"},"value":{"type":"ArrayExpression","start":7844,"end":7879,"elements":[{"type":"ObjectExpression","start":7845,"end":7878,"properties":[{"type":"Property","start":7847,"end":7876,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7847,"end":7852,"name":"token"},"value":{"type":"Identifier","start":7854,"end":7876,"name":"MUTEX_FAST_LOCK_CONFIG"},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":7881,"end":7918,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7881,"end":7887,"name":"target"},"value":{"type":"MemberExpression","start":7889,"end":7918,"object":{"type":"MemberExpression","start":7889,"end":7907,"object":{"type":"Identifier","start":7889,"end":7891,"name":"i0"},"property":{"type":"Identifier","start":7892,"end":7907,"name":"ɵɵFactoryTarget"},"computed":false,"optional":false},"property":{"type":"Identifier","start":7908,"end":7918,"name":"Injectable"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false}},{"type":"PropertyDefinition","start":7927,"end":8074,"static":true,"computed":false,"key":{"type":"Identifier","start":7934,"end":7939,"name":"ɵprov"},"value":{"type":"CallExpression","start":7942,"end":8073,"callee":{"type":"MemberExpression","start":7942,"end":7966,"object":{"type":"Identifier","start":7942,"end":7944,"name":"i0"},"property":{"type":"Identifier","start":7945,"end":7966,"name":"ɵɵngDeclareInjectable"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":7967,"end":8072,"properties":[{"type":"Property","start":7969,"end":7989,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7969,"end":7979,"name":"minVersion"},"value":{"type":"Literal","start":7981,"end":7989,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":7991,"end":8008,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7991,"end":7998,"name":"version"},"value":{"type":"Literal","start":8000,"end":8008,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":8010,"end":8022,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8010,"end":8018,"name":"ngImport"},"value":{"type":"Identifier","start":8020,"end":8022,"name":"i0"},"kind":"init"},{"type":"Property","start":8024,"end":8050,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8024,"end":8028,"name":"type"},"value":{"type":"Identifier","start":8030,"end":8050,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":8052,"end":8070,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8052,"end":8062,"name":"providedIn"},"value":{"type":"Literal","start":8064,"end":8070,"value":"root","raw":"'root'"},"kind":"init"}]}],"optional":false}}]}},{"type":"ExportNamedDeclaration","start":8077,"end":8109,"declaration":null,"specifiers":[{"type":"ExportSpecifier","start":8086,"end":8106,"local":{"type":"Identifier","start":8086,"end":8106,"name":"MutexFastLockService"},"exported":{"type":"Identifier","start":8086,"end":8106,"name":"MutexFastLockService"}}],"source":null},{"type":"ExpressionStatement","start":8110,"end":8557,"expression":{"type":"CallExpression","start":8110,"end":8556,"callee":{"type":"MemberExpression","start":8110,"end":8137,"object":{"type":"Identifier","start":8110,"end":8112,"name":"i0"},"property":{"type":"Identifier","start":8113,"end":8137,"name":"ɵɵngDeclareClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":8138,"end":8555,"properties":[{"type":"Property","start":8140,"end":8160,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8140,"end":8150,"name":"minVersion"},"value":{"type":"Literal","start":8152,"end":8160,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":8162,"end":8179,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8162,"end":8169,"name":"version"},"value":{"type":"Literal","start":8171,"end":8179,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":8181,"end":8193,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8181,"end":8189,"name":"ngImport"},"value":{"type":"Identifier","start":8191,"end":8193,"name":"i0"},"kind":"init"},{"type":"Property","start":8195,"end":8221,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8195,"end":8199,"name":"type"},"value":{"type":"Identifier","start":8201,"end":8221,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":8223,"end":8357,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8223,"end":8233,"name":"decorators"},"value":{"type":"ArrayExpression","start":8235,"end":8357,"elements":[{"type":"ObjectExpression","start":8236,"end":8356,"properties":[{"type":"Property","start":8250,"end":8266,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8250,"end":8254,"name":"type"},"value":{"type":"Identifier","start":8256,"end":8266,"name":"Injectable"},"kind":"init"},{"type":"Property","start":8280,"end":8346,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8280,"end":8284,"name":"args"},"value":{"type":"ArrayExpression","start":8286,"end":8346,"elements":[{"type":"ObjectExpression","start":8287,"end":8345,"properties":[{"type":"Property","start":8309,"end":8327,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8309,"end":8319,"name":"providedIn"},"value":{"type":"Literal","start":8321,"end":8327,"value":"root","raw":"'root'"},"kind":"init"}]}]},"kind":"init"}]}]},"kind":"init"},{"type":"Property","start":8359,"end":8553,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8359,"end":8373,"name":"ctorParameters"},"value":{"type":"FunctionExpression","start":8375,"end":8553,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8387,"end":8553,"body":[{"type":"ReturnStatement","start":8389,"end":8551,"argument":{"type":"ArrayExpression","start":8396,"end":8550,"elements":[{"type":"ObjectExpression","start":8397,"end":8549,"properties":[{"type":"Property","start":8399,"end":8427,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8399,"end":8403,"name":"type"},"value":{"type":"MemberExpression","start":8405,"end":8427,"object":{"type":"Identifier","start":8405,"end":8407,"name":"i1"},"property":{"type":"Identifier","start":8408,"end":8427,"name":"MutexFastLockConfig"},"computed":false,"optional":false},"kind":"init"},{"type":"Property","start":8429,"end":8547,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8429,"end":8439,"name":"decorators"},"value":{"type":"ArrayExpression","start":8441,"end":8547,"elements":[{"type":"ObjectExpression","start":8442,"end":8546,"properties":[{"type":"Property","start":8464,"end":8476,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8464,"end":8468,"name":"type"},"value":{"type":"Identifier","start":8470,"end":8476,"name":"Inject"},"kind":"init"},{"type":"Property","start":8498,"end":8528,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8498,"end":8502,"name":"args"},"value":{"type":"ArrayExpression","start":8504,"end":8528,"elements":[{"type":"Identifier","start":8505,"end":8527,"name":"MUTEX_FAST_LOCK_CONFIG"}]},"kind":"init"}]}]},"kind":"init"}]}]}}]}},"kind":"init"}]}],"optional":false}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUU5QyxNQUdhLG9CQUFvQjtJQU9vQjtJQUwzQyxTQUFTLENBQVM7SUFDbEIsUUFBUSxDQUFTO0lBQ2pCLFFBQVEsQ0FBUztJQUV6QixZQUNtRCxPQUE0QjtRQUE1QixZQUFPLEdBQVAsT0FBTyxDQUFxQjtRQUU3RSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUUzQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUU7WUFDbEQsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBRWIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzVDLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FB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bmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuaW1wb3J0IHsgTXV0ZXhMb2NrU3RhdHMgfSBmcm9tICcuL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBMb2NrSXRlbSB9IGZyb20gJy4vbW9kZWxzL2xvY2staXRlbSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgX2NsaWVudElkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3lQcmVmaXg6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KE1VVEVYX0ZBU1RfTE9DS19DT05GSUcpIHByaXZhdGUgcmVhZG9ubHkgX2NvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyxcclxuICApIHtcclxuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xyXG4gICAgdGhpcy5feFByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWF8nO1xyXG4gICAgdGhpcy5feVByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWV8nO1xyXG5cclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICB2YXIgYXJyID0gW107XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxyXG4gICAgICAgICAgfHwgbG9jYWxTdG9yYWdlLmtleShpKS5pbmRleE9mKHRoYXQuX3lQcmVmaXgpID09IDApIHtcclxuICAgICAgICAgIGFyci5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhcnJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG5cclxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XHJcblxyXG4gICAgbGV0IHhMb2NrID0gdGhhdC5feFByZWZpeCArIGtleTtcclxuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XHJcblxyXG4gICAgbGV0IGxvY2tTdGF0czogTXV0ZXhMb2NrU3RhdHMgPSBuZXcgTXV0ZXhMb2NrU3RhdHMoKTtcclxuXHJcbiAgICB0aGF0LnJlc2V0U3RhdHMobG9ja1N0YXRzKTtcclxuXHJcbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XHJcblxyXG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgIC8vcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxNdXRleExvY2tTdGF0cz4oc3Vic2NyaWJlciA9PiB7XHJcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxyXG4gICAgICAvLyByZWN1cnNpdmUgY2FsbHMgc28gdGhhdCB3ZSBjYW4gdGltZW91dCBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgbG9jaygpIGFuZFxyXG4gICAgICAvLyBub3QgZWFjaCBzdWJzZXF1ZW50IGNhbGwuICBUaGVyZWZvcmUsIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBoZXJlIHdpdGhpblxyXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxyXG4gICAgICBsZXQgYWNxdWlyZUxvY2sgPSBmdW5jdGlvbiBhY3F1aXJlTG9jayhrZXkpIHtcclxuXHJcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcclxuICAgICAgICB0aGF0Ll9yZWxlYXNlRXhwaXJlZExvY2soeUxvY2spO1xyXG5cclxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XHJcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBvbiBcIiVzXCIgY291bGQgbm90IGJlIGFjcXVpcmVkIHdpdGhpbiAlc21zIGJ5IEZhc3RNdXRleCBjbGllbnQgXCIlc1wiJywga2V5LCB0aW1lb3V0LCB0aGF0Ll9jbGllbnRJZCk7XHJcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAvLyBpZiB5IGV4aXN0cywgYW5vdGhlciBjbGllbnQgaXMgZ2V0dGluZyBhIGxvY2ssIHNvIHJldHJ5IGluIGEgYml0XHJcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgIGlmIChsc1kpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBleGlzdHMgb24gWSAoJXMpLCByZXN0YXJ0aW5nLi4uJywgbHNZKTtcclxuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcclxuICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFzayBmb3IgaW5uZXIgbG9ja1xyXG4gICAgICAgIHRoYXQuX3NldEl0ZW0oeUxvY2ssIHRoYXQuX2NsaWVudElkLCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgLy8gaWYgeCB3YXMgY2hhbmdlZCwgYW5vdGhlciBjbGllbnQgaXMgY29udGVuZGluZyBmb3IgYW4gaW5uZXIgbG9ja1xyXG4gICAgICAgIHZhciBsc1ggPSB0aGF0Ll9nZXRJdGVtKHhMb2NrLCB0aW1lb3V0KTtcclxuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCsrO1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGNvbnRlbnRpb24gZGV0ZWN0ZWQuIFg9XCIlc1wiJywgbHNYKTtcclxuXHJcbiAgICAgICAgICAvLyBHaXZlIGVub3VnaCB0aW1lIGZvciBjcml0aWNhbCBzZWN0aW9uOlxyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAobHNZID09PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSBsb2NrXHJcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcclxuICAgICAgICAgICAgICB0aGF0LnJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlciwgbG9ja1N0YXRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXHJcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QrKztcclxuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjcXVpcmVMb2NrKGtleSk7XHJcbiAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG5cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vIGNvbnRlbnRpb246XHJcbiAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBhY3F1aXJlZCBhIGxvY2sgb24gXCIlc1wiIHdpdGggbm8gY29udGVudGlvbicsIHRoYXQuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWxlYXNlKGtleSkge1xyXG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuXHJcbiAgICBsZXQgeCA9IHRoaXMuX3hQcmVmaXggKyBrZXk7XHJcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHkpO1xyXG5cclxuICAgIC8vdGhhdC5sb2NrU3RhdHMubG9ja0VuZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgLy90aGF0LmxvY2tTdGF0cy5sb2NrRHVyYXRpb24gPSB0aGF0LmxvY2tTdGF0cy5sb2NrRW5kIC0gdGhhdC5sb2NrU3RhdHMubG9ja1N0YXJ0O1xyXG5cclxuICAgIC8vbGV0IHJldFN0YXRzID0gYW5ndWxhci5jb3B5KHRoYXQubG9ja1N0YXRzKTtcclxuXHJcbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xyXG5cclxuICAgIC8vcmV0dXJuIHJldFN0YXRzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZ2VuZXJhdGVSYW5kb21JZCgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XHJcbiAgICBsb2NrU3RhdHMucmVzdGFydENvdW50ID0gMDtcclxuICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QgPSAwO1xyXG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XHJcbiAgICBsb2NrU3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gMDtcclxuICAgIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8TXV0ZXhMb2NrU3RhdHM+LCBzdGF0czogTXV0ZXhMb2NrU3RhdHMpIHtcclxuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgc3RhdHMuYWNxdWlyZUVuZCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gc3RhdHMuYWNxdWlyZUVuZCAtIHN0YXRzLmFjcXVpcmVTdGFydDtcclxuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3Vic2NyaWJlci5uZXh0KHN0YXRzKTtcclxuICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXHJcbiAgICogdGhhdCB3ZSBjYW4gZXhwaXJlIGl0IGluIHRoZSBmdXR1cmUpIGFuZCBqc29uLnN0cmluZ2lmeSdzIGl0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XHJcbiAgICBsZXQgbG9ja0l0ZW0gPSBuZXcgTG9ja0l0ZW0oKTtcclxuICAgIGxvY2tJdGVtLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShsb2NrSXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIEpTT04gZW5jb2RlZCB2YWx1ZXMgc2V0IGluIGxvY2FsU3RvcmFnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2dldEl0ZW0oa2V5LCB0aW1lb3V0KSB7XHJcbiAgICB2YXIgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblxyXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcclxuICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tJdGVtLmV4cGlyZXNBdCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnRmFzdE11dGV4IGNsaWVudCBcIiVzXCIgcmVtb3ZlZCBhbiBleHBpcmVkIHJlY29yZCBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxvY2tJdGVtLmNsaWVudElkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfcmVsZWFzZUV4cGlyZWRMb2NrKGtleTogc3RyaW5nKXtcclxuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xyXG5cclxuICAgIGlmIChsb2NrSXRlbS5leHBpcmVzQXQgPD0gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","start":8558,"end":27356}]},"code":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nclass MutexFastLockService {\n    _config;\n    _clientId;\n    _xPrefix;\n    _yPrefix;\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, deps: [{ token: MUTEX_FAST_LOCK_CONFIG }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, providedIn: 'root' });\n}\nexport { MutexFastLockService };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: function () { return [{ type: i1.MutexFastLockConfig, decorators: [{\n                    type: Inject,\n                    args: [MUTEX_FAST_LOCK_CONFIG]\n                }] }]; } });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUU5QyxNQUdhLG9CQUFvQjtJQU9vQjtJQUwzQyxTQUFTLENBQVM7SUFDbEIsUUFBUSxDQUFTO0lBQ2pCLFFBQVEsQ0FBUztJQUV6QixZQUNtRCxPQUE0QjtRQUE1QixZQUFPLEdBQVAsT0FBTyxDQUFxQjtRQUU3RSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUUzQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUU7WUFDbEQsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBRWIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzVDLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FB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bmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuaW1wb3J0IHsgTXV0ZXhMb2NrU3RhdHMgfSBmcm9tICcuL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBMb2NrSXRlbSB9IGZyb20gJy4vbW9kZWxzL2xvY2staXRlbSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgX2NsaWVudElkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3lQcmVmaXg6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KE1VVEVYX0ZBU1RfTE9DS19DT05GSUcpIHByaXZhdGUgcmVhZG9ubHkgX2NvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyxcclxuICApIHtcclxuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xyXG4gICAgdGhpcy5feFByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWF8nO1xyXG4gICAgdGhpcy5feVByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWV8nO1xyXG5cclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICB2YXIgYXJyID0gW107XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxyXG4gICAgICAgICAgfHwgbG9jYWxTdG9yYWdlLmtleShpKS5pbmRleE9mKHRoYXQuX3lQcmVmaXgpID09IDApIHtcclxuICAgICAgICAgIGFyci5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhcnJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG5cclxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XHJcblxyXG4gICAgbGV0IHhMb2NrID0gdGhhdC5feFByZWZpeCArIGtleTtcclxuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XHJcblxyXG4gICAgbGV0IGxvY2tTdGF0czogTXV0ZXhMb2NrU3RhdHMgPSBuZXcgTXV0ZXhMb2NrU3RhdHMoKTtcclxuXHJcbiAgICB0aGF0LnJlc2V0U3RhdHMobG9ja1N0YXRzKTtcclxuXHJcbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XHJcblxyXG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgIC8vcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxNdXRleExvY2tTdGF0cz4oc3Vic2NyaWJlciA9PiB7XHJcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxyXG4gICAgICAvLyByZWN1cnNpdmUgY2FsbHMgc28gdGhhdCB3ZSBjYW4gdGltZW91dCBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgbG9jaygpIGFuZFxyXG4gICAgICAvLyBub3QgZWFjaCBzdWJzZXF1ZW50IGNhbGwuICBUaGVyZWZvcmUsIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBoZXJlIHdpdGhpblxyXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxyXG4gICAgICBsZXQgYWNxdWlyZUxvY2sgPSBmdW5jdGlvbiBhY3F1aXJlTG9jayhrZXkpIHtcclxuXHJcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcclxuICAgICAgICB0aGF0Ll9yZWxlYXNlRXhwaXJlZExvY2soeUxvY2spO1xyXG5cclxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XHJcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBvbiBcIiVzXCIgY291bGQgbm90IGJlIGFjcXVpcmVkIHdpdGhpbiAlc21zIGJ5IEZhc3RNdXRleCBjbGllbnQgXCIlc1wiJywga2V5LCB0aW1lb3V0LCB0aGF0Ll9jbGllbnRJZCk7XHJcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAvLyBpZiB5IGV4aXN0cywgYW5vdGhlciBjbGllbnQgaXMgZ2V0dGluZyBhIGxvY2ssIHNvIHJldHJ5IGluIGEgYml0XHJcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgIGlmIChsc1kpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBleGlzdHMgb24gWSAoJXMpLCByZXN0YXJ0aW5nLi4uJywgbHNZKTtcclxuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcclxuICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFzayBmb3IgaW5uZXIgbG9ja1xyXG4gICAgICAgIHRoYXQuX3NldEl0ZW0oeUxvY2ssIHRoYXQuX2NsaWVudElkLCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgLy8gaWYgeCB3YXMgY2hhbmdlZCwgYW5vdGhlciBjbGllbnQgaXMgY29udGVuZGluZyBmb3IgYW4gaW5uZXIgbG9ja1xyXG4gICAgICAgIHZhciBsc1ggPSB0aGF0Ll9nZXRJdGVtKHhMb2NrLCB0aW1lb3V0KTtcclxuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCsrO1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGNvbnRlbnRpb24gZGV0ZWN0ZWQuIFg9XCIlc1wiJywgbHNYKTtcclxuXHJcbiAgICAgICAgICAvLyBHaXZlIGVub3VnaCB0aW1lIGZvciBjcml0aWNhbCBzZWN0aW9uOlxyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAobHNZID09PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSBsb2NrXHJcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcclxuICAgICAgICAgICAgICB0aGF0LnJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlciwgbG9ja1N0YXRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXHJcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QrKztcclxuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjcXVpcmVMb2NrKGtleSk7XHJcbiAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG5cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vIGNvbnRlbnRpb246XHJcbiAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBhY3F1aXJlZCBhIGxvY2sgb24gXCIlc1wiIHdpdGggbm8gY29udGVudGlvbicsIHRoYXQuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWxlYXNlKGtleSkge1xyXG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuXHJcbiAgICBsZXQgeCA9IHRoaXMuX3hQcmVmaXggKyBrZXk7XHJcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHkpO1xyXG5cclxuICAgIC8vdGhhdC5sb2NrU3RhdHMubG9ja0VuZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgLy90aGF0LmxvY2tTdGF0cy5sb2NrRHVyYXRpb24gPSB0aGF0LmxvY2tTdGF0cy5sb2NrRW5kIC0gdGhhdC5sb2NrU3RhdHMubG9ja1N0YXJ0O1xyXG5cclxuICAgIC8vbGV0IHJldFN0YXRzID0gYW5ndWxhci5jb3B5KHRoYXQubG9ja1N0YXRzKTtcclxuXHJcbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xyXG5cclxuICAgIC8vcmV0dXJuIHJldFN0YXRzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZ2VuZXJhdGVSYW5kb21JZCgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XHJcbiAgICBsb2NrU3RhdHMucmVzdGFydENvdW50ID0gMDtcclxuICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QgPSAwO1xyXG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XHJcbiAgICBsb2NrU3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gMDtcclxuICAgIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8TXV0ZXhMb2NrU3RhdHM+LCBzdGF0czogTXV0ZXhMb2NrU3RhdHMpIHtcclxuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgc3RhdHMuYWNxdWlyZUVuZCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gc3RhdHMuYWNxdWlyZUVuZCAtIHN0YXRzLmFjcXVpcmVTdGFydDtcclxuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3Vic2NyaWJlci5uZXh0KHN0YXRzKTtcclxuICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXHJcbiAgICogdGhhdCB3ZSBjYW4gZXhwaXJlIGl0IGluIHRoZSBmdXR1cmUpIGFuZCBqc29uLnN0cmluZ2lmeSdzIGl0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XHJcbiAgICBsZXQgbG9ja0l0ZW0gPSBuZXcgTG9ja0l0ZW0oKTtcclxuICAgIGxvY2tJdGVtLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShsb2NrSXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIEpTT04gZW5jb2RlZCB2YWx1ZXMgc2V0IGluIGxvY2FsU3RvcmFnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2dldEl0ZW0oa2V5LCB0aW1lb3V0KSB7XHJcbiAgICB2YXIgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblxyXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcclxuICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tJdGVtLmV4cGlyZXNBdCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnRmFzdE11dGV4IGNsaWVudCBcIiVzXCIgcmVtb3ZlZCBhbiBleHBpcmVkIHJlY29yZCBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxvY2tJdGVtLmNsaWVudElkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfcmVsZWFzZUV4cGlyZWRMb2NrKGtleTogc3RyaW5nKXtcclxuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xyXG5cclxuICAgIGlmIChsb2NrSXRlbS5leHBpcmVzQXQgPD0gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","rxjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs"],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nclass MutexFastLockService {\n    _config;\n    _clientId;\n    _xPrefix;\n    _yPrefix;\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, deps: [{ token: MUTEX_FAST_LOCK_CONFIG }], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, providedIn: 'root' });\n}\nexport { MutexFastLockService };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: function () { return [{ type: i1.MutexFastLockConfig, decorators: [{\n                    type: Inject,\n                    args: [MUTEX_FAST_LOCK_CONFIG]\n                }] }]; } });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUU5QyxNQUdhLG9CQUFvQjtJQU9vQjtJQUwzQyxTQUFTLENBQVM7SUFDbEIsUUFBUSxDQUFTO0lBQ2pCLFFBQVEsQ0FBUztJQUV6QixZQUNtRCxPQUE0QjtRQUE1QixZQUFPLEdBQVAsT0FBTyxDQUFxQjtRQUU3RSxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDM0MsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUUzQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUU7WUFDbEQsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBRWIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzVDLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FB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bmplY3QsIEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tICcuL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnJztcclxuaW1wb3J0IHsgTXV0ZXhMb2NrU3RhdHMgfSBmcm9tICcuL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBMb2NrSXRlbSB9IGZyb20gJy4vbW9kZWxzL2xvY2staXRlbSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XHJcblxyXG4gIHByaXZhdGUgX2NsaWVudElkOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3lQcmVmaXg6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBASW5qZWN0KE1VVEVYX0ZBU1RfTE9DS19DT05GSUcpIHByaXZhdGUgcmVhZG9ubHkgX2NvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyxcclxuICApIHtcclxuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xyXG4gICAgdGhpcy5feFByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWF8nO1xyXG4gICAgdGhpcy5feVByZWZpeCA9IF9jb25maWcubG9ja1ByZWZpeCArICdfWV8nO1xyXG5cclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICB2YXIgYXJyID0gW107XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxyXG4gICAgICAgICAgfHwgbG9jYWxTdG9yYWdlLmtleShpKS5pbmRleE9mKHRoYXQuX3lQcmVmaXgpID09IDApIHtcclxuICAgICAgICAgIGFyci5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShhcnJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG5cclxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XHJcblxyXG4gICAgbGV0IHhMb2NrID0gdGhhdC5feFByZWZpeCArIGtleTtcclxuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XHJcblxyXG4gICAgbGV0IGxvY2tTdGF0czogTXV0ZXhMb2NrU3RhdHMgPSBuZXcgTXV0ZXhMb2NrU3RhdHMoKTtcclxuXHJcbiAgICB0aGF0LnJlc2V0U3RhdHMobG9ja1N0YXRzKTtcclxuXHJcbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XHJcblxyXG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgIC8vcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxNdXRleExvY2tTdGF0cz4oc3Vic2NyaWJlciA9PiB7XHJcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxyXG4gICAgICAvLyByZWN1cnNpdmUgY2FsbHMgc28gdGhhdCB3ZSBjYW4gdGltZW91dCBiYXNlZCBvbiB0aGUgb3JpZ2luYWwgbG9jaygpIGFuZFxyXG4gICAgICAvLyBub3QgZWFjaCBzdWJzZXF1ZW50IGNhbGwuICBUaGVyZWZvcmUsIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBoZXJlIHdpdGhpblxyXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxyXG4gICAgICBsZXQgYWNxdWlyZUxvY2sgPSBmdW5jdGlvbiBhY3F1aXJlTG9jayhrZXkpIHtcclxuXHJcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcclxuICAgICAgICB0aGF0Ll9yZWxlYXNlRXhwaXJlZExvY2soeUxvY2spO1xyXG5cclxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XHJcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IHRpbWVvdXQpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBvbiBcIiVzXCIgY291bGQgbm90IGJlIGFjcXVpcmVkIHdpdGhpbiAlc21zIGJ5IEZhc3RNdXRleCBjbGllbnQgXCIlc1wiJywga2V5LCB0aW1lb3V0LCB0aGF0Ll9jbGllbnRJZCk7XHJcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xyXG5cclxuICAgICAgICAvLyBpZiB5IGV4aXN0cywgYW5vdGhlciBjbGllbnQgaXMgZ2V0dGluZyBhIGxvY2ssIHNvIHJldHJ5IGluIGEgYml0XHJcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgIGlmIChsc1kpIHtcclxuICAgICAgICAgIHRoYXQuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnTG9jayBleGlzdHMgb24gWSAoJXMpLCByZXN0YXJ0aW5nLi4uJywgbHNZKTtcclxuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcclxuICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFzayBmb3IgaW5uZXIgbG9ja1xyXG4gICAgICAgIHRoYXQuX3NldEl0ZW0oeUxvY2ssIHRoYXQuX2NsaWVudElkLCB0aW1lb3V0KTtcclxuXHJcbiAgICAgICAgLy8gaWYgeCB3YXMgY2hhbmdlZCwgYW5vdGhlciBjbGllbnQgaXMgY29udGVuZGluZyBmb3IgYW4gaW5uZXIgbG9ja1xyXG4gICAgICAgIHZhciBsc1ggPSB0aGF0Ll9nZXRJdGVtKHhMb2NrLCB0aW1lb3V0KTtcclxuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCsrO1xyXG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGNvbnRlbnRpb24gZGV0ZWN0ZWQuIFg9XCIlc1wiJywgbHNYKTtcclxuXHJcbiAgICAgICAgICAvLyBHaXZlIGVub3VnaCB0aW1lIGZvciBjcml0aWNhbCBzZWN0aW9uOlxyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBpZiAobHNZID09PSB0aGF0Ll9jbGllbnRJZCkge1xyXG4gICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSBsb2NrXHJcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcclxuICAgICAgICAgICAgICB0aGF0LnJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlciwgbG9ja1N0YXRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXHJcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCsrO1xyXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QrKztcclxuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xyXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjcXVpcmVMb2NrKGtleSk7XHJcbiAgICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG5cclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vIGNvbnRlbnRpb246XHJcbiAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBhY3F1aXJlZCBhIGxvY2sgb24gXCIlc1wiIHdpdGggbm8gY29udGVudGlvbicsIHRoYXQuX2NsaWVudElkLCBrZXkpO1xyXG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyByZWxlYXNlKGtleSkge1xyXG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuXHJcbiAgICBsZXQgeCA9IHRoaXMuX3hQcmVmaXggKyBrZXk7XHJcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHkpO1xyXG5cclxuICAgIC8vdGhhdC5sb2NrU3RhdHMubG9ja0VuZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgLy90aGF0LmxvY2tTdGF0cy5sb2NrRHVyYXRpb24gPSB0aGF0LmxvY2tTdGF0cy5sb2NrRW5kIC0gdGhhdC5sb2NrU3RhdHMubG9ja1N0YXJ0O1xyXG5cclxuICAgIC8vbGV0IHJldFN0YXRzID0gYW5ndWxhci5jb3B5KHRoYXQubG9ja1N0YXRzKTtcclxuXHJcbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xyXG5cclxuICAgIC8vcmV0dXJuIHJldFN0YXRzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZ2VuZXJhdGVSYW5kb21JZCgpIHtcclxuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XHJcbiAgICBsb2NrU3RhdHMucmVzdGFydENvdW50ID0gMDtcclxuICAgIGxvY2tTdGF0cy5sb2Nrc0xvc3QgPSAwO1xyXG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XHJcbiAgICBsb2NrU3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gMDtcclxuICAgIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8TXV0ZXhMb2NrU3RhdHM+LCBzdGF0czogTXV0ZXhMb2NrU3RhdHMpIHtcclxuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgc3RhdHMuYWNxdWlyZUVuZCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3RhdHMuYWNxdWlyZUR1cmF0aW9uID0gc3RhdHMuYWNxdWlyZUVuZCAtIHN0YXRzLmFjcXVpcmVTdGFydDtcclxuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xyXG4gICAgc3Vic2NyaWJlci5uZXh0KHN0YXRzKTtcclxuICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXHJcbiAgICogdGhhdCB3ZSBjYW4gZXhwaXJlIGl0IGluIHRoZSBmdXR1cmUpIGFuZCBqc29uLnN0cmluZ2lmeSdzIGl0XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XHJcbiAgICBsZXQgbG9ja0l0ZW0gPSBuZXcgTG9ja0l0ZW0oKTtcclxuICAgIGxvY2tJdGVtLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShsb2NrSXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGVscGVyIGZ1bmN0aW9uIHRvIHBhcnNlIEpTT04gZW5jb2RlZCB2YWx1ZXMgc2V0IGluIGxvY2FsU3RvcmFnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgX2dldEl0ZW0oa2V5LCB0aW1lb3V0KSB7XHJcbiAgICB2YXIgaXRlbSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcblxyXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcclxuICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tJdGVtLmV4cGlyZXNBdCA+PSB0aW1lb3V0KSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpZy5kZWJ1Z0VuYWJsZWQgPz8gY29uc29sZS5kZWJ1ZygnRmFzdE11dGV4IGNsaWVudCBcIiVzXCIgcmVtb3ZlZCBhbiBleHBpcmVkIHJlY29yZCBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcclxuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxvY2tJdGVtLmNsaWVudElkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfcmVsZWFzZUV4cGlyZWRMb2NrKGtleTogc3RyaW5nKXtcclxuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHJcbiAgICBpZiAoIWl0ZW0pIHJldHVybiBudWxsO1xyXG5cclxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xyXG5cclxuICAgIGlmIChsb2NrSXRlbS5leHBpcmVzQXQgPD0gbmV3IERhdGUoKS5nZXRUaW1lKCkpIHtcclxuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XHJcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"mutex-fast-lock.service.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.service.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[15,0,0,15],[17,0,0,17],[27,0,0,27],[29,0,0,29],[35,0,0,35],[50,0,0,50],[51,0,0,51]],[[0,0,1,0],[7,0,1,7],[9,0,1,9],[31,0,1,31],[33,0,1,33],[39,0,1,39],[74,0,1,74],[75,0,1,75]],[[0,0,3,0],[7,0,3,7],[9,0,3,9],[23,0,3,23],[25,0,3,25],[31,0,3,31],[58,0,3,58],[59,0,3,59]],[[0,0,4,0],[7,0,4,7],[9,0,4,9],[19,0,4,19],[21,0,4,33],[27,0,4,39],[33,0,4,45],[34,0,4,46]],[[0,0,5,0],[7,0,5,7],[9,0,5,9],[17,0,5,17],[19,0,5,19],[25,0,5,25],[45,0,5,45],[46,0,5,46]],[],[],[[0,0,7,0],[6,0,10,13],[26,0,10,33]],[[4,0,17,53]],[[4,0,12,10],[13,0,12,19],[14,0,12,28]],[[4,0,13,10],[12,0,13,18],[13,0,13,27]],[[4,0,14,10],[12,0,14,18],[13,0,14,27]],[[4,0,16,2],[16,0,17,53],[23,0,17,81]],[[8,0,17,53],[20,0,17,60],[23,0,17,53],[30,0,17,60],[31,0,17,81]],[[8,0,19,4],[12,0,19,8],[13,0,19,9],[22,0,19,18],[25,0,19,21],[29,0,19,25],[30,0,19,26],[47,0,19,43],[49,0,19,45],[50,0,19,46]],[[8,0,20,4],[12,0,20,8],[13,0,20,9],[21,0,20,17],[24,0,20,20],[31,0,20,27],[32,0,20,28],[42,0,20,38],[45,0,20,41],[50,0,20,46],[51,0,20,47]],[[8,0,21,4],[12,0,21,8],[13,0,21,9],[21,0,21,17],[24,0,21,20],[31,0,21,27],[32,0,21,28],[42,0,21,38],[45,0,21,41],[50,0,21,46],[51,0,21,47]],[[8,0,23,4],[12,0,23,8],[16,0,23,12],[19,0,23,15],[23,0,23,19],[24,0,23,20]],[[8,0,24,4],[14,0,24,10],[15,0,24,11],[31,0,24,27],[32,0,24,28],[46,0,24,42],[48,0,24,44],[58,0,24,54],[60,0,24,56]],[[12,0,25,6],[16,0,25,10],[19,0,25,13],[22,0,25,16],[24,0,25,18],[25,0,25,19]],[[12,0,27,6],[17,0,27,11],[21,0,27,15],[22,0,27,16],[25,0,27,19],[26,0,27,20],[28,0,27,22],[29,0,27,23],[32,0,27,26],[44,0,27,38],[45,0,27,39],[51,0,27,45],[53,0,27,47],[54,0,27,48],[56,0,27,50],[58,0,27,52]],[[16,0,28,8],[20,0,28,12],[32,0,28,24],[33,0,28,25],[36,0,28,28],[37,0,28,29],[38,0,28,30],[39,0,28,31],[40,0,28,32],[47,0,28,39],[48,0,28,40],[52,0,28,44],[53,0,28,45],[61,0,28,53],[62,0,28,54],[66,0,28,58],[67,0,28,59]],[[23,0,29,13],[35,0,29,25],[36,0,29,26],[39,0,29,29],[40,0,29,30],[41,0,29,31],[42,0,29,32],[43,0,29,33],[50,0,29,40],[51,0,29,41],[55,0,29,45],[56,0,29,46],[64,0,29,54],[65,0,29,55],[69,0,29,59],[70,0,29,60],[72,0,29,62]],[[20,0,30,10],[23,0,30,13],[24,0,30,14],[28,0,30,18],[29,0,30,19],[41,0,30,31],[42,0,30,32],[45,0,30,35],[46,0,30,36],[47,0,30,37],[48,0,30,38],[49,0,30,39],[50,0,30,40]],[[17,0,31,9]],[[13,0,32,7]],[[12,0,34,6],[17,0,34,11],[21,0,34,15],[22,0,34,16],[25,0,34,19],[26,0,34,20],[28,0,34,22],[29,0,34,23],[32,0,34,26],[35,0,34,29],[36,0,34,30],[42,0,34,36],[44,0,34,38],[45,0,34,39],[47,0,34,41],[49,0,34,43]],[[16,0,35,8],[28,0,35,20],[29,0,35,21],[39,0,35,31],[40,0,35,32],[43,0,35,35],[44,0,35,36],[45,0,35,37],[46,0,35,38],[47,0,35,39],[48,0,35,40]],[[13,0,36,7]],[[8,0,37,4],[9,0,37,5],[10,0,37,6],[11,0,37,7]],[[4,0,38,2],[5,0,38,3]],[[4,0,40,9],[8,0,40,13],[9,0,40,14],[12,0,40,25],[14,0,40,27],[24,0,40,45],[25,0,40,46],[26,0,40,47]],[[8,0,41,4],[12,0,41,8],[16,0,41,12],[19,0,41,15],[23,0,41,19],[24,0,41,20]],[[8,0,43,4],[12,0,43,8],[19,0,43,15],[23,0,43,19],[24,0,43,20],[25,0,43,21]],[[12,0,43,23],[19,0,43,30],[22,0,43,33],[26,0,43,37],[27,0,43,38],[34,0,43,45],[35,0,43,46],[42,0,43,53],[43,0,43,54]],[[8,0,45,4],[12,0,45,8],[17,0,45,13],[20,0,45,16],[24,0,45,20],[25,0,45,21],[33,0,45,29],[36,0,45,32],[39,0,45,35],[40,0,45,36]],[[8,0,46,4],[12,0,46,8],[17,0,46,13],[20,0,46,16],[24,0,46,20],[25,0,46,21],[33,0,46,29],[36,0,46,32],[39,0,46,35],[40,0,46,36]],[[8,0,48,4],[12,0,48,8],[21,0,48,17],[24,0,48,36],[28,0,48,40],[42,0,48,54],[44,0,48,56],[45,0,48,57]],[[8,0,50,4],[12,0,50,8],[13,0,50,9],[23,0,50,19],[24,0,50,20],[33,0,50,29],[34,0,50,30],[35,0,50,31]],[[8,0,52,4],[12,0,52,8],[13,0,52,9],[20,0,52,16],[21,0,52,17],[33,0,52,29],[37,0,52,33],[44,0,52,40],[45,0,52,41],[50,0,52,46],[51,0,52,47],[117,0,52,113],[119,0,52,115],[122,0,52,118],[124,0,52,120],[128,0,52,124],[129,0,52,125],[138,0,52,134],[139,0,52,135],[140,0,52,136]],[[8,0,54,4],[17,0,54,13],[18,0,54,14],[30,0,54,26],[33,0,54,29],[37,0,54,33],[41,0,54,37],[43,0,54,39],[44,0,54,40],[51,0,54,47],[53,0,54,49],[54,0,54,50]],[[8,0,56,4],[57,0,56,53]],[[8,0,57,4],[15,0,57,11],[19,0,57,15],[29,0,57,25],[30,0,57,42],[40,0,57,52],[41,0,57,53],[43,0,57,55]],[[12,0,58,6],[84,0,58,78]],[[12,0,59,6],[86,0,59,80]],[[12,0,60,6],[86,0,60,80]],[[12,0,61,6],[68,0,61,62]],[[12,0,62,6],[16,0,62,10],[27,0,62,21],[30,0,62,24],[39,0,62,33],[50,0,62,44],[51,0,62,45],[54,0,62,48]],[[16,0,64,8],[20,0,64,12],[21,0,64,13],[40,0,64,32],[41,0,64,33],[46,0,64,38],[47,0,64,39],[48,0,64,40]],[[16,0,65,8],[20,0,65,12],[21,0,65,13],[40,0,65,32],[41,0,65,33],[46,0,65,38],[47,0,65,39],[48,0,65,40]],[[16,0,67,8],[20,0,67,12],[31,0,67,23],[34,0,67,26],[38,0,67,30],[42,0,67,34],[44,0,67,36],[45,0,67,37],[52,0,67,44],[54,0,67,46],[57,0,67,49],[66,0,67,58],[67,0,67,59],[79,0,67,71],[80,0,67,72]],[[16,0,68,8],[20,0,68,12],[31,0,68,23],[35,0,68,27],[42,0,68,34],[44,0,68,36]],[[20,0,69,10],[24,0,69,14],[25,0,69,15],[32,0,69,22],[33,0,69,23],[45,0,69,35],[49,0,69,39],[56,0,69,46],[57,0,69,47],[62,0,69,52],[63,0,69,53],[136,0,69,126],[138,0,69,128],[141,0,69,131],[143,0,69,133],[150,0,69,140],[152,0,69,142],[156,0,69,146],[157,0,69,147],[166,0,69,156],[167,0,69,157],[168,0,69,158]],[[20,0,70,10],[30,0,70,20],[31,0,70,21],[36,0,70,26],[37,0,70,27],[41,0,70,31],[46,0,70,36],[47,0,70,37],[83,0,70,73],[86,0,70,76],[93,0,70,83],[96,0,70,86],[100,0,70,90],[101,0,70,91],[102,0,70,92],[103,0,70,93]],[[17,0,71,9]],[[16,0,73,8],[20,0,73,12],[21,0,73,13],[29,0,73,21],[30,0,73,22],[35,0,73,27],[37,0,73,29],[41,0,73,33],[42,0,73,34],[51,0,73,43],[53,0,73,45],[60,0,73,52],[61,0,73,53],[62,0,73,54]],[[16,0,75,8],[83,0,75,75]],[[16,0,76,8],[20,0,76,12],[23,0,76,15],[26,0,76,18],[30,0,76,22],[31,0,76,23],[39,0,76,31],[40,0,76,32],[45,0,76,37],[47,0,76,39],[54,0,76,46],[55,0,76,47],[56,0,76,48]],[[16,0,77,8],[20,0,77,12],[23,0,77,15],[25,0,77,17]],[[20,0,78,10],[24,0,78,14],[25,0,78,15],[32,0,78,22],[33,0,78,23],[45,0,78,35],[49,0,78,39],[56,0,78,46],[57,0,78,47],[62,0,78,52],[63,0,78,53],[101,0,78,91],[103,0,78,93],[106,0,78,96],[107,0,78,97],[108,0,78,98]],[[20,0,79,10],[29,0,79,19],[30,0,79,20],[42,0,79,32],[44,0,79,34],[45,0,79,35]],[[20,0,80,10],[30,0,80,20],[31,0,80,21]],[[24,0,81,12],[31,0,81,19],[42,0,81,30],[43,0,81,31],[46,0,81,34],[47,0,81,35],[48,0,81,36]],[[20,0,82,10],[21,0,82,11],[23,0,82,13],[25,0,82,15],[26,0,82,16],[27,0,82,17]],[[20,0,83,10],[27,0,83,17]],[[17,0,84,9]],[[16,0,86,8],[37,0,86,29]],[[16,0,87,8],[20,0,87,12],[21,0,87,13],[29,0,87,21],[30,0,87,22],[35,0,87,27],[37,0,87,29],[41,0,87,33],[42,0,87,34],[51,0,87,43],[53,0,87,45],[60,0,87,52],[61,0,87,53],[62,0,87,54]],[[16,0,89,8],[83,0,89,75]],[[16,0,90,8],[20,0,90,12],[23,0,90,15],[26,0,90,18],[30,0,90,22],[31,0,90,23],[39,0,90,31],[40,0,90,32],[45,0,90,37],[47,0,90,39],[54,0,90,46],[55,0,90,47],[56,0,90,48]],[[16,0,91,8],[20,0,91,12],[23,0,91,15],[28,0,91,20],[32,0,91,24],[33,0,91,25],[42,0,91,34],[44,0,91,36]],[[20,0,92,10],[29,0,92,19],[30,0,92,20],[45,0,92,35],[47,0,92,37],[48,0,92,38]],[[20,0,93,10],[24,0,93,14],[25,0,93,15],[32,0,93,22],[33,0,93,23],[45,0,93,35],[49,0,93,39],[56,0,93,46],[57,0,93,47],[62,0,93,52],[63,0,93,53],[97,0,93,87],[99,0,93,89],[102,0,93,92],[103,0,93,93],[104,0,93,94]],[[20,0,95,10],[61,0,95,51]],[[20,0,96,10],[30,0,96,20],[31,0,96,21]],[[24,0,97,12],[27,0,97,15],[30,0,97,18],[34,0,97,22],[35,0,97,23],[43,0,97,31],[44,0,97,32],[49,0,97,37],[51,0,97,39],[58,0,97,46],[59,0,97,47],[60,0,97,48]],[[24,0,98,12],[28,0,98,16],[31,0,98,19],[36,0,98,24],[40,0,98,28],[41,0,98,29],[50,0,98,38],[52,0,98,40]],[[28,0,99,14],[45,0,99,31]],[[28,0,100,14],[32,0,100,18],[33,0,100,19],[40,0,100,26],[41,0,100,27],[53,0,100,39],[57,0,100,43],[64,0,100,50],[65,0,100,51],[70,0,100,56],[71,0,100,57],[126,0,100,112],[128,0,100,114],[132,0,100,118],[133,0,100,119],[142,0,100,128],[144,0,100,130],[147,0,100,133],[148,0,100,134],[149,0,100,135]],[[28,0,101,14],[32,0,101,18],[33,0,101,19],[49,0,101,35],[50,0,101,36],[60,0,101,46],[62,0,101,48],[71,0,101,57],[72,0,101,58],[73,0,101,59]],[[25,0,102,13]],[[29,0,102,19]],[[28,0,103,14],[74,0,103,60]],[[28,0,104,14],[37,0,104,23],[38,0,104,24],[50,0,104,36],[52,0,104,38],[53,0,104,39]],[[28,0,105,14],[37,0,105,23],[38,0,105,24],[47,0,105,33],[49,0,105,35],[50,0,105,36]],[[28,0,106,14],[32,0,106,18],[33,0,106,19],[40,0,106,26],[41,0,106,27],[53,0,106,39],[57,0,106,43],[64,0,106,50],[65,0,106,51],[70,0,106,56],[71,0,106,57],[166,0,106,152],[168,0,106,154],[172,0,106,158],[173,0,106,159],[182,0,106,168],[184,0,106,170],[187,0,106,173],[189,0,106,175],[192,0,106,178],[193,0,106,179],[194,0,106,180]],[[28,0,107,14],[38,0,107,24],[39,0,107,25]],[[32,0,108,16],[39,0,108,23],[50,0,108,34],[51,0,108,35],[54,0,108,38],[55,0,108,39],[56,0,108,40]],[[28,0,109,14],[29,0,109,15],[31,0,109,17],[33,0,109,19],[34,0,109,20],[35,0,109,21]],[[25,0,110,13]],[[20,0,111,10],[21,0,111,11],[23,0,111,13],[26,0,111,16],[27,0,111,17],[28,0,111,18]],[[20,0,113,10],[27,0,113,17]],[[17,0,114,9]],[[16,0,116,8],[33,0,116,25]],[[16,0,117,8],[20,0,117,12],[21,0,117,13],[28,0,117,20],[29,0,117,21],[41,0,117,33],[45,0,117,37],[52,0,117,44],[53,0,117,45],[58,0,117,50],[59,0,117,51],[125,0,117,117],[127,0,117,119],[131,0,117,123],[132,0,117,124],[141,0,117,133],[143,0,117,135],[146,0,117,138],[147,0,117,139],[148,0,117,140]],[[16,0,118,8],[20,0,118,12],[21,0,118,13],[37,0,118,29],[38,0,118,30],[48,0,118,40],[50,0,118,42],[59,0,118,51],[60,0,118,52],[61,0,118,53]],[[12,0,119,6],[13,0,119,7],[14,0,119,8]],[[12,0,121,6],[23,0,121,17],[24,0,121,18],[27,0,121,21],[28,0,121,22],[29,0,121,23]],[[8,0,123,4],[9,0,123,5],[10,0,123,6],[11,0,123,7]],[[4,0,124,2],[5,0,124,3]],[[4,0,126,9],[11,0,126,16],[12,0,126,17],[15,0,126,20]],[[8,0,127,4],[12,0,127,8],[13,0,127,9],[20,0,127,16],[21,0,127,17],[33,0,127,29],[37,0,127,33],[44,0,127,40],[45,0,127,41],[50,0,127,46],[51,0,127,47],[100,0,127,96],[102,0,127,98],[106,0,127,102],[107,0,127,103],[116,0,127,112],[118,0,127,114],[121,0,127,117],[122,0,127,118],[123,0,127,119]],[[8,0,129,4],[12,0,129,8],[13,0,129,9],[16,0,129,12],[20,0,129,16],[21,0,129,17],[29,0,129,25],[32,0,129,28],[35,0,129,31],[36,0,129,32]],[[8,0,130,4],[12,0,130,8],[13,0,130,9],[16,0,130,12],[20,0,130,16],[21,0,130,17],[29,0,130,25],[32,0,130,28],[35,0,130,31],[36,0,130,32]],[[8,0,131,4],[20,0,131,16],[21,0,131,17],[31,0,131,27],[32,0,131,28],[33,0,131,29],[34,0,131,30],[35,0,131,31]],[[8,0,132,4],[20,0,132,16],[21,0,132,17],[31,0,132,27],[32,0,132,28],[33,0,132,29],[34,0,132,30],[35,0,132,31]],[[8,0,134,4],[56,0,134,52]],[[8,0,135,4],[90,0,135,86]],[[8,0,137,4],[54,0,137,50]],[[8,0,139,4],[28,0,139,24]],[[8,0,141,4],[26,0,141,22]],[[4,0,142,2],[5,0,142,3]],[[4,0,144,10],[21,0,144,27]],[[8,0,145,4],[15,0,145,11],[19,0,145,15],[20,0,145,16],[25,0,145,21],[26,0,145,22],[30,0,145,26],[31,0,145,27],[37,0,145,33],[39,0,145,35],[42,0,145,38],[53,0,145,49],[54,0,145,50],[57,0,145,53],[59,0,145,55],[60,0,145,56]],[[4,0,146,2],[5,0,146,3]],[[4,0,148,10],[14,0,148,20],[15,0,148,21],[24,0,148,46]],[[8,0,149,4],[17,0,149,13],[18,0,149,14],[30,0,149,26],[33,0,149,29],[34,0,149,30],[35,0,149,31]],[[8,0,150,4],[17,0,150,13],[18,0,150,14],[27,0,150,23],[30,0,150,26],[31,0,150,27],[32,0,150,28]],[[8,0,151,4],[17,0,151,13],[18,0,151,14],[33,0,151,29],[36,0,151,32],[37,0,151,33],[38,0,151,34]],[[8,0,152,4],[17,0,152,13],[18,0,152,14],[33,0,152,29],[36,0,152,32],[37,0,152,33],[38,0,152,34]],[[8,0,153,4],[17,0,153,13],[18,0,153,14],[30,0,153,26],[33,0,153,29],[37,0,153,33],[38,0,153,34]],[[4,0,154,2],[5,0,154,3]],[[4,0,156,10],[20,0,156,26],[21,0,156,27],[31,0,156,65],[33,0,156,67],[38,0,156,88]],[[8,0,157,4],[12,0,157,8],[23,0,157,19],[26,0,157,22],[30,0,157,26],[34,0,157,30],[36,0,157,32],[37,0,157,33],[44,0,157,40],[46,0,157,42],[47,0,157,43]],[[8,0,158,4],[13,0,158,9],[14,0,158,10],[24,0,158,20],[27,0,158,23],[38,0,158,34],[39,0,158,35]],[[8,0,159,4],[13,0,159,9],[14,0,159,10],[29,0,159,25],[32,0,159,28],[37,0,159,33],[38,0,159,34],[48,0,159,44],[51,0,159,47],[56,0,159,52],[57,0,159,53],[69,0,159,65],[70,0,159,66]],[[8,0,160,4],[13,0,160,9],[14,0,160,10],[23,0,160,19],[26,0,160,22],[37,0,160,33],[38,0,160,34]],[[8,0,161,4],[18,0,161,14],[19,0,161,15],[23,0,161,19],[24,0,161,20],[29,0,161,25],[30,0,161,26],[31,0,161,27]],[[8,0,162,4],[18,0,162,14],[19,0,162,15],[27,0,162,23],[29,0,162,25],[30,0,162,26]],[[4,0,163,2],[5,0,163,3]],[[4,0,165,2]],[],[],[[7,0,168,5]],[[4,0,169,10],[12,0,169,18],[13,0,169,19],[16,0,169,22],[18,0,169,24],[26,0,169,32],[28,0,169,34],[35,0,169,41]],[[8,0,170,4],[12,0,170,8],[20,0,170,16],[23,0,170,19],[27,0,170,23],[35,0,170,31],[37,0,170,33],[38,0,170,34]],[[8,0,171,4],[16,0,171,12],[17,0,171,13],[25,0,171,21],[28,0,171,24],[36,0,171,32],[37,0,171,33]],[[8,0,172,4],[16,0,172,12],[17,0,172,13],[26,0,172,22],[29,0,172,25],[33,0,172,29],[37,0,172,33],[39,0,172,35],[40,0,172,36],[47,0,172,43],[49,0,172,45],[52,0,172,48],[59,0,172,55],[60,0,172,56]],[[8,0,173,4],[15,0,173,11],[27,0,173,23],[28,0,173,24],[35,0,173,31],[36,0,173,32],[39,0,173,35],[41,0,173,37],[45,0,173,41],[46,0,173,42],[55,0,173,51],[56,0,173,52],[64,0,173,60],[65,0,173,61],[66,0,173,62],[67,0,173,63]],[[4,0,174,2],[5,0,174,3]],[[4,0,176,2]],[],[[7,0,178,5]],[[4,0,179,10],[12,0,179,18],[13,0,179,19],[16,0,179,22],[18,0,179,24],[25,0,179,31]],[[8,0,180,4],[12,0,180,8],[16,0,180,12],[19,0,180,15],[31,0,180,27],[32,0,180,28],[39,0,180,35],[40,0,180,36],[43,0,180,39],[44,0,180,40],[45,0,180,41]],[[8,0,182,4],[12,0,182,8],[13,0,182,9],[17,0,182,13]],[[12,0,182,15],[19,0,182,22],[23,0,182,26],[24,0,182,27]],[[8,0,184,4],[12,0,184,8],[20,0,184,16],[23,0,184,29],[27,0,184,33],[28,0,184,34],[33,0,184,39],[34,0,184,40],[38,0,184,44],[39,0,184,45],[40,0,184,46]],[[8,0,185,4],[12,0,185,8],[16,0,185,12],[20,0,185,16],[22,0,185,18],[23,0,185,19],[30,0,185,26],[32,0,185,28],[35,0,185,31],[43,0,185,39],[44,0,185,40],[53,0,185,49],[57,0,185,53],[64,0,185,60],[66,0,185,62]],[[12,0,186,6],[16,0,186,10],[17,0,186,11],[24,0,186,18],[25,0,186,19],[37,0,186,31],[41,0,186,35],[48,0,186,42],[49,0,186,43],[54,0,186,48],[55,0,186,49],[112,0,186,106],[114,0,186,108],[118,0,186,112],[119,0,186,113],[128,0,186,122],[130,0,186,124],[133,0,186,127],[134,0,186,128],[135,0,186,129]],[[12,0,187,6],[24,0,187,18],[25,0,187,19],[35,0,187,29],[36,0,187,30],[39,0,187,33],[40,0,187,34],[41,0,187,35]],[[12,0,188,6],[19,0,188,13],[23,0,188,17],[24,0,188,18]],[[9,0,189,5]],[[8,0,191,4],[15,0,191,11],[23,0,191,19],[24,0,191,20],[32,0,191,28],[33,0,191,29]],[[4,0,192,2],[5,0,192,3]],[[4,0,194,10],[23,0,194,29],[24,0,194,30],[27,0,194,41]],[[8,0,195,4],[12,0,195,8],[16,0,195,12],[19,0,195,15],[31,0,195,27],[32,0,195,28],[39,0,195,35],[40,0,195,36],[43,0,195,39],[44,0,195,40],[45,0,195,41]],[[8,0,197,4],[12,0,197,8],[13,0,197,9],[17,0,197,13]],[[12,0,197,15],[19,0,197,22],[23,0,197,26],[24,0,197,27]],[[8,0,199,4],[12,0,199,8],[20,0,199,16],[23,0,199,29],[27,0,199,33],[28,0,199,34],[33,0,199,39],[34,0,199,40],[38,0,199,44],[39,0,199,45],[40,0,199,46]],[[8,0,201,4],[12,0,201,8],[20,0,201,16],[21,0,201,17],[30,0,201,26],[34,0,201,30],[38,0,201,34],[42,0,201,38],[44,0,201,40],[45,0,201,41],[52,0,201,48],[54,0,201,50],[56,0,201,52]],[[12,0,202,6],[16,0,202,10],[17,0,202,11],[24,0,202,18],[25,0,202,19],[37,0,202,31],[41,0,202,35],[48,0,202,42],[49,0,202,43],[54,0,202,48],[55,0,202,49],[105,0,202,99],[107,0,202,101],[110,0,202,104],[111,0,202,105],[112,0,202,106]],[[12,0,203,6],[24,0,203,18],[25,0,203,19],[35,0,203,29],[36,0,203,30],[39,0,203,33],[40,0,203,34],[41,0,203,35]],[[9,0,204,5]],[[4,0,205,2],[5,0,205,3]],[[103,0,10,13],[123,0,10,33],[141,0,17,12],[163,0,17,34]],[[107,0,10,13],[127,0,10,33],[141,0,8,14],[147,0,8,20]],[],[[9,0,10,13],[29,0,10,33]],[[91,0,10,13],[111,0,10,33]],[[18,0,7,1],[28,0,7,11]],[[19,0,7,12]],[[20,0,8,2],[30,0,8,12],[32,0,8,14],[38,0,8,20]],[[17,0,9,1]],[],[[26,0,17,5],[32,0,17,11]],[[27,0,17,12],[49,0,17,34]]],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\r\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\r\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\r\nimport { MutexLockStats } from './models/mutex-lock-stats';\r\nimport { Observable, Subscriber } from 'rxjs';\r\nimport { LockItem } from './models/lock-item';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MutexFastLockService {\r\n\r\n  private _clientId: string;\r\n  private _xPrefix: string;\r\n  private _yPrefix: string;\r\n\r\n  constructor(\r\n    @Inject(MUTEX_FAST_LOCK_CONFIG) private readonly _config: MutexFastLockConfig,\r\n  ) {\r\n    this._clientId = this._generateRandomId();\r\n    this._xPrefix = _config.lockPrefix + '_X_';\r\n    this._yPrefix = _config.lockPrefix + '_Y_';\r\n\r\n    let that = this;\r\n    window.addEventListener(\"beforeunload\", function (ev) {\r\n      var arr = [];\r\n\r\n      for (var i = 0; i < localStorage.length; i++) {\r\n        if (localStorage.key(i).indexOf(that._xPrefix) == 0\r\n          || localStorage.key(i).indexOf(that._yPrefix) == 0) {\r\n          arr.push(localStorage.key(i));\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < arr.length; i++) {\r\n        localStorage.removeItem(arr[i]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public lock(key: string, timeout: number = -1) {\r\n    let that = this;\r\n\r\n    if (timeout == -1) timeout = this._config.timeout;\r\n\r\n    let xLock = that._xPrefix + key;\r\n    let yLock = that._yPrefix + key;\r\n\r\n    let lockStats: MutexLockStats = new MutexLockStats();\r\n\r\n    that.resetStats(lockStats);\r\n\r\n    this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\r\n\r\n    lockStats.acquireStart = new Date().getTime();\r\n\r\n    //return new Promise(function (resolve, reject) {\r\n    return new Observable<MutexLockStats>(subscriber => {\r\n      // we need to differentiate between API calls to lock() and our internal\r\n      // recursive calls so that we can timeout based on the original lock() and\r\n      // not each subsequent call.  Therefore, create a new function here within\r\n      // the promise closure that we use for subsequent calls:\r\n      let acquireLock = function acquireLock(key) {\r\n\r\n        that._releaseExpiredLock(xLock);\r\n        that._releaseExpiredLock(yLock);\r\n\r\n        var elapsedTime = new Date().getTime() - lockStats.acquireStart;\r\n        if (elapsedTime >= timeout) {\r\n          that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\r\n          subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\r\n        }\r\n\r\n        that._setItem(xLock, that._clientId, timeout);\r\n\r\n        // if y exists, another client is getting a lock, so retry in a bit\r\n        var lsY = that._getItem(yLock, timeout);\r\n        if (lsY) {\r\n          that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\r\n          lockStats.restartCount++;\r\n          setTimeout(function () {\r\n            return acquireLock(key);\r\n          }, 10);\r\n          return;\r\n        }\r\n\r\n        // ask for inner lock\r\n        that._setItem(yLock, that._clientId, timeout);\r\n\r\n        // if x was changed, another client is contending for an inner lock\r\n        var lsX = that._getItem(xLock, timeout);\r\n        if (lsX !== that._clientId) {\r\n          lockStats.contentionCount++;\r\n          that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\r\n\r\n          // Give enough time for critical section:\r\n          setTimeout(function () {\r\n            lsY = that._getItem(yLock, timeout);\r\n            if (lsY === that._clientId) {\r\n              // we have a lock\r\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\r\n              that.resolveWithStats(subscriber, lockStats);\r\n            } else {\r\n              // we lost the lock, restart the process again\r\n              lockStats.restartCount++;\r\n              lockStats.locksLost++;\r\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\r\n              setTimeout(function () {\r\n                return acquireLock(key);\r\n              }, 10);\r\n            }\r\n          }, 100);\r\n\r\n          return;\r\n        }\r\n\r\n        // no contention:\r\n        that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\r\n        that.resolveWithStats(subscriber, lockStats);\r\n      };\r\n\r\n      acquireLock(key);\r\n\r\n    });\r\n  }\r\n\r\n  public release(key) {\r\n    this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\r\n\r\n    let x = this._xPrefix + key;\r\n    let y = this._yPrefix + key;\r\n    localStorage.removeItem(x);\r\n    localStorage.removeItem(y);\r\n\r\n    //that.lockStats.lockEnd = new Date().getTime();\r\n    //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\r\n\r\n    //let retStats = angular.copy(that.lockStats);\r\n\r\n    //that.resetStats();\r\n\r\n    //return retStats;\r\n  }\r\n\r\n  private _generateRandomId() {\r\n    return Math.floor(Math.random() * 10000000000) + '';\r\n  }\r\n\r\n  private resetStats(lockStats: MutexLockStats) {\r\n    lockStats.restartCount = 0;\r\n    lockStats.locksLost = 0;\r\n    lockStats.contentionCount = 0;\r\n    lockStats.acquireDuration = 0;\r\n    lockStats.acquireStart = null;\r\n  }\r\n\r\n  private resolveWithStats(subscriber: Subscriber<MutexLockStats>, stats: MutexLockStats) {\r\n    var currentTime = new Date().getTime();\r\n    stats.acquireEnd = currentTime;\r\n    stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\r\n    stats.lockStart = currentTime;\r\n    subscriber.next(stats);\r\n    subscriber.complete();\r\n  }\r\n\r\n  /**\r\n   * Helper function to wrap all values in an object that includes the time (so\r\n   * that we can expire it in the future) and json.stringify's it\r\n   */\r\n  private _setItem(key, clientId, timeout) {\r\n    let lockItem = new LockItem();\r\n    lockItem.clientId = clientId;\r\n    lockItem.expiresAt = new Date().getTime() + timeout;\r\n    return localStorage.setItem(key, JSON.stringify(lockItem));\r\n  }\r\n\r\n  /**\r\n   * Helper function to parse JSON encoded values set in localStorage\r\n   */\r\n  private _getItem(key, timeout) {\r\n    var item = localStorage.getItem(key);\r\n\r\n    if (!item) return null;\r\n\r\n    var lockItem = <LockItem>JSON.parse(item);\r\n    if (new Date().getTime() - lockItem.expiresAt >= timeout) {\r\n      this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\r\n      localStorage.removeItem(key);\r\n      return null;\r\n    }\r\n\r\n    return lockItem.clientId;\r\n  }\r\n\r\n  private _releaseExpiredLock(key: string){\r\n    var item = localStorage.getItem(key);\r\n\r\n    if (!item) return null;\r\n\r\n    var lockItem = <LockItem>JSON.parse(item);\r\n\r\n    if (lockItem.expiresAt <= new Date().getTime()) {\r\n      this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\r\n      localStorage.removeItem(key);\r\n    }\r\n  }\r\n}\r\n"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"rxjs":{"assertions":{},"external":true,"id":"rxjs","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./models/mutex-fast-lock-config":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/mutex-lock-stats":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/lock-item":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\lock-item.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":2568,"body":[{"type":"ImportDeclaration","start":0,"end":41,"specifiers":[{"type":"ImportSpecifier","start":9,"end":17,"imported":{"type":"Identifier","start":9,"end":17,"name":"NgModule"},"local":{"type":"Identifier","start":9,"end":17,"name":"NgModule"}}],"source":{"type":"Literal","start":25,"end":40,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":42,"end":117,"specifiers":[{"type":"ImportSpecifier","start":51,"end":73,"imported":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":81,"end":116,"value":"./mutex-fast-lock-config.injector","raw":"\"./mutex-fast-lock-config.injector\""}},{"type":"ImportDeclaration","start":118,"end":154,"specifiers":[{"type":"ImportNamespaceSpecifier","start":125,"end":132,"local":{"type":"Identifier","start":130,"end":132,"name":"i0"}}],"source":{"type":"Literal","start":138,"end":153,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ClassDeclaration","start":155,"end":832,"id":{"type":"Identifier","start":161,"end":180,"name":"MutexFastLockModule"},"superClass":null,"body":{"type":"ClassBody","start":181,"end":832,"body":[{"type":"MethodDefinition","start":187,"end":400,"static":true,"computed":false,"key":{"type":"Identifier","start":194,"end":201,"name":"forRoot"},"kind":"method","value":{"type":"FunctionExpression","start":201,"end":400,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":202,"end":208,"name":"config"}],"body":{"type":"BlockStatement","start":210,"end":400,"body":[{"type":"ReturnStatement","start":220,"end":394,"argument":{"type":"ObjectExpression","start":228,"end":392,"properties":[{"type":"Property","start":242,"end":271,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":242,"end":250,"name":"ngModule"},"value":{"type":"Identifier","start":252,"end":271,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":285,"end":382,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":285,"end":294,"name":"providers"},"value":{"type":"ArrayExpression","start":296,"end":382,"elements":[{"type":"ObjectExpression","start":314,"end":367,"properties":[{"type":"Property","start":316,"end":347,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":316,"end":323,"name":"provide"},"value":{"type":"Identifier","start":325,"end":347,"name":"MUTEX_FAST_LOCK_CONFIG"},"kind":"init"},{"type":"Property","start":349,"end":365,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":349,"end":357,"name":"useValue"},"value":{"type":"Identifier","start":359,"end":365,"name":"config"},"kind":"init"}]}]},"kind":"init"}]}}]}}},{"type":"PropertyDefinition","start":405,"end":574,"static":true,"computed":false,"key":{"type":"Identifier","start":412,"end":416,"name":"ɵfac"},"value":{"type":"CallExpression","start":419,"end":573,"callee":{"type":"MemberExpression","start":419,"end":440,"object":{"type":"Identifier","start":419,"end":421,"name":"i0"},"property":{"type":"Identifier","start":422,"end":440,"name":"ɵɵngDeclareFactory"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":441,"end":572,"properties":[{"type":"Property","start":443,"end":463,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":443,"end":453,"name":"minVersion"},"value":{"type":"Literal","start":455,"end":463,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":465,"end":482,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":465,"end":472,"name":"version"},"value":{"type":"Literal","start":474,"end":482,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":484,"end":496,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":484,"end":492,"name":"ngImport"},"value":{"type":"Identifier","start":494,"end":496,"name":"i0"},"kind":"init"},{"type":"Property","start":498,"end":523,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":498,"end":502,"name":"type"},"value":{"type":"Identifier","start":504,"end":523,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":525,"end":533,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":525,"end":529,"name":"deps"},"value":{"type":"ArrayExpression","start":531,"end":533,"elements":[]},"kind":"init"},{"type":"Property","start":535,"end":570,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":535,"end":541,"name":"target"},"value":{"type":"MemberExpression","start":543,"end":570,"object":{"type":"MemberExpression","start":543,"end":561,"object":{"type":"Identifier","start":543,"end":545,"name":"i0"},"property":{"type":"Identifier","start":546,"end":561,"name":"ɵɵFactoryTarget"},"computed":false,"optional":false},"property":{"type":"Identifier","start":562,"end":570,"name":"NgModule"},"computed":false,"optional":false},"kind":"init"}]}],"optional":false}},{"type":"PropertyDefinition","start":579,"end":702,"static":true,"computed":false,"key":{"type":"Identifier","start":586,"end":590,"name":"ɵmod"},"value":{"type":"CallExpression","start":593,"end":701,"callee":{"type":"MemberExpression","start":593,"end":615,"object":{"type":"Identifier","start":593,"end":595,"name":"i0"},"property":{"type":"Identifier","start":596,"end":615,"name":"ɵɵngDeclareNgModule"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":616,"end":700,"properties":[{"type":"Property","start":618,"end":638,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":618,"end":628,"name":"minVersion"},"value":{"type":"Literal","start":630,"end":638,"value":"14.0.0","raw":"\"14.0.0\""},"kind":"init"},{"type":"Property","start":640,"end":657,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":640,"end":647,"name":"version"},"value":{"type":"Literal","start":649,"end":657,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":659,"end":671,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":659,"end":667,"name":"ngImport"},"value":{"type":"Identifier","start":669,"end":671,"name":"i0"},"kind":"init"},{"type":"Property","start":673,"end":698,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":673,"end":677,"name":"type"},"value":{"type":"Identifier","start":679,"end":698,"name":"MutexFastLockModule"},"kind":"init"}]}],"optional":false}},{"type":"PropertyDefinition","start":707,"end":830,"static":true,"computed":false,"key":{"type":"Identifier","start":714,"end":718,"name":"ɵinj"},"value":{"type":"CallExpression","start":721,"end":829,"callee":{"type":"MemberExpression","start":721,"end":743,"object":{"type":"Identifier","start":721,"end":723,"name":"i0"},"property":{"type":"Identifier","start":724,"end":743,"name":"ɵɵngDeclareInjector"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":744,"end":828,"properties":[{"type":"Property","start":746,"end":766,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":746,"end":756,"name":"minVersion"},"value":{"type":"Literal","start":758,"end":766,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":768,"end":785,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":768,"end":775,"name":"version"},"value":{"type":"Literal","start":777,"end":785,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":787,"end":799,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":787,"end":795,"name":"ngImport"},"value":{"type":"Identifier","start":797,"end":799,"name":"i0"},"kind":"init"},{"type":"Property","start":801,"end":826,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":801,"end":805,"name":"type"},"value":{"type":"Identifier","start":807,"end":826,"name":"MutexFastLockModule"},"kind":"init"}]}],"optional":false}}]}},{"type":"ExportNamedDeclaration","start":833,"end":864,"declaration":null,"specifiers":[{"type":"ExportSpecifier","start":842,"end":861,"local":{"type":"Identifier","start":842,"end":861,"name":"MutexFastLockModule"},"exported":{"type":"Identifier","start":842,"end":861,"name":"MutexFastLockModule"}}],"source":null},{"type":"ExpressionStatement","start":865,"end":1033,"expression":{"type":"CallExpression","start":865,"end":1032,"callee":{"type":"MemberExpression","start":865,"end":892,"object":{"type":"Identifier","start":865,"end":867,"name":"i0"},"property":{"type":"Identifier","start":868,"end":892,"name":"ɵɵngDeclareClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":893,"end":1031,"properties":[{"type":"Property","start":895,"end":915,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":895,"end":905,"name":"minVersion"},"value":{"type":"Literal","start":907,"end":915,"value":"12.0.0","raw":"\"12.0.0\""},"kind":"init"},{"type":"Property","start":917,"end":934,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":917,"end":924,"name":"version"},"value":{"type":"Literal","start":926,"end":934,"value":"16.1.6","raw":"\"16.1.6\""},"kind":"init"},{"type":"Property","start":936,"end":948,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":936,"end":944,"name":"ngImport"},"value":{"type":"Identifier","start":946,"end":948,"name":"i0"},"kind":"init"},{"type":"Property","start":950,"end":975,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":950,"end":954,"name":"type"},"value":{"type":"Identifier","start":956,"end":975,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":977,"end":1029,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":977,"end":987,"name":"decorators"},"value":{"type":"ArrayExpression","start":989,"end":1029,"elements":[{"type":"ObjectExpression","start":990,"end":1028,"properties":[{"type":"Property","start":1004,"end":1018,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1004,"end":1008,"name":"type"},"value":{"type":"Identifier","start":1010,"end":1018,"name":"NgModule"},"kind":"init"}]}]},"kind":"init"}]}],"optional":false}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRTNFLE1BQ2EsbUJBQW1CO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBMkI7UUFFeEMsT0FBTyxDQUFDO1lBQ04sUUFBUSxFQUFFLG1CQUFtQjtZQUM3QixTQUFTLEVBQUU7Z0JBQ1QsRUFBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTthQUN0RDtTQUNGLENBQUMsQ0FBQztJQUVMLENBQUM7dUdBVlUsbUJBQW1CO3dHQUFuQixtQkFBbUI7d0dBQW5CLG1CQUFtQjs7U0FBbkIsbUJBQW1COzJGQUFuQixtQkFBbUI7a0JBRC9CLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHIH0gZnJvbSBcIi4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3RvclwiO1xyXG5cclxuQE5nTW9kdWxlKClcclxuZXhwb3J0IGNsYXNzIE11dGV4RmFzdExvY2tNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnM8TXV0ZXhGYXN0TG9ja01vZHVsZT4ge1xyXG5cclxuICAgIHJldHVybiAoe1xyXG4gICAgICBuZ01vZHVsZTogTXV0ZXhGYXN0TG9ja01vZHVsZSxcclxuICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgeyBwcm92aWRlOiBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHLCB1c2VWYWx1ZTogY29uZmlnIH0sXHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICB9XHJcbn1cclxuIl19","start":1034,"end":2568}]},"code":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nclass MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule });\n}\nexport { MutexFastLockModule };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule, decorators: [{\n            type: NgModule\n        }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRTNFLE1BQ2EsbUJBQW1CO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBMkI7UUFFeEMsT0FBTyxDQUFDO1lBQ04sUUFBUSxFQUFFLG1CQUFtQjtZQUM3QixTQUFTLEVBQUU7Z0JBQ1QsRUFBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTthQUN0RDtTQUNGLENBQUMsQ0FBQztJQUVMLENBQUM7dUdBVlUsbUJBQW1CO3dHQUFuQixtQkFBbUI7d0dBQW5CLG1CQUFtQjs7U0FBbkIsbUJBQW1COzJGQUFuQixtQkFBbUI7a0JBRC9CLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHIH0gZnJvbSBcIi4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3RvclwiO1xyXG5cclxuQE5nTW9kdWxlKClcclxuZXhwb3J0IGNsYXNzIE11dGV4RmFzdExvY2tNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnM8TXV0ZXhGYXN0TG9ja01vZHVsZT4ge1xyXG5cclxuICAgIHJldHVybiAoe1xyXG4gICAgICBuZ01vZHVsZTogTXV0ZXhGYXN0TG9ja01vZHVsZSxcclxuICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgeyBwcm92aWRlOiBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHLCB1c2VWYWx1ZTogY29uZmlnIH0sXHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICB9XHJcbn1cclxuIl19","customTransformCache":false,"dependencies":["@angular/core","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs"],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nclass MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule });\n}\nexport { MutexFastLockModule };\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.1.6\", ngImport: i0, type: MutexFastLockModule, decorators: [{\n            type: NgModule\n        }] });\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRTNFLE1BQ2EsbUJBQW1CO0lBQzlCLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBMkI7UUFFeEMsT0FBTyxDQUFDO1lBQ04sUUFBUSxFQUFFLG1CQUFtQjtZQUM3QixTQUFTLEVBQUU7Z0JBQ1QsRUFBRSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTthQUN0RDtTQUNGLENBQUMsQ0FBQztJQUVMLENBQUM7dUdBVlUsbUJBQW1CO3dHQUFuQixtQkFBbUI7d0dBQW5CLG1CQUFtQjs7U0FBbkIsbUJBQW1COzJGQUFuQixtQkFBbUI7a0JBRC9CLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb2R1bGVXaXRoUHJvdmlkZXJzLCBOZ01vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHIH0gZnJvbSBcIi4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3RvclwiO1xyXG5cclxuQE5nTW9kdWxlKClcclxuZXhwb3J0IGNsYXNzIE11dGV4RmFzdExvY2tNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KGNvbmZpZzogTXV0ZXhGYXN0TG9ja0NvbmZpZyk6IE1vZHVsZVdpdGhQcm92aWRlcnM8TXV0ZXhGYXN0TG9ja01vZHVsZT4ge1xyXG5cclxuICAgIHJldHVybiAoe1xyXG4gICAgICBuZ01vZHVsZTogTXV0ZXhGYXN0TG9ja01vZHVsZSxcclxuICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAgeyBwcm92aWRlOiBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHLCB1c2VWYWx1ZTogY29uZmlnIH0sXHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICB9XHJcbn1cclxuIl19","originalSourcemap":{"version":3,"file":"mutex-fast-lock.module.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.module.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,30],[17,0,0,38],[19,0,0,40],[25,0,0,46],[40,0,0,61],[41,0,0,62]],[[0,0,2,0],[7,0,2,7],[9,0,2,9],[31,0,2,31],[33,0,2,33],[39,0,2,39],[74,0,2,74],[75,0,2,75]],[],[[0,0,4,0],[6,0,5,13],[25,0,5,32]],[[4,0,6,2],[10,0,6,8],[11,0,6,9],[18,0,6,16],[19,0,6,17],[25,0,6,44]],[[8,0,8,4],[15,0,8,11],[16,0,8,12]],[[12,0,9,6],[20,0,9,14],[22,0,9,16],[41,0,9,35]],[[12,0,10,6],[21,0,10,15],[23,0,10,17]],[[16,0,11,8],[18,0,11,10],[25,0,11,17],[27,0,11,19],[49,0,11,41],[51,0,11,43],[59,0,11,51],[61,0,11,53],[67,0,11,59],[69,0,11,61]],[[13,0,12,7]],[[9,0,13,5],[10,0,13,6],[11,0,13,7]],[[4,0,15,2],[5,0,15,3]],[[103,0,5,13],[122,0,5,32]],[[104,0,5,13],[123,0,5,32]],[[104,0,5,13],[123,0,5,32]],[],[[9,0,5,13],[28,0,5,32]],[[91,0,5,13],[110,0,5,32]],[[18,0,4,1],[26,0,4,9]]],"sourcesContent":["import { ModuleWithProviders, NgModule } from \"@angular/core\";\r\nimport { MutexFastLockConfig } from \"./models/mutex-fast-lock-config\";\r\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\r\n\r\n@NgModule()\r\nexport class MutexFastLockModule {\r\n  static forRoot(config: MutexFastLockConfig): ModuleWithProviders<MutexFastLockModule> {\r\n\r\n    return ({\r\n      ngModule: MutexFastLockModule,\r\n      providers: [\r\n        { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\r\n      ]\r\n    });\r\n\r\n  }\r\n}\r\n"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":1012,"body":[{"type":"ExportAllDeclaration","start":53,"end":105,"exported":null,"source":{"type":"Literal","start":67,"end":104,"value":"./lib/models/mutex-fast-lock-config","raw":"'./lib/models/mutex-fast-lock-config'"}},{"type":"ExportAllDeclaration","start":106,"end":152,"exported":null,"source":{"type":"Literal","start":120,"end":151,"value":"./lib/models/mutex-lock-stats","raw":"'./lib/models/mutex-lock-stats'"}},{"type":"ExportAllDeclaration","start":153,"end":199,"exported":null,"source":{"type":"Literal","start":167,"end":198,"value":"./lib/mutex-fast-lock.service","raw":"'./lib/mutex-fast-lock.service'"}},{"type":"ExportAllDeclaration","start":200,"end":245,"exported":null,"source":{"type":"Literal","start":214,"end":244,"value":"./lib/mutex-fast-lock.module","raw":"'./lib/mutex-fast-lock.module'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgY25ldC1tdXRleC1mYXN0LWxvY2tcclxuICovXHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tdXRleC1mYXN0LWxvY2subW9kdWxlJztcclxuIl19","start":246,"end":1012}]},"code":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgY25ldC1tdXRleC1mYXN0LWxvY2tcclxuICovXHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tdXRleC1mYXN0LWxvY2subW9kdWxlJztcclxuIl19","customTransformCache":false,"dependencies":["D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs"],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2YgY25ldC1tdXRleC1mYXN0LWxvY2tcclxuICovXHJcblxyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9tdXRleC1mYXN0LWxvY2subW9kdWxlJztcclxuIl19","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[51,0,4,51],[52,0,4,52]],[[0,0,5,0],[14,0,5,14],[45,0,5,45],[46,0,5,46]],[[0,0,6,0],[14,0,6,14],[45,0,6,45],[46,0,6,46]],[[0,0,7,0],[14,0,7,14],[44,0,7,44],[45,0,7,45]]],"sourcesContent":["/*\r\n * Public API Surface of cnet-mutex-fast-lock\r\n */\r\n\r\nexport * from './lib/models/mutex-fast-lock-config';\r\nexport * from './lib/models/mutex-lock-stats';\r\nexport * from './lib/mutex-fast-lock.service';\r\nexport * from './lib/mutex-fast-lock.module';\r\n"]},"resolvedIds":{"./lib/mutex-fast-lock.service":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-fast-lock-config":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/mutex-fast-lock.module":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-lock-stats":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\lib\\models\\mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":548,"body":[{"type":"ExportAllDeclaration","start":48,"end":77,"exported":null,"source":{"type":"Literal","start":62,"end":76,"value":"./public-api","raw":"'./public-api'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","start":78,"end":548}]},"code":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs"],"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\devlearning-mutex-fast-lock.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"devlearning-mutex-fast-lock.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/devlearning-mutex-fast-lock.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"assertions":{},"external":false,"id":"D:\\Dev\\madiron\\mutex-fast-lock\\dist\\mutex-fast-lock\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"json":{},"file-loader":{}}}