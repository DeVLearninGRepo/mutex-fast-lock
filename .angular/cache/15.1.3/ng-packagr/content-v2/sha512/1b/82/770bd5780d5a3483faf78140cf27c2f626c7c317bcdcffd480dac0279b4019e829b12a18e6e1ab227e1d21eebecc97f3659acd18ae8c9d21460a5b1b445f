{"modules":[{"assertions":{},"ast":{"type":"Program","start":0,"end":539,"body":[{"type":"ExportNamedDeclaration","start":0,"end":36,"declaration":{"type":"ClassDeclaration","start":7,"end":36,"id":{"type":"Identifier","start":13,"end":32,"name":"MutexFastLockConfig"},"superClass":null,"body":{"type":"ClassBody","start":33,"end":36,"body":[]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7Q0FJL0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcbiAgbG9ja1ByZWZpeDogc3RyaW5nO1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcbn0iXX0=","start":37,"end":539}]},"code":"export class MutexFastLockConfig {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7Q0FJL0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcbiAgbG9ja1ByZWZpeDogc3RyaW5nO1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcbn0iXX0=","customTransformCache":false,"dependencies":[],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexFastLockConfig {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1mYXN0LWxvY2stY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxtQkFBbUI7Q0FJL0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTXV0ZXhGYXN0TG9ja0NvbmZpZ3tcbiAgbG9ja1ByZWZpeDogc3RyaW5nO1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIGRlYnVnRW5hYmxlZDogYm9vbGVhbjtcbn0iXX0=","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-fast-lock-config.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[32,0,0,32]],[[1,0,4,1]]],"sourcesContent":["export class MutexFastLockConfig{\n  lockPrefix: string;\n  timeout: number;\n  debugEnabled: boolean;\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":710,"body":[{"type":"ExportNamedDeclaration","start":0,"end":31,"declaration":{"type":"ClassDeclaration","start":7,"end":31,"id":{"type":"Identifier","start":13,"end":27,"name":"MutexLockStats"},"superClass":null,"body":{"type":"ClassBody","start":28,"end":31,"body":[]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0NBVTFCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcbiAgcmVzdGFydENvdW50OiBudW1iZXI7XG4gIGxvY2tzTG9zdDogbnVtYmVyO1xuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcbiAgYWNxdWlyZUR1cmF0aW9uOiBudW1iZXI7XG4gIGFjcXVpcmVTdGFydDogbnVtYmVyO1xuICBhY3F1aXJlRW5kOiBudW1iZXI7XG4gIGxvY2tTdGFydDogbnVtYmVyO1xuICBsb2NrRW5kOiBudW1iZXI7XG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xufSJdfQ==","start":32,"end":710}]},"code":"export class MutexLockStats {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0NBVTFCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcbiAgcmVzdGFydENvdW50OiBudW1iZXI7XG4gIGxvY2tzTG9zdDogbnVtYmVyO1xuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcbiAgYWNxdWlyZUR1cmF0aW9uOiBudW1iZXI7XG4gIGFjcXVpcmVTdGFydDogbnVtYmVyO1xuICBhY3F1aXJlRW5kOiBudW1iZXI7XG4gIGxvY2tTdGFydDogbnVtYmVyO1xuICBsb2NrRW5kOiBudW1iZXI7XG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xufSJdfQ==","customTransformCache":false,"dependencies":[],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class MutexLockStats {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtbG9jay1zdGF0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL21vZGVscy9tdXRleC1sb2NrLXN0YXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxjQUFjO0NBVTFCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIE11dGV4TG9ja1N0YXRzIHtcbiAgcmVzdGFydENvdW50OiBudW1iZXI7XG4gIGxvY2tzTG9zdDogbnVtYmVyO1xuICBjb250ZW50aW9uQ291bnQ6IG51bWJlcjtcbiAgYWNxdWlyZUR1cmF0aW9uOiBudW1iZXI7XG4gIGFjcXVpcmVTdGFydDogbnVtYmVyO1xuICBhY3F1aXJlRW5kOiBudW1iZXI7XG4gIGxvY2tTdGFydDogbnVtYmVyO1xuICBsb2NrRW5kOiBudW1iZXI7XG4gIGxvY2tEdXJhdGlvbjogbnVtYmVyO1xufSJdfQ==","originalSourcemap":{"version":3,"file":"mutex-lock-stats.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/mutex-lock-stats.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[27,0,0,27]],[[1,0,10,1]]],"sourcesContent":["export class MutexLockStats {\n  restartCount: number;\n  locksLost: number;\n  contentionCount: number;\n  acquireDuration: number;\n  acquireStart: number;\n  acquireEnd: number;\n  lockStart: number;\n  lockEnd: number;\n  lockDuration: number;\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":910,"body":[{"type":"ImportDeclaration","start":0,"end":47,"specifiers":[{"type":"ImportSpecifier","start":9,"end":23,"imported":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"},"local":{"type":"Identifier","start":9,"end":23,"name":"InjectionToken"}}],"source":{"type":"Literal","start":31,"end":46,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ExportNamedDeclaration","start":48,"end":131,"declaration":{"type":"VariableDeclaration","start":55,"end":131,"declarations":[{"type":"VariableDeclarator","start":61,"end":130,"id":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"init":{"type":"NewExpression","start":86,"end":130,"callee":{"type":"Identifier","start":90,"end":104,"name":"InjectionToken"},"arguments":[{"type":"Literal","start":105,"end":129,"value":"MUTEX_FAST_LOCK_CONFIG","raw":"'MUTEX_FAST_LOCK_CONFIG'"}]}}],"kind":"const"},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","start":132,"end":910}]},"code":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","customTransformCache":false,"dependencies":["@angular/core"],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { InjectionToken } from '@angular/core';\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken('MUTEX_FAST_LOCK_CONFIG');\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvQyxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBRyxJQUFJLGNBQWMsQ0FBc0Isd0JBQXdCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBNVVRFWF9GQVNUX0xPQ0tfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPE11dGV4RmFzdExvY2tDb25maWc+KCdNVVRFWF9GQVNUX0xPQ0tfQ09ORklHJyk7Il19","originalSourcemap":{"version":3,"file":"mutex-fast-lock-config.injector.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock-config.injector.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[23,0,0,23],[25,0,0,25],[31,0,0,31],[46,0,0,46],[47,0,0,47]],[[0,0,3,0],[6,0,3,6],[7,0,3,7],[13,0,3,13],[35,0,3,35],[38,0,3,38],[42,0,3,42],[56,0,3,56],[57,0,3,78],[81,0,3,102],[82,0,3,103],[83,0,3,104]]],"sourcesContent":["import { InjectionToken } from '@angular/core';\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\n\nexport const MUTEX_FAST_LOCK_CONFIG = new InjectionToken<MutexFastLockConfig>('MUTEX_FAST_LOCK_CONFIG');"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":440,"body":[{"type":"ExportNamedDeclaration","start":0,"end":25,"declaration":{"type":"ClassDeclaration","start":7,"end":25,"id":{"type":"Identifier","start":13,"end":21,"name":"LockItem"},"superClass":null,"body":{"type":"ClassBody","start":22,"end":25,"body":[]}},"specifiers":[],"source":null}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtDQUdwQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBMb2NrSXRlbXtcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBudW1iZXI7XG59Il19","start":26,"end":440}]},"code":"export class LockItem {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtDQUdwQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBMb2NrSXRlbXtcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBudW1iZXI7XG59Il19","customTransformCache":false,"dependencies":[],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/lock-item.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class LockItem {\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jay1pdGVtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9saWIvbW9kZWxzL2xvY2staXRlbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxNQUFNLE9BQU8sUUFBUTtDQUdwQiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBMb2NrSXRlbXtcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgZXhwaXJlc0F0OiBudW1iZXI7XG59Il19","originalSourcemap":{"version":3,"file":"lock-item.js","sourceRoot":"","sources":["../../../../../projects/mutex-fast-lock/src/lib/models/lock-item.ts"],"names":[],"mappings":[[[0,0,0,0],[6,0,0,6],[13,0,0,13],[21,0,0,21]],[[1,0,3,1]]],"sourcesContent":["export class LockItem{\n  clientId: string;\n  expiresAt: number;\n}"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":26540,"body":[{"type":"ImportDeclaration","start":0,"end":51,"specifiers":[{"type":"ImportSpecifier","start":9,"end":15,"imported":{"type":"Identifier","start":9,"end":15,"name":"Inject"},"local":{"type":"Identifier","start":9,"end":15,"name":"Inject"}},{"type":"ImportSpecifier","start":17,"end":27,"imported":{"type":"Identifier","start":17,"end":27,"name":"Injectable"},"local":{"type":"Identifier","start":17,"end":27,"name":"Injectable"}}],"source":{"type":"Literal","start":35,"end":50,"value":"@angular/core","raw":"'@angular/core'"}},{"type":"ImportDeclaration","start":52,"end":127,"specifiers":[{"type":"ImportSpecifier","start":61,"end":83,"imported":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":61,"end":83,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":91,"end":126,"value":"./mutex-fast-lock-config.injector","raw":"'./mutex-fast-lock-config.injector'"}},{"type":"ImportDeclaration","start":128,"end":187,"specifiers":[{"type":"ImportSpecifier","start":137,"end":151,"imported":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"},"local":{"type":"Identifier","start":137,"end":151,"name":"MutexLockStats"}}],"source":{"type":"Literal","start":159,"end":186,"value":"./models/mutex-lock-stats","raw":"'./models/mutex-lock-stats'"}},{"type":"ImportDeclaration","start":188,"end":222,"specifiers":[{"type":"ImportSpecifier","start":197,"end":207,"imported":{"type":"Identifier","start":197,"end":207,"name":"Observable"},"local":{"type":"Identifier","start":197,"end":207,"name":"Observable"}}],"source":{"type":"Literal","start":215,"end":221,"value":"rxjs","raw":"'rxjs'"}},{"type":"ImportDeclaration","start":223,"end":269,"specifiers":[{"type":"ImportSpecifier","start":232,"end":240,"imported":{"type":"Identifier","start":232,"end":240,"name":"LockItem"},"local":{"type":"Identifier","start":232,"end":240,"name":"LockItem"}}],"source":{"type":"Literal","start":248,"end":268,"value":"./models/lock-item","raw":"'./models/lock-item'"}},{"type":"ImportDeclaration","start":270,"end":306,"specifiers":[{"type":"ImportNamespaceSpecifier","start":277,"end":284,"local":{"type":"Identifier","start":282,"end":284,"name":"i0"}}],"source":{"type":"Literal","start":290,"end":305,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":307,"end":361,"specifiers":[{"type":"ImportNamespaceSpecifier","start":314,"end":321,"local":{"type":"Identifier","start":319,"end":321,"name":"i1"}}],"source":{"type":"Literal","start":327,"end":360,"value":"./models/mutex-fast-lock-config","raw":"\"./models/mutex-fast-lock-config\""}},{"type":"ExportNamedDeclaration","start":362,"end":7665,"declaration":{"type":"ClassDeclaration","start":369,"end":7665,"id":{"type":"Identifier","start":375,"end":395,"name":"MutexFastLockService"},"superClass":null,"body":{"type":"ClassBody","start":396,"end":7665,"body":[{"type":"MethodDefinition","start":402,"end":1143,"static":false,"computed":false,"key":{"type":"Identifier","start":402,"end":413,"name":"constructor"},"kind":"constructor","value":{"type":"FunctionExpression","start":413,"end":1143,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":414,"end":421,"name":"_config"}],"body":{"type":"BlockStatement","start":423,"end":1143,"body":[{"type":"ExpressionStatement","start":433,"end":456,"expression":{"type":"AssignmentExpression","start":433,"end":455,"operator":"=","left":{"type":"MemberExpression","start":433,"end":445,"object":{"type":"ThisExpression","start":433,"end":437},"property":{"type":"Identifier","start":438,"end":445,"name":"_config"},"computed":false,"optional":false},"right":{"type":"Identifier","start":448,"end":455,"name":"_config"}}},{"type":"ExpressionStatement","start":465,"end":507,"expression":{"type":"AssignmentExpression","start":465,"end":506,"operator":"=","left":{"type":"MemberExpression","start":465,"end":479,"object":{"type":"ThisExpression","start":465,"end":469},"property":{"type":"Identifier","start":470,"end":479,"name":"_clientId"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":482,"end":506,"callee":{"type":"MemberExpression","start":482,"end":504,"object":{"type":"ThisExpression","start":482,"end":486},"property":{"type":"Identifier","start":487,"end":504,"name":"_generateRandomId"},"computed":false,"optional":false},"arguments":[],"optional":false}}},{"type":"ExpressionStatement","start":516,"end":559,"expression":{"type":"AssignmentExpression","start":516,"end":558,"operator":"=","left":{"type":"MemberExpression","start":516,"end":529,"object":{"type":"ThisExpression","start":516,"end":520},"property":{"type":"Identifier","start":521,"end":529,"name":"_xPrefix"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":532,"end":558,"left":{"type":"MemberExpression","start":532,"end":550,"object":{"type":"Identifier","start":532,"end":539,"name":"_config"},"property":{"type":"Identifier","start":540,"end":550,"name":"lockPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Literal","start":553,"end":558,"value":"_X_","raw":"'_X_'"}}}},{"type":"ExpressionStatement","start":568,"end":611,"expression":{"type":"AssignmentExpression","start":568,"end":610,"operator":"=","left":{"type":"MemberExpression","start":568,"end":581,"object":{"type":"ThisExpression","start":568,"end":572},"property":{"type":"Identifier","start":573,"end":581,"name":"_yPrefix"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":584,"end":610,"left":{"type":"MemberExpression","start":584,"end":602,"object":{"type":"Identifier","start":584,"end":591,"name":"_config"},"property":{"type":"Identifier","start":592,"end":602,"name":"lockPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Literal","start":605,"end":610,"value":"_Y_","raw":"'_Y_'"}}}},{"type":"VariableDeclaration","start":620,"end":636,"declarations":[{"type":"VariableDeclarator","start":624,"end":635,"id":{"type":"Identifier","start":624,"end":628,"name":"that"},"init":{"type":"ThisExpression","start":631,"end":635}}],"kind":"let"},{"type":"ExpressionStatement","start":645,"end":1137,"expression":{"type":"CallExpression","start":645,"end":1136,"callee":{"type":"MemberExpression","start":645,"end":668,"object":{"type":"Identifier","start":645,"end":651,"name":"window"},"property":{"type":"Identifier","start":652,"end":668,"name":"addEventListener"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":669,"end":683,"value":"beforeunload","raw":"\"beforeunload\""},{"type":"FunctionExpression","start":685,"end":1135,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":695,"end":697,"name":"ev"}],"body":{"type":"BlockStatement","start":699,"end":1135,"body":[{"type":"VariableDeclaration","start":713,"end":726,"declarations":[{"type":"VariableDeclarator","start":717,"end":725,"id":{"type":"Identifier","start":717,"end":720,"name":"arr"},"init":{"type":"ArrayExpression","start":723,"end":725,"elements":[]}}],"kind":"var"},{"type":"ForStatement","start":739,"end":1011,"init":{"type":"VariableDeclaration","start":744,"end":753,"declarations":[{"type":"VariableDeclarator","start":748,"end":753,"id":{"type":"Identifier","start":748,"end":749,"name":"i"},"init":{"type":"Literal","start":752,"end":753,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":755,"end":778,"left":{"type":"Identifier","start":755,"end":756,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":759,"end":778,"object":{"type":"Identifier","start":759,"end":771,"name":"localStorage"},"property":{"type":"Identifier","start":772,"end":778,"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":780,"end":783,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":780,"end":781,"name":"i"}},"body":{"type":"BlockStatement","start":785,"end":1011,"body":[{"type":"IfStatement","start":803,"end":997,"test":{"type":"LogicalExpression","start":807,"end":925,"left":{"type":"BinaryExpression","start":807,"end":854,"left":{"type":"CallExpression","start":807,"end":849,"callee":{"type":"MemberExpression","start":807,"end":834,"object":{"type":"CallExpression","start":807,"end":826,"callee":{"type":"MemberExpression","start":807,"end":823,"object":{"type":"Identifier","start":807,"end":819,"name":"localStorage"},"property":{"type":"Identifier","start":820,"end":823,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":824,"end":825,"name":"i"}],"optional":false},"property":{"type":"Identifier","start":827,"end":834,"name":"indexOf"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":835,"end":848,"object":{"type":"Identifier","start":835,"end":839,"name":"that"},"property":{"type":"Identifier","start":840,"end":848,"name":"_xPrefix"},"computed":false,"optional":false}],"optional":false},"operator":"==","right":{"type":"Literal","start":853,"end":854,"value":0,"raw":"0"}},"operator":"||","right":{"type":"BinaryExpression","start":878,"end":925,"left":{"type":"CallExpression","start":878,"end":920,"callee":{"type":"MemberExpression","start":878,"end":905,"object":{"type":"CallExpression","start":878,"end":897,"callee":{"type":"MemberExpression","start":878,"end":894,"object":{"type":"Identifier","start":878,"end":890,"name":"localStorage"},"property":{"type":"Identifier","start":891,"end":894,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":895,"end":896,"name":"i"}],"optional":false},"property":{"type":"Identifier","start":898,"end":905,"name":"indexOf"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":906,"end":919,"object":{"type":"Identifier","start":906,"end":910,"name":"that"},"property":{"type":"Identifier","start":911,"end":919,"name":"_yPrefix"},"computed":false,"optional":false}],"optional":false},"operator":"==","right":{"type":"Literal","start":924,"end":925,"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":927,"end":997,"body":[{"type":"ExpressionStatement","start":949,"end":979,"expression":{"type":"CallExpression","start":949,"end":978,"callee":{"type":"MemberExpression","start":949,"end":957,"object":{"type":"Identifier","start":949,"end":952,"name":"arr"},"property":{"type":"Identifier","start":953,"end":957,"name":"push"},"computed":false,"optional":false},"arguments":[{"type":"CallExpression","start":958,"end":977,"callee":{"type":"MemberExpression","start":958,"end":974,"object":{"type":"Identifier","start":958,"end":970,"name":"localStorage"},"property":{"type":"Identifier","start":971,"end":974,"name":"key"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":975,"end":976,"name":"i"}],"optional":false}],"optional":false}}]},"alternate":null}]}},{"type":"ForStatement","start":1024,"end":1125,"init":{"type":"VariableDeclaration","start":1029,"end":1038,"declarations":[{"type":"VariableDeclarator","start":1033,"end":1038,"id":{"type":"Identifier","start":1033,"end":1034,"name":"i"},"init":{"type":"Literal","start":1037,"end":1038,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":1040,"end":1054,"left":{"type":"Identifier","start":1040,"end":1041,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":1044,"end":1054,"object":{"type":"Identifier","start":1044,"end":1047,"name":"arr"},"property":{"type":"Identifier","start":1048,"end":1054,"name":"length"},"computed":false,"optional":false}},"update":{"type":"UpdateExpression","start":1056,"end":1059,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":1056,"end":1057,"name":"i"}},"body":{"type":"BlockStatement","start":1061,"end":1125,"body":[{"type":"ExpressionStatement","start":1079,"end":1111,"expression":{"type":"CallExpression","start":1079,"end":1110,"callee":{"type":"MemberExpression","start":1079,"end":1102,"object":{"type":"Identifier","start":1079,"end":1091,"name":"localStorage"},"property":{"type":"Identifier","start":1092,"end":1102,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"MemberExpression","start":1103,"end":1109,"object":{"type":"Identifier","start":1103,"end":1106,"name":"arr"},"property":{"type":"Identifier","start":1107,"end":1108,"name":"i"},"computed":true,"optional":false}],"optional":false}}]}}]}}],"optional":false}}]}}},{"type":"MethodDefinition","start":1148,"end":5110,"static":false,"computed":false,"key":{"type":"Identifier","start":1148,"end":1152,"name":"lock"},"kind":"method","value":{"type":"FunctionExpression","start":1152,"end":5110,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1153,"end":1156,"name":"key"},{"type":"AssignmentPattern","start":1158,"end":1170,"left":{"type":"Identifier","start":1158,"end":1165,"name":"timeout"},"right":{"type":"UnaryExpression","start":1168,"end":1170,"operator":"-","prefix":true,"argument":{"type":"Literal","start":1169,"end":1170,"value":1,"raw":"1"}}}],"body":{"type":"BlockStatement","start":1172,"end":5110,"body":[{"type":"VariableDeclaration","start":1182,"end":1198,"declarations":[{"type":"VariableDeclarator","start":1186,"end":1197,"id":{"type":"Identifier","start":1186,"end":1190,"name":"that"},"init":{"type":"ThisExpression","start":1193,"end":1197}}],"kind":"let"},{"type":"IfStatement","start":1207,"end":1269,"test":{"type":"BinaryExpression","start":1211,"end":1224,"left":{"type":"Identifier","start":1211,"end":1218,"name":"timeout"},"operator":"==","right":{"type":"UnaryExpression","start":1222,"end":1224,"operator":"-","prefix":true,"argument":{"type":"Literal","start":1223,"end":1224,"value":1,"raw":"1"}}},"consequent":{"type":"ExpressionStatement","start":1238,"end":1269,"expression":{"type":"AssignmentExpression","start":1238,"end":1268,"operator":"=","left":{"type":"Identifier","start":1238,"end":1245,"name":"timeout"},"right":{"type":"MemberExpression","start":1248,"end":1268,"object":{"type":"MemberExpression","start":1248,"end":1260,"object":{"type":"ThisExpression","start":1248,"end":1252},"property":{"type":"Identifier","start":1253,"end":1260,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1261,"end":1268,"name":"timeout"},"computed":false,"optional":false}}},"alternate":null},{"type":"VariableDeclaration","start":1278,"end":1310,"declarations":[{"type":"VariableDeclarator","start":1282,"end":1309,"id":{"type":"Identifier","start":1282,"end":1287,"name":"xLock"},"init":{"type":"BinaryExpression","start":1290,"end":1309,"left":{"type":"MemberExpression","start":1290,"end":1303,"object":{"type":"Identifier","start":1290,"end":1294,"name":"that"},"property":{"type":"Identifier","start":1295,"end":1303,"name":"_xPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":1306,"end":1309,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":1319,"end":1351,"declarations":[{"type":"VariableDeclarator","start":1323,"end":1350,"id":{"type":"Identifier","start":1323,"end":1328,"name":"yLock"},"init":{"type":"BinaryExpression","start":1331,"end":1350,"left":{"type":"MemberExpression","start":1331,"end":1344,"object":{"type":"Identifier","start":1331,"end":1335,"name":"that"},"property":{"type":"Identifier","start":1336,"end":1344,"name":"_yPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":1347,"end":1350,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":1360,"end":1397,"declarations":[{"type":"VariableDeclarator","start":1364,"end":1396,"id":{"type":"Identifier","start":1364,"end":1373,"name":"lockStats"},"init":{"type":"NewExpression","start":1376,"end":1396,"callee":{"type":"Identifier","start":1380,"end":1394,"name":"MutexLockStats"},"arguments":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":1406,"end":1433,"expression":{"type":"CallExpression","start":1406,"end":1432,"callee":{"type":"MemberExpression","start":1406,"end":1421,"object":{"type":"Identifier","start":1406,"end":1410,"name":"that"},"property":{"type":"Identifier","start":1411,"end":1421,"name":"resetStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":1422,"end":1431,"name":"lockStats"}],"optional":false}},{"type":"ExpressionStatement","start":1442,"end":1574,"expression":{"type":"LogicalExpression","start":1442,"end":1573,"left":{"type":"MemberExpression","start":1442,"end":1467,"object":{"type":"MemberExpression","start":1442,"end":1454,"object":{"type":"ThisExpression","start":1442,"end":1446},"property":{"type":"Identifier","start":1447,"end":1454,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":1455,"end":1467,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":1471,"end":1573,"callee":{"type":"MemberExpression","start":1471,"end":1484,"object":{"type":"Identifier","start":1471,"end":1478,"name":"console"},"property":{"type":"Identifier","start":1479,"end":1484,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":1485,"end":1551,"value":"Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"","raw":"'Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"'"},{"type":"Identifier","start":1553,"end":1556,"name":"key"},{"type":"MemberExpression","start":1558,"end":1572,"object":{"type":"ThisExpression","start":1558,"end":1562},"property":{"type":"Identifier","start":1563,"end":1572,"name":"_clientId"},"computed":false,"optional":false}],"optional":false}}},{"type":"ExpressionStatement","start":1583,"end":1629,"expression":{"type":"AssignmentExpression","start":1583,"end":1628,"operator":"=","left":{"type":"MemberExpression","start":1583,"end":1605,"object":{"type":"Identifier","start":1583,"end":1592,"name":"lockStats"},"property":{"type":"Identifier","start":1593,"end":1605,"name":"acquireStart"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":1608,"end":1628,"callee":{"type":"MemberExpression","start":1608,"end":1626,"object":{"type":"NewExpression","start":1608,"end":1618,"callee":{"type":"Identifier","start":1612,"end":1616,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":1619,"end":1626,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}}},{"type":"ReturnStatement","start":1696,"end":5104,"argument":{"type":"NewExpression","start":1703,"end":5103,"callee":{"type":"Identifier","start":1707,"end":1717,"name":"Observable"},"arguments":[{"type":"ArrowFunctionExpression","start":1718,"end":5102,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1718,"end":1728,"name":"subscriber"}],"body":{"type":"BlockStatement","start":1732,"end":5102,"body":[{"type":"VariableDeclaration","start":2074,"end":5062,"declarations":[{"type":"VariableDeclarator","start":2078,"end":5061,"id":{"type":"Identifier","start":2078,"end":2089,"name":"acquireLock"},"init":{"type":"FunctionExpression","start":2092,"end":5061,"id":{"type":"Identifier","start":2101,"end":2112,"name":"acquireLock"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2113,"end":2116,"name":"key"}],"body":{"type":"BlockStatement","start":2118,"end":5061,"body":[{"type":"ExpressionStatement","start":2136,"end":2168,"expression":{"type":"CallExpression","start":2136,"end":2167,"callee":{"type":"MemberExpression","start":2136,"end":2160,"object":{"type":"Identifier","start":2136,"end":2140,"name":"that"},"property":{"type":"Identifier","start":2141,"end":2160,"name":"_releaseExpiredLock"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2161,"end":2166,"name":"xLock"}],"optional":false}},{"type":"ExpressionStatement","start":2185,"end":2217,"expression":{"type":"CallExpression","start":2185,"end":2216,"callee":{"type":"MemberExpression","start":2185,"end":2209,"object":{"type":"Identifier","start":2185,"end":2189,"name":"that"},"property":{"type":"Identifier","start":2190,"end":2209,"name":"_releaseExpiredLock"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2210,"end":2215,"name":"yLock"}],"optional":false}},{"type":"VariableDeclaration","start":2234,"end":2298,"declarations":[{"type":"VariableDeclarator","start":2238,"end":2297,"id":{"type":"Identifier","start":2238,"end":2249,"name":"elapsedTime"},"init":{"type":"BinaryExpression","start":2252,"end":2297,"left":{"type":"CallExpression","start":2252,"end":2272,"callee":{"type":"MemberExpression","start":2252,"end":2270,"object":{"type":"NewExpression","start":2252,"end":2262,"callee":{"type":"Identifier","start":2256,"end":2260,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":2263,"end":2270,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"-","right":{"type":"MemberExpression","start":2275,"end":2297,"object":{"type":"Identifier","start":2275,"end":2284,"name":"lockStats"},"property":{"type":"Identifier","start":2285,"end":2297,"name":"acquireStart"},"computed":false,"optional":false}}}],"kind":"var"},{"type":"IfStatement","start":2315,"end":2635,"test":{"type":"BinaryExpression","start":2319,"end":2341,"left":{"type":"Identifier","start":2319,"end":2330,"name":"elapsedTime"},"operator":">=","right":{"type":"Identifier","start":2334,"end":2341,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":2343,"end":2635,"body":[{"type":"ExpressionStatement","start":2365,"end":2513,"expression":{"type":"LogicalExpression","start":2365,"end":2512,"left":{"type":"MemberExpression","start":2365,"end":2390,"object":{"type":"MemberExpression","start":2365,"end":2377,"object":{"type":"Identifier","start":2365,"end":2369,"name":"that"},"property":{"type":"Identifier","start":2370,"end":2377,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":2378,"end":2390,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":2394,"end":2512,"callee":{"type":"MemberExpression","start":2394,"end":2407,"object":{"type":"Identifier","start":2394,"end":2401,"name":"console"},"property":{"type":"Identifier","start":2402,"end":2407,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":2408,"end":2481,"value":"Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"","raw":"'Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"'"},{"type":"Identifier","start":2483,"end":2486,"name":"key"},{"type":"Identifier","start":2488,"end":2495,"name":"timeout"},{"type":"MemberExpression","start":2497,"end":2511,"object":{"type":"Identifier","start":2497,"end":2501,"name":"that"},"property":{"type":"Identifier","start":2502,"end":2511,"name":"_clientId"},"computed":false,"optional":false}],"optional":false}}},{"type":"ExpressionStatement","start":2534,"end":2617,"expression":{"type":"CallExpression","start":2534,"end":2616,"callee":{"type":"MemberExpression","start":2534,"end":2550,"object":{"type":"Identifier","start":2534,"end":2544,"name":"subscriber"},"property":{"type":"Identifier","start":2545,"end":2550,"name":"error"},"computed":false,"optional":false},"arguments":[{"type":"NewExpression","start":2551,"end":2615,"callee":{"type":"Identifier","start":2555,"end":2560,"name":"Error"},"arguments":[{"type":"BinaryExpression","start":2561,"end":2614,"left":{"type":"BinaryExpression","start":2561,"end":2607,"left":{"type":"Literal","start":2561,"end":2597,"value":"Lock could not be acquired within ","raw":"'Lock could not be acquired within '"},"operator":"+","right":{"type":"Identifier","start":2600,"end":2607,"name":"timeout"}},"operator":"+","right":{"type":"Literal","start":2610,"end":2614,"value":"ms","raw":"'ms'"}}]}],"optional":false}}]},"alternate":null},{"type":"ExpressionStatement","start":2652,"end":2698,"expression":{"type":"CallExpression","start":2652,"end":2697,"callee":{"type":"MemberExpression","start":2652,"end":2665,"object":{"type":"Identifier","start":2652,"end":2656,"name":"that"},"property":{"type":"Identifier","start":2657,"end":2665,"name":"_setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2666,"end":2671,"name":"xLock"},{"type":"MemberExpression","start":2673,"end":2687,"object":{"type":"Identifier","start":2673,"end":2677,"name":"that"},"property":{"type":"Identifier","start":2678,"end":2687,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":2689,"end":2696,"name":"timeout"}],"optional":false}},{"type":"VariableDeclaration","start":2799,"end":2839,"declarations":[{"type":"VariableDeclarator","start":2803,"end":2838,"id":{"type":"Identifier","start":2803,"end":2806,"name":"lsY"},"init":{"type":"CallExpression","start":2809,"end":2838,"callee":{"type":"MemberExpression","start":2809,"end":2822,"object":{"type":"Identifier","start":2809,"end":2813,"name":"that"},"property":{"type":"Identifier","start":2814,"end":2822,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":2823,"end":2828,"name":"yLock"},{"type":"Identifier","start":2830,"end":2837,"name":"timeout"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":2856,"end":3189,"test":{"type":"Identifier","start":2860,"end":2863,"name":"lsY"},"consequent":{"type":"BlockStatement","start":2865,"end":3189,"body":[{"type":"ExpressionStatement","start":2887,"end":2975,"expression":{"type":"LogicalExpression","start":2887,"end":2974,"left":{"type":"MemberExpression","start":2887,"end":2912,"object":{"type":"MemberExpression","start":2887,"end":2899,"object":{"type":"Identifier","start":2887,"end":2891,"name":"that"},"property":{"type":"Identifier","start":2892,"end":2899,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":2900,"end":2912,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":2916,"end":2974,"callee":{"type":"MemberExpression","start":2916,"end":2929,"object":{"type":"Identifier","start":2916,"end":2923,"name":"console"},"property":{"type":"Identifier","start":2924,"end":2929,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":2930,"end":2968,"value":"Lock exists on Y (%s), restarting...","raw":"'Lock exists on Y (%s), restarting...'"},{"type":"Identifier","start":2970,"end":2973,"name":"lsY"}],"optional":false}}},{"type":"ExpressionStatement","start":2996,"end":3021,"expression":{"type":"UpdateExpression","start":2996,"end":3020,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":2996,"end":3018,"object":{"type":"Identifier","start":2996,"end":3005,"name":"lockStats"},"property":{"type":"Identifier","start":3006,"end":3018,"name":"restartCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":3042,"end":3143,"expression":{"type":"CallExpression","start":3042,"end":3142,"callee":{"type":"Identifier","start":3042,"end":3052,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3053,"end":3137,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3065,"end":3137,"body":[{"type":"ReturnStatement","start":3091,"end":3115,"argument":{"type":"CallExpression","start":3098,"end":3114,"callee":{"type":"Identifier","start":3098,"end":3109,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":3110,"end":3113,"name":"key"}],"optional":false}}]}},{"type":"Literal","start":3139,"end":3141,"value":10,"raw":"10"}],"optional":false}},{"type":"ReturnStatement","start":3164,"end":3171,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3244,"end":3290,"expression":{"type":"CallExpression","start":3244,"end":3289,"callee":{"type":"MemberExpression","start":3244,"end":3257,"object":{"type":"Identifier","start":3244,"end":3248,"name":"that"},"property":{"type":"Identifier","start":3249,"end":3257,"name":"_setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3258,"end":3263,"name":"yLock"},{"type":"MemberExpression","start":3265,"end":3279,"object":{"type":"Identifier","start":3265,"end":3269,"name":"that"},"property":{"type":"Identifier","start":3270,"end":3279,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":3281,"end":3288,"name":"timeout"}],"optional":false}},{"type":"VariableDeclaration","start":3391,"end":3431,"declarations":[{"type":"VariableDeclarator","start":3395,"end":3430,"id":{"type":"Identifier","start":3395,"end":3398,"name":"lsX"},"init":{"type":"CallExpression","start":3401,"end":3430,"callee":{"type":"MemberExpression","start":3401,"end":3414,"object":{"type":"Identifier","start":3401,"end":3405,"name":"that"},"property":{"type":"Identifier","start":3406,"end":3414,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3415,"end":3420,"name":"xLock"},{"type":"Identifier","start":3422,"end":3429,"name":"timeout"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":3448,"end":4802,"test":{"type":"BinaryExpression","start":3452,"end":3474,"left":{"type":"Identifier","start":3452,"end":3455,"name":"lsX"},"operator":"!==","right":{"type":"MemberExpression","start":3460,"end":3474,"object":{"type":"Identifier","start":3460,"end":3464,"name":"that"},"property":{"type":"Identifier","start":3465,"end":3474,"name":"_clientId"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":3476,"end":4802,"body":[{"type":"ExpressionStatement","start":3498,"end":3526,"expression":{"type":"UpdateExpression","start":3498,"end":3525,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":3498,"end":3523,"object":{"type":"Identifier","start":3498,"end":3507,"name":"lockStats"},"property":{"type":"Identifier","start":3508,"end":3523,"name":"contentionCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":3547,"end":3631,"expression":{"type":"LogicalExpression","start":3547,"end":3630,"left":{"type":"MemberExpression","start":3547,"end":3572,"object":{"type":"MemberExpression","start":3547,"end":3559,"object":{"type":"Identifier","start":3547,"end":3551,"name":"that"},"property":{"type":"Identifier","start":3552,"end":3559,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":3560,"end":3572,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":3576,"end":3630,"callee":{"type":"MemberExpression","start":3576,"end":3589,"object":{"type":"Identifier","start":3576,"end":3583,"name":"console"},"property":{"type":"Identifier","start":3584,"end":3589,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":3590,"end":3624,"value":"Lock contention detected. X=\"%s\"","raw":"'Lock contention detected. X=\"%s\"'"},{"type":"Identifier","start":3626,"end":3629,"name":"lsX"}],"optional":false}}},{"type":"ExpressionStatement","start":3714,"end":4756,"expression":{"type":"CallExpression","start":3714,"end":4755,"callee":{"type":"Identifier","start":3714,"end":3724,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":3725,"end":4749,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3737,"end":4749,"body":[{"type":"ExpressionStatement","start":3763,"end":3799,"expression":{"type":"AssignmentExpression","start":3763,"end":3798,"operator":"=","left":{"type":"Identifier","start":3763,"end":3766,"name":"lsY"},"right":{"type":"CallExpression","start":3769,"end":3798,"callee":{"type":"MemberExpression","start":3769,"end":3782,"object":{"type":"Identifier","start":3769,"end":3773,"name":"that"},"property":{"type":"Identifier","start":3774,"end":3782,"name":"_getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":3783,"end":3788,"name":"yLock"},{"type":"Identifier","start":3790,"end":3797,"name":"timeout"}],"optional":false}}},{"type":"IfStatement","start":3824,"end":4727,"test":{"type":"BinaryExpression","start":3828,"end":3850,"left":{"type":"Identifier","start":3828,"end":3831,"name":"lsY"},"operator":"===","right":{"type":"MemberExpression","start":3836,"end":3850,"object":{"type":"Identifier","start":3836,"end":3840,"name":"that"},"property":{"type":"Identifier","start":3841,"end":3850,"name":"_clientId"},"computed":false,"optional":false}},"consequent":{"type":"BlockStatement","start":3852,"end":4149,"body":[{"type":"ExpressionStatement","start":3928,"end":4049,"expression":{"type":"LogicalExpression","start":3928,"end":4048,"left":{"type":"MemberExpression","start":3928,"end":3953,"object":{"type":"MemberExpression","start":3928,"end":3940,"object":{"type":"Identifier","start":3928,"end":3932,"name":"that"},"property":{"type":"Identifier","start":3933,"end":3940,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":3941,"end":3953,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":3957,"end":4048,"callee":{"type":"MemberExpression","start":3957,"end":3970,"object":{"type":"Identifier","start":3957,"end":3964,"name":"console"},"property":{"type":"Identifier","start":3965,"end":3970,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":3971,"end":4026,"value":"FastMutex client \"%s\" won the lock contention on \"%s\"","raw":"'FastMutex client \"%s\" won the lock contention on \"%s\"'"},{"type":"MemberExpression","start":4028,"end":4042,"object":{"type":"Identifier","start":4028,"end":4032,"name":"that"},"property":{"type":"Identifier","start":4033,"end":4042,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":4044,"end":4047,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":4078,"end":4123,"expression":{"type":"CallExpression","start":4078,"end":4122,"callee":{"type":"MemberExpression","start":4078,"end":4099,"object":{"type":"Identifier","start":4078,"end":4082,"name":"that"},"property":{"type":"Identifier","start":4083,"end":4099,"name":"resolveWithStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":4100,"end":4110,"name":"subscriber"},{"type":"Identifier","start":4112,"end":4121,"name":"lockStats"}],"optional":false}}]},"alternate":{"type":"BlockStatement","start":4179,"end":4727,"body":[{"type":"ExpressionStatement","start":4284,"end":4309,"expression":{"type":"UpdateExpression","start":4284,"end":4308,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":4284,"end":4306,"object":{"type":"Identifier","start":4284,"end":4293,"name":"lockStats"},"property":{"type":"Identifier","start":4294,"end":4306,"name":"restartCount"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":4338,"end":4360,"expression":{"type":"UpdateExpression","start":4338,"end":4359,"operator":"++","prefix":false,"argument":{"type":"MemberExpression","start":4338,"end":4357,"object":{"type":"Identifier","start":4338,"end":4347,"name":"lockStats"},"property":{"type":"Identifier","start":4348,"end":4357,"name":"locksLost"},"computed":false,"optional":false}}},{"type":"ExpressionStatement","start":4389,"end":4555,"expression":{"type":"LogicalExpression","start":4389,"end":4554,"left":{"type":"MemberExpression","start":4389,"end":4414,"object":{"type":"MemberExpression","start":4389,"end":4401,"object":{"type":"Identifier","start":4389,"end":4393,"name":"that"},"property":{"type":"Identifier","start":4394,"end":4401,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":4402,"end":4414,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":4418,"end":4554,"callee":{"type":"MemberExpression","start":4418,"end":4431,"object":{"type":"Identifier","start":4418,"end":4425,"name":"console"},"property":{"type":"Identifier","start":4426,"end":4431,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4432,"end":4527,"value":"FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...","raw":"'FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...'"},{"type":"MemberExpression","start":4529,"end":4543,"object":{"type":"Identifier","start":4529,"end":4533,"name":"that"},"property":{"type":"Identifier","start":4534,"end":4543,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":4545,"end":4548,"name":"key"},{"type":"Identifier","start":4550,"end":4553,"name":"lsY"}],"optional":false}}},{"type":"ExpressionStatement","start":4584,"end":4701,"expression":{"type":"CallExpression","start":4584,"end":4700,"callee":{"type":"Identifier","start":4584,"end":4594,"name":"setTimeout"},"arguments":[{"type":"FunctionExpression","start":4595,"end":4695,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4607,"end":4695,"body":[{"type":"ReturnStatement","start":4641,"end":4665,"argument":{"type":"CallExpression","start":4648,"end":4664,"callee":{"type":"Identifier","start":4648,"end":4659,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":4660,"end":4663,"name":"key"}],"optional":false}}]}},{"type":"Literal","start":4697,"end":4699,"value":10,"raw":"10"}],"optional":false}}]}}]}},{"type":"Literal","start":4751,"end":4754,"value":100,"raw":"100"}],"optional":false}},{"type":"ReturnStatement","start":4777,"end":4784,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":4853,"end":4985,"expression":{"type":"LogicalExpression","start":4853,"end":4984,"left":{"type":"MemberExpression","start":4853,"end":4878,"object":{"type":"MemberExpression","start":4853,"end":4865,"object":{"type":"Identifier","start":4853,"end":4857,"name":"that"},"property":{"type":"Identifier","start":4858,"end":4865,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":4866,"end":4878,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":4882,"end":4984,"callee":{"type":"MemberExpression","start":4882,"end":4895,"object":{"type":"Identifier","start":4882,"end":4889,"name":"console"},"property":{"type":"Identifier","start":4890,"end":4895,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":4896,"end":4962,"value":"FastMutex client \"%s\" acquired a lock on \"%s\" with no contention","raw":"'FastMutex client \"%s\" acquired a lock on \"%s\" with no contention'"},{"type":"MemberExpression","start":4964,"end":4978,"object":{"type":"Identifier","start":4964,"end":4968,"name":"that"},"property":{"type":"Identifier","start":4969,"end":4978,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":4980,"end":4983,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":5002,"end":5047,"expression":{"type":"CallExpression","start":5002,"end":5046,"callee":{"type":"MemberExpression","start":5002,"end":5023,"object":{"type":"Identifier","start":5002,"end":5006,"name":"that"},"property":{"type":"Identifier","start":5007,"end":5023,"name":"resolveWithStats"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5024,"end":5034,"name":"subscriber"},{"type":"Identifier","start":5036,"end":5045,"name":"lockStats"}],"optional":false}}]}}}],"kind":"let"},{"type":"ExpressionStatement","start":5075,"end":5092,"expression":{"type":"CallExpression","start":5075,"end":5091,"callee":{"type":"Identifier","start":5075,"end":5086,"name":"acquireLock"},"arguments":[{"type":"Identifier","start":5087,"end":5090,"name":"key"}],"optional":false}}]}}]}}]}}},{"type":"MethodDefinition","start":5115,"end":5664,"static":false,"computed":false,"key":{"type":"Identifier","start":5115,"end":5122,"name":"release"},"kind":"method","value":{"type":"FunctionExpression","start":5122,"end":5664,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5123,"end":5126,"name":"key"}],"body":{"type":"BlockStatement","start":5128,"end":5664,"body":[{"type":"ExpressionStatement","start":5138,"end":5253,"expression":{"type":"LogicalExpression","start":5138,"end":5252,"left":{"type":"MemberExpression","start":5138,"end":5163,"object":{"type":"MemberExpression","start":5138,"end":5150,"object":{"type":"ThisExpression","start":5138,"end":5142},"property":{"type":"Identifier","start":5143,"end":5150,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":5151,"end":5163,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":5167,"end":5252,"callee":{"type":"MemberExpression","start":5167,"end":5180,"object":{"type":"Identifier","start":5167,"end":5174,"name":"console"},"property":{"type":"Identifier","start":5175,"end":5180,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":5181,"end":5230,"value":"FastMutex client \"%s\" is releasing lock on \"%s\"","raw":"'FastMutex client \"%s\" is releasing lock on \"%s\"'"},{"type":"MemberExpression","start":5232,"end":5246,"object":{"type":"ThisExpression","start":5232,"end":5236},"property":{"type":"Identifier","start":5237,"end":5246,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":5248,"end":5251,"name":"key"}],"optional":false}}},{"type":"VariableDeclaration","start":5262,"end":5290,"declarations":[{"type":"VariableDeclarator","start":5266,"end":5289,"id":{"type":"Identifier","start":5266,"end":5267,"name":"x"},"init":{"type":"BinaryExpression","start":5270,"end":5289,"left":{"type":"MemberExpression","start":5270,"end":5283,"object":{"type":"ThisExpression","start":5270,"end":5274},"property":{"type":"Identifier","start":5275,"end":5283,"name":"_xPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":5286,"end":5289,"name":"key"}}}],"kind":"let"},{"type":"VariableDeclaration","start":5299,"end":5327,"declarations":[{"type":"VariableDeclarator","start":5303,"end":5326,"id":{"type":"Identifier","start":5303,"end":5304,"name":"y"},"init":{"type":"BinaryExpression","start":5307,"end":5326,"left":{"type":"MemberExpression","start":5307,"end":5320,"object":{"type":"ThisExpression","start":5307,"end":5311},"property":{"type":"Identifier","start":5312,"end":5320,"name":"_yPrefix"},"computed":false,"optional":false},"operator":"+","right":{"type":"Identifier","start":5323,"end":5326,"name":"key"}}}],"kind":"let"},{"type":"ExpressionStatement","start":5336,"end":5363,"expression":{"type":"CallExpression","start":5336,"end":5362,"callee":{"type":"MemberExpression","start":5336,"end":5359,"object":{"type":"Identifier","start":5336,"end":5348,"name":"localStorage"},"property":{"type":"Identifier","start":5349,"end":5359,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5360,"end":5361,"name":"x"}],"optional":false}},{"type":"ExpressionStatement","start":5372,"end":5399,"expression":{"type":"CallExpression","start":5372,"end":5398,"callee":{"type":"MemberExpression","start":5372,"end":5395,"object":{"type":"Identifier","start":5372,"end":5384,"name":"localStorage"},"property":{"type":"Identifier","start":5385,"end":5395,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":5396,"end":5397,"name":"y"}],"optional":false}}]}}},{"type":"MethodDefinition","start":5669,"end":5757,"static":false,"computed":false,"key":{"type":"Identifier","start":5669,"end":5686,"name":"_generateRandomId"},"kind":"method","value":{"type":"FunctionExpression","start":5686,"end":5757,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5689,"end":5757,"body":[{"type":"ReturnStatement","start":5699,"end":5751,"argument":{"type":"BinaryExpression","start":5706,"end":5750,"left":{"type":"CallExpression","start":5706,"end":5745,"callee":{"type":"MemberExpression","start":5706,"end":5716,"object":{"type":"Identifier","start":5706,"end":5710,"name":"Math"},"property":{"type":"Identifier","start":5711,"end":5716,"name":"floor"},"computed":false,"optional":false},"arguments":[{"type":"BinaryExpression","start":5717,"end":5744,"left":{"type":"CallExpression","start":5717,"end":5730,"callee":{"type":"MemberExpression","start":5717,"end":5728,"object":{"type":"Identifier","start":5717,"end":5721,"name":"Math"},"property":{"type":"Identifier","start":5722,"end":5728,"name":"random"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"*","right":{"type":"Literal","start":5733,"end":5744,"value":10000000000,"raw":"10000000000"}}],"optional":false},"operator":"+","right":{"type":"Literal","start":5748,"end":5750,"value":"","raw":"''"}}}]}}},{"type":"MethodDefinition","start":5762,"end":5977,"static":false,"computed":false,"key":{"type":"Identifier","start":5762,"end":5772,"name":"resetStats"},"kind":"method","value":{"type":"FunctionExpression","start":5772,"end":5977,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5773,"end":5782,"name":"lockStats"}],"body":{"type":"BlockStatement","start":5784,"end":5977,"body":[{"type":"ExpressionStatement","start":5794,"end":5821,"expression":{"type":"AssignmentExpression","start":5794,"end":5820,"operator":"=","left":{"type":"MemberExpression","start":5794,"end":5816,"object":{"type":"Identifier","start":5794,"end":5803,"name":"lockStats"},"property":{"type":"Identifier","start":5804,"end":5816,"name":"restartCount"},"computed":false,"optional":false},"right":{"type":"Literal","start":5819,"end":5820,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5830,"end":5854,"expression":{"type":"AssignmentExpression","start":5830,"end":5853,"operator":"=","left":{"type":"MemberExpression","start":5830,"end":5849,"object":{"type":"Identifier","start":5830,"end":5839,"name":"lockStats"},"property":{"type":"Identifier","start":5840,"end":5849,"name":"locksLost"},"computed":false,"optional":false},"right":{"type":"Literal","start":5852,"end":5853,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5863,"end":5893,"expression":{"type":"AssignmentExpression","start":5863,"end":5892,"operator":"=","left":{"type":"MemberExpression","start":5863,"end":5888,"object":{"type":"Identifier","start":5863,"end":5872,"name":"lockStats"},"property":{"type":"Identifier","start":5873,"end":5888,"name":"contentionCount"},"computed":false,"optional":false},"right":{"type":"Literal","start":5891,"end":5892,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5902,"end":5932,"expression":{"type":"AssignmentExpression","start":5902,"end":5931,"operator":"=","left":{"type":"MemberExpression","start":5902,"end":5927,"object":{"type":"Identifier","start":5902,"end":5911,"name":"lockStats"},"property":{"type":"Identifier","start":5912,"end":5927,"name":"acquireDuration"},"computed":false,"optional":false},"right":{"type":"Literal","start":5930,"end":5931,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":5941,"end":5971,"expression":{"type":"AssignmentExpression","start":5941,"end":5970,"operator":"=","left":{"type":"MemberExpression","start":5941,"end":5963,"object":{"type":"Identifier","start":5941,"end":5950,"name":"lockStats"},"property":{"type":"Identifier","start":5951,"end":5963,"name":"acquireStart"},"computed":false,"optional":false},"right":{"type":"Literal","start":5966,"end":5970,"value":null,"raw":"null"}}}]}}},{"type":"MethodDefinition","start":5982,"end":6286,"static":false,"computed":false,"key":{"type":"Identifier","start":5982,"end":5998,"name":"resolveWithStats"},"kind":"method","value":{"type":"FunctionExpression","start":5998,"end":6286,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5999,"end":6009,"name":"subscriber"},{"type":"Identifier","start":6011,"end":6016,"name":"stats"}],"body":{"type":"BlockStatement","start":6018,"end":6286,"body":[{"type":"VariableDeclaration","start":6028,"end":6067,"declarations":[{"type":"VariableDeclarator","start":6032,"end":6066,"id":{"type":"Identifier","start":6032,"end":6043,"name":"currentTime"},"init":{"type":"CallExpression","start":6046,"end":6066,"callee":{"type":"MemberExpression","start":6046,"end":6064,"object":{"type":"NewExpression","start":6046,"end":6056,"callee":{"type":"Identifier","start":6050,"end":6054,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6057,"end":6064,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}}],"kind":"var"},{"type":"ExpressionStatement","start":6076,"end":6107,"expression":{"type":"AssignmentExpression","start":6076,"end":6106,"operator":"=","left":{"type":"MemberExpression","start":6076,"end":6092,"object":{"type":"Identifier","start":6076,"end":6081,"name":"stats"},"property":{"type":"Identifier","start":6082,"end":6092,"name":"acquireEnd"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6095,"end":6106,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6116,"end":6178,"expression":{"type":"AssignmentExpression","start":6116,"end":6177,"operator":"=","left":{"type":"MemberExpression","start":6116,"end":6137,"object":{"type":"Identifier","start":6116,"end":6121,"name":"stats"},"property":{"type":"Identifier","start":6122,"end":6137,"name":"acquireDuration"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":6140,"end":6177,"left":{"type":"MemberExpression","start":6140,"end":6156,"object":{"type":"Identifier","start":6140,"end":6145,"name":"stats"},"property":{"type":"Identifier","start":6146,"end":6156,"name":"acquireEnd"},"computed":false,"optional":false},"operator":"-","right":{"type":"MemberExpression","start":6159,"end":6177,"object":{"type":"Identifier","start":6159,"end":6164,"name":"stats"},"property":{"type":"Identifier","start":6165,"end":6177,"name":"acquireStart"},"computed":false,"optional":false}}}},{"type":"ExpressionStatement","start":6187,"end":6217,"expression":{"type":"AssignmentExpression","start":6187,"end":6216,"operator":"=","left":{"type":"MemberExpression","start":6187,"end":6202,"object":{"type":"Identifier","start":6187,"end":6192,"name":"stats"},"property":{"type":"Identifier","start":6193,"end":6202,"name":"lockStart"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6205,"end":6216,"name":"currentTime"}}},{"type":"ExpressionStatement","start":6226,"end":6249,"expression":{"type":"CallExpression","start":6226,"end":6248,"callee":{"type":"MemberExpression","start":6226,"end":6241,"object":{"type":"Identifier","start":6226,"end":6236,"name":"subscriber"},"property":{"type":"Identifier","start":6237,"end":6241,"name":"next"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6242,"end":6247,"name":"stats"}],"optional":false}},{"type":"ExpressionStatement","start":6258,"end":6280,"expression":{"type":"CallExpression","start":6258,"end":6279,"callee":{"type":"MemberExpression","start":6258,"end":6277,"object":{"type":"Identifier","start":6258,"end":6268,"name":"subscriber"},"property":{"type":"Identifier","start":6269,"end":6277,"name":"complete"},"computed":false,"optional":false},"arguments":[],"optional":false}}]}}},{"type":"MethodDefinition","start":6457,"end":6703,"static":false,"computed":false,"key":{"type":"Identifier","start":6457,"end":6465,"name":"_setItem"},"kind":"method","value":{"type":"FunctionExpression","start":6465,"end":6703,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6466,"end":6469,"name":"key"},{"type":"Identifier","start":6471,"end":6479,"name":"clientId"},{"type":"Identifier","start":6481,"end":6488,"name":"timeout"}],"body":{"type":"BlockStatement","start":6490,"end":6703,"body":[{"type":"VariableDeclaration","start":6500,"end":6530,"declarations":[{"type":"VariableDeclarator","start":6504,"end":6529,"id":{"type":"Identifier","start":6504,"end":6512,"name":"lockItem"},"init":{"type":"NewExpression","start":6515,"end":6529,"callee":{"type":"Identifier","start":6519,"end":6527,"name":"LockItem"},"arguments":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":6539,"end":6568,"expression":{"type":"AssignmentExpression","start":6539,"end":6567,"operator":"=","left":{"type":"MemberExpression","start":6539,"end":6556,"object":{"type":"Identifier","start":6539,"end":6547,"name":"lockItem"},"property":{"type":"Identifier","start":6548,"end":6556,"name":"clientId"},"computed":false,"optional":false},"right":{"type":"Identifier","start":6559,"end":6567,"name":"clientId"}}},{"type":"ExpressionStatement","start":6577,"end":6629,"expression":{"type":"AssignmentExpression","start":6577,"end":6628,"operator":"=","left":{"type":"MemberExpression","start":6577,"end":6595,"object":{"type":"Identifier","start":6577,"end":6585,"name":"lockItem"},"property":{"type":"Identifier","start":6586,"end":6595,"name":"expiresAt"},"computed":false,"optional":false},"right":{"type":"BinaryExpression","start":6598,"end":6628,"left":{"type":"CallExpression","start":6598,"end":6618,"callee":{"type":"MemberExpression","start":6598,"end":6616,"object":{"type":"NewExpression","start":6598,"end":6608,"callee":{"type":"Identifier","start":6602,"end":6606,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6609,"end":6616,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"+","right":{"type":"Identifier","start":6621,"end":6628,"name":"timeout"}}}},{"type":"ReturnStatement","start":6638,"end":6697,"argument":{"type":"CallExpression","start":6645,"end":6696,"callee":{"type":"MemberExpression","start":6645,"end":6665,"object":{"type":"Identifier","start":6645,"end":6657,"name":"localStorage"},"property":{"type":"Identifier","start":6658,"end":6665,"name":"setItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6666,"end":6669,"name":"key"},{"type":"CallExpression","start":6671,"end":6695,"callee":{"type":"MemberExpression","start":6671,"end":6685,"object":{"type":"Identifier","start":6671,"end":6675,"name":"JSON"},"property":{"type":"Identifier","start":6676,"end":6685,"name":"stringify"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6686,"end":6694,"name":"lockItem"}],"optional":false}],"optional":false}}]}}},{"type":"MethodDefinition","start":6796,"end":7272,"static":false,"computed":false,"key":{"type":"Identifier","start":6796,"end":6804,"name":"_getItem"},"kind":"method","value":{"type":"FunctionExpression","start":6804,"end":7272,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6805,"end":6808,"name":"key"},{"type":"Identifier","start":6810,"end":6817,"name":"timeout"}],"body":{"type":"BlockStatement","start":6819,"end":7272,"body":[{"type":"VariableDeclaration","start":6829,"end":6866,"declarations":[{"type":"VariableDeclarator","start":6833,"end":6865,"id":{"type":"Identifier","start":6833,"end":6837,"name":"item"},"init":{"type":"CallExpression","start":6840,"end":6865,"callee":{"type":"MemberExpression","start":6840,"end":6860,"object":{"type":"Identifier","start":6840,"end":6852,"name":"localStorage"},"property":{"type":"Identifier","start":6853,"end":6860,"name":"getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6861,"end":6864,"name":"key"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":6875,"end":6910,"test":{"type":"UnaryExpression","start":6879,"end":6884,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":6880,"end":6884,"name":"item"}},"consequent":{"type":"ReturnStatement","start":6898,"end":6910,"argument":{"type":"Literal","start":6905,"end":6909,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":6919,"end":6951,"declarations":[{"type":"VariableDeclarator","start":6923,"end":6950,"id":{"type":"Identifier","start":6923,"end":6931,"name":"lockItem"},"init":{"type":"CallExpression","start":6934,"end":6950,"callee":{"type":"MemberExpression","start":6934,"end":6944,"object":{"type":"Identifier","start":6934,"end":6938,"name":"JSON"},"property":{"type":"Identifier","start":6939,"end":6944,"name":"parse"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":6945,"end":6949,"name":"item"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":6960,"end":7232,"test":{"type":"BinaryExpression","start":6964,"end":7016,"left":{"type":"BinaryExpression","start":6964,"end":7005,"left":{"type":"CallExpression","start":6964,"end":6984,"callee":{"type":"MemberExpression","start":6964,"end":6982,"object":{"type":"NewExpression","start":6964,"end":6974,"callee":{"type":"Identifier","start":6968,"end":6972,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":6975,"end":6982,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false},"operator":"-","right":{"type":"MemberExpression","start":6987,"end":7005,"object":{"type":"Identifier","start":6987,"end":6995,"name":"lockItem"},"property":{"type":"Identifier","start":6996,"end":7005,"name":"expiresAt"},"computed":false,"optional":false}},"operator":">=","right":{"type":"Identifier","start":7009,"end":7016,"name":"timeout"}},"consequent":{"type":"BlockStatement","start":7018,"end":7232,"body":[{"type":"ExpressionStatement","start":7032,"end":7155,"expression":{"type":"LogicalExpression","start":7032,"end":7154,"left":{"type":"MemberExpression","start":7032,"end":7057,"object":{"type":"MemberExpression","start":7032,"end":7044,"object":{"type":"ThisExpression","start":7032,"end":7036},"property":{"type":"Identifier","start":7037,"end":7044,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":7045,"end":7057,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":7061,"end":7154,"callee":{"type":"MemberExpression","start":7061,"end":7074,"object":{"type":"Identifier","start":7061,"end":7068,"name":"console"},"property":{"type":"Identifier","start":7069,"end":7074,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":7075,"end":7132,"value":"FastMutex client \"%s\" removed an expired record on \"%s\"","raw":"'FastMutex client \"%s\" removed an expired record on \"%s\"'"},{"type":"MemberExpression","start":7134,"end":7148,"object":{"type":"ThisExpression","start":7134,"end":7138},"property":{"type":"Identifier","start":7139,"end":7148,"name":"_clientId"},"computed":false,"optional":false},{"type":"Identifier","start":7150,"end":7153,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":7168,"end":7197,"expression":{"type":"CallExpression","start":7168,"end":7196,"callee":{"type":"MemberExpression","start":7168,"end":7191,"object":{"type":"Identifier","start":7168,"end":7180,"name":"localStorage"},"property":{"type":"Identifier","start":7181,"end":7191,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7192,"end":7195,"name":"key"}],"optional":false}},{"type":"ReturnStatement","start":7210,"end":7222,"argument":{"type":"Literal","start":7217,"end":7221,"value":null,"raw":"null"}}]},"alternate":null},{"type":"ReturnStatement","start":7241,"end":7266,"argument":{"type":"MemberExpression","start":7248,"end":7265,"object":{"type":"Identifier","start":7248,"end":7256,"name":"lockItem"},"property":{"type":"Identifier","start":7257,"end":7265,"name":"clientId"},"computed":false,"optional":false}}]}}},{"type":"MethodDefinition","start":7277,"end":7663,"static":false,"computed":false,"key":{"type":"Identifier","start":7277,"end":7296,"name":"_releaseExpiredLock"},"kind":"method","value":{"type":"FunctionExpression","start":7296,"end":7663,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7297,"end":7300,"name":"key"}],"body":{"type":"BlockStatement","start":7302,"end":7663,"body":[{"type":"VariableDeclaration","start":7312,"end":7349,"declarations":[{"type":"VariableDeclarator","start":7316,"end":7348,"id":{"type":"Identifier","start":7316,"end":7320,"name":"item"},"init":{"type":"CallExpression","start":7323,"end":7348,"callee":{"type":"MemberExpression","start":7323,"end":7343,"object":{"type":"Identifier","start":7323,"end":7335,"name":"localStorage"},"property":{"type":"Identifier","start":7336,"end":7343,"name":"getItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7344,"end":7347,"name":"key"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":7358,"end":7393,"test":{"type":"UnaryExpression","start":7362,"end":7367,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":7363,"end":7367,"name":"item"}},"consequent":{"type":"ReturnStatement","start":7381,"end":7393,"argument":{"type":"Literal","start":7388,"end":7392,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":7402,"end":7434,"declarations":[{"type":"VariableDeclarator","start":7406,"end":7433,"id":{"type":"Identifier","start":7406,"end":7414,"name":"lockItem"},"init":{"type":"CallExpression","start":7417,"end":7433,"callee":{"type":"MemberExpression","start":7417,"end":7427,"object":{"type":"Identifier","start":7417,"end":7421,"name":"JSON"},"property":{"type":"Identifier","start":7422,"end":7427,"name":"parse"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7428,"end":7432,"name":"item"}],"optional":false}}],"kind":"var"},{"type":"IfStatement","start":7443,"end":7657,"test":{"type":"BinaryExpression","start":7447,"end":7489,"left":{"type":"MemberExpression","start":7447,"end":7465,"object":{"type":"Identifier","start":7447,"end":7455,"name":"lockItem"},"property":{"type":"Identifier","start":7456,"end":7465,"name":"expiresAt"},"computed":false,"optional":false},"operator":"<=","right":{"type":"CallExpression","start":7469,"end":7489,"callee":{"type":"MemberExpression","start":7469,"end":7487,"object":{"type":"NewExpression","start":7469,"end":7479,"callee":{"type":"Identifier","start":7473,"end":7477,"name":"Date"},"arguments":[]},"property":{"type":"Identifier","start":7480,"end":7487,"name":"getTime"},"computed":false,"optional":false},"arguments":[],"optional":false}},"consequent":{"type":"BlockStatement","start":7491,"end":7657,"body":[{"type":"ExpressionStatement","start":7505,"end":7605,"expression":{"type":"LogicalExpression","start":7505,"end":7604,"left":{"type":"MemberExpression","start":7505,"end":7530,"object":{"type":"MemberExpression","start":7505,"end":7517,"object":{"type":"ThisExpression","start":7505,"end":7509},"property":{"type":"Identifier","start":7510,"end":7517,"name":"_config"},"computed":false,"optional":false},"property":{"type":"Identifier","start":7518,"end":7530,"name":"debugEnabled"},"computed":false,"optional":false},"operator":"??","right":{"type":"CallExpression","start":7534,"end":7604,"callee":{"type":"MemberExpression","start":7534,"end":7547,"object":{"type":"Identifier","start":7534,"end":7541,"name":"console"},"property":{"type":"Identifier","start":7542,"end":7547,"name":"debug"},"computed":false,"optional":false},"arguments":[{"type":"Literal","start":7548,"end":7598,"value":"FastMutex auto removed an expired record on \"%s\"","raw":"'FastMutex auto removed an expired record on \"%s\"'"},{"type":"Identifier","start":7600,"end":7603,"name":"key"}],"optional":false}}},{"type":"ExpressionStatement","start":7618,"end":7647,"expression":{"type":"CallExpression","start":7618,"end":7646,"callee":{"type":"MemberExpression","start":7618,"end":7641,"object":{"type":"Identifier","start":7618,"end":7630,"name":"localStorage"},"property":{"type":"Identifier","start":7631,"end":7641,"name":"removeItem"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7642,"end":7645,"name":"key"}],"optional":false}}]},"alternate":null}]}}}]}},"specifiers":[],"source":null},{"type":"ExpressionStatement","start":7666,"end":7816,"expression":{"type":"AssignmentExpression","start":7666,"end":7815,"operator":"=","left":{"type":"MemberExpression","start":7666,"end":7691,"object":{"type":"Identifier","start":7666,"end":7686,"name":"MutexFastLockService"},"property":{"type":"Identifier","start":7687,"end":7691,"name":"fac"},"computed":false,"optional":false},"right":{"type":"FunctionExpression","start":7694,"end":7815,"id":{"type":"Identifier","start":7703,"end":7731,"name":"MutexFastLockService_Factory"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7732,"end":7733,"name":"t"}],"body":{"type":"BlockStatement","start":7735,"end":7815,"body":[{"type":"ReturnStatement","start":7737,"end":7813,"argument":{"type":"NewExpression","start":7744,"end":7812,"callee":{"type":"LogicalExpression","start":7749,"end":7774,"left":{"type":"Identifier","start":7749,"end":7750,"name":"t"},"operator":"||","right":{"type":"Identifier","start":7754,"end":7774,"name":"MutexFastLockService"}},"arguments":[{"type":"CallExpression","start":7776,"end":7811,"callee":{"type":"MemberExpression","start":7776,"end":7787,"object":{"type":"Identifier","start":7776,"end":7778,"name":"i0"},"property":{"type":"Identifier","start":7779,"end":7787,"name":"inject"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":7788,"end":7810,"name":"MUTEX_FAST_LOCK_CONFIG"}],"optional":false}]}}]}}}},{"type":"ExpressionStatement","start":7817,"end":7971,"expression":{"type":"AssignmentExpression","start":7817,"end":7970,"operator":"=","left":{"type":"MemberExpression","start":7817,"end":7843,"object":{"type":"Identifier","start":7817,"end":7837,"name":"MutexFastLockService"},"property":{"type":"Identifier","start":7838,"end":7843,"name":"prov"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":7860,"end":7970,"callee":{"type":"MemberExpression","start":7860,"end":7881,"object":{"type":"Identifier","start":7860,"end":7862,"name":"i0"},"property":{"type":"Identifier","start":7863,"end":7881,"name":"defineInjectable"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":7882,"end":7969,"properties":[{"type":"Property","start":7884,"end":7911,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7884,"end":7889,"name":"token"},"value":{"type":"Identifier","start":7891,"end":7911,"name":"MutexFastLockService"},"kind":"init"},{"type":"Property","start":7913,"end":7947,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7913,"end":7920,"name":"factory"},"value":{"type":"MemberExpression","start":7922,"end":7947,"object":{"type":"Identifier","start":7922,"end":7942,"name":"MutexFastLockService"},"property":{"type":"Identifier","start":7943,"end":7947,"name":"fac"},"computed":false,"optional":false},"kind":"init"},{"type":"Property","start":7949,"end":7967,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7949,"end":7959,"name":"providedIn"},"value":{"type":"Literal","start":7961,"end":7967,"value":"root","raw":"'root'"},"kind":"init"}]}],"optional":false,"_rollupAnnotations":[{"type":"Block","value":"@__PURE__","start":7846,"end":7859}]}}},{"type":"ExpressionStatement","start":7972,"end":8365,"expression":{"type":"CallExpression","start":7972,"end":8364,"callee":{"type":"FunctionExpression","start":7973,"end":8361,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":7985,"end":8361,"body":[{"type":"ExpressionStatement","start":7987,"end":8359,"expression":{"type":"LogicalExpression","start":7987,"end":8358,"left":{"type":"LogicalExpression","start":7988,"end":8033,"left":{"type":"BinaryExpression","start":7988,"end":8020,"left":{"type":"UnaryExpression","start":7988,"end":8004,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":7995,"end":8004,"name":"ngDevMode"}},"operator":"===","right":{"type":"Literal","start":8009,"end":8020,"value":"undefined","raw":"\"undefined\""}},"operator":"||","right":{"type":"Identifier","start":8024,"end":8033,"name":"ngDevMode"}},"operator":"&&","right":{"type":"CallExpression","start":8038,"end":8358,"callee":{"type":"MemberExpression","start":8038,"end":8058,"object":{"type":"Identifier","start":8038,"end":8040,"name":"i0"},"property":{"type":"Identifier","start":8041,"end":8058,"name":"setClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":8059,"end":8079,"name":"MutexFastLockService"},{"type":"ArrayExpression","start":8081,"end":8183,"elements":[{"type":"ObjectExpression","start":8082,"end":8182,"properties":[{"type":"Property","start":8092,"end":8108,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8092,"end":8096,"name":"type"},"value":{"type":"Identifier","start":8098,"end":8108,"name":"Injectable"},"kind":"init"},{"type":"Property","start":8118,"end":8176,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8118,"end":8122,"name":"args"},"value":{"type":"ArrayExpression","start":8124,"end":8176,"elements":[{"type":"ObjectExpression","start":8125,"end":8175,"properties":[{"type":"Property","start":8143,"end":8161,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8143,"end":8153,"name":"providedIn"},"value":{"type":"Literal","start":8155,"end":8161,"value":"root","raw":"'root'"},"kind":"init"}]}]},"kind":"init"}]}]},{"type":"FunctionExpression","start":8185,"end":8351,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8197,"end":8351,"body":[{"type":"ReturnStatement","start":8199,"end":8349,"argument":{"type":"ArrayExpression","start":8206,"end":8348,"elements":[{"type":"ObjectExpression","start":8207,"end":8347,"properties":[{"type":"Property","start":8209,"end":8237,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8209,"end":8213,"name":"type"},"value":{"type":"MemberExpression","start":8215,"end":8237,"object":{"type":"Identifier","start":8215,"end":8217,"name":"i1"},"property":{"type":"Identifier","start":8218,"end":8237,"name":"MutexFastLockConfig"},"computed":false,"optional":false},"kind":"init"},{"type":"Property","start":8239,"end":8345,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8239,"end":8249,"name":"decorators"},"value":{"type":"ArrayExpression","start":8251,"end":8345,"elements":[{"type":"ObjectExpression","start":8252,"end":8344,"properties":[{"type":"Property","start":8270,"end":8282,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8270,"end":8274,"name":"type"},"value":{"type":"Identifier","start":8276,"end":8282,"name":"Inject"},"kind":"init"},{"type":"Property","start":8300,"end":8330,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8300,"end":8304,"name":"args"},"value":{"type":"ArrayExpression","start":8306,"end":8330,"elements":[{"type":"Identifier","start":8307,"end":8329,"name":"MUTEX_FAST_LOCK_CONFIG"}]},"kind":"init"}]}]},"kind":"init"}]}]}}]}},{"type":"Literal","start":8353,"end":8357,"value":null,"raw":"null"}],"optional":false}}}]}},"arguments":[],"optional":false}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUs5QyxNQUFNLE9BQU8sb0JBQW9CO0lBTS9CLFlBQ21ELE9BQTRCO1FBQTVCLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBRTdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRTtZQUNsRCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFFYixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDNUMsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElB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QztRQUMxQyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsSUFBSSxPQUFPLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyx5REFBeUQsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNILFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0IsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUVELE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRU8sbUJBQW1CLENBQUMsR0FBVztRQUNyQyxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXJDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFFdkIsSUFBSSxRQUFRLEdBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUxQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3BHLFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDOUI7SUFDSCxDQUFDOzt3RkFuTVUsb0JBQW9CLGNBT3JCLHNCQUFzQjswRUFQckIsb0JBQW9CLFdBQXBCLG9CQUFvQixtQkFGbkIsTUFBTTt1RkFFUCxvQkFBb0I7Y0FIaEMsVUFBVTtlQUFDO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25COztzQkFRSSxNQUFNO3VCQUFDLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5pbXBvcnQgeyBNdXRleExvY2tTdGF0cyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTG9ja0l0ZW0gfSBmcm9tICcuL21vZGVscy9sb2NrLWl0ZW0nO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBfY2xpZW50SWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xuICBwcml2YXRlIF95UHJlZml4OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChNVVRFWF9GQVNUX0xPQ0tfQ09ORklHKSBwcml2YXRlIHJlYWRvbmx5IF9jb25maWc6IE11dGV4RmFzdExvY2tDb25maWcsXG4gICkge1xuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xuICAgIHRoaXMuX3hQcmVmaXggPSBfY29uZmlnLmxvY2tQcmVmaXggKyAnX1hfJztcbiAgICB0aGlzLl95UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19ZXyc7XG5cbiAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICB2YXIgYXJyID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxuICAgICAgICAgIHx8IGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZih0aGF0Ll95UHJlZml4KSA9PSAwKSB7XG4gICAgICAgICAgYXJyLnB1c2gobG9jYWxTdG9yYWdlLmtleShpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYXJyW2ldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBsZXQgeExvY2sgPSB0aGF0Ll94UHJlZml4ICsga2V5O1xuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XG5cbiAgICBsZXQgbG9ja1N0YXRzOiBNdXRleExvY2tTdGF0cyA9IG5ldyBNdXRleExvY2tTdGF0cygpO1xuXG4gICAgdGhhdC5yZXNldFN0YXRzKGxvY2tTdGF0cyk7XG5cbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XG5cbiAgICBsb2NrU3RhdHMuYWNxdWlyZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAvL3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE11dGV4TG9ja1N0YXRzPihzdWJzY3JpYmVyID0+IHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxuICAgICAgLy8gcmVjdXJzaXZlIGNhbGxzIHNvIHRoYXQgd2UgY2FuIHRpbWVvdXQgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGxvY2soKSBhbmRcbiAgICAgIC8vIG5vdCBlYWNoIHN1YnNlcXVlbnQgY2FsbC4gIFRoZXJlZm9yZSwgY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGhlcmUgd2l0aGluXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxuICAgICAgbGV0IGFjcXVpcmVMb2NrID0gZnVuY3Rpb24gYWNxdWlyZUxvY2soa2V5KSB7XG5cbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHlMb2NrKTtcblxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSB0aW1lb3V0KSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIG9uIFwiJXNcIiBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICVzbXMgYnkgRmFzdE11dGV4IGNsaWVudCBcIiVzXCInLCBrZXksIHRpbWVvdXQsIHRoYXQuX2NsaWVudElkKTtcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHkgZXhpc3RzLCBhbm90aGVyIGNsaWVudCBpcyBnZXR0aW5nIGEgbG9jaywgc28gcmV0cnkgaW4gYSBiaXRcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNZKSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGV4aXN0cyBvbiBZICglcyksIHJlc3RhcnRpbmcuLi4nLCBsc1kpO1xuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3F1aXJlTG9jayhrZXkpO1xuICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhc2sgZm9yIGlubmVyIGxvY2tcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh5TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHggd2FzIGNoYW5nZWQsIGFub3RoZXIgY2xpZW50IGlzIGNvbnRlbmRpbmcgZm9yIGFuIGlubmVyIGxvY2tcbiAgICAgICAgdmFyIGxzWCA9IHRoYXQuX2dldEl0ZW0oeExvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xuICAgICAgICAgIGxvY2tTdGF0cy5jb250ZW50aW9uQ291bnQrKztcbiAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0xvY2sgY29udGVudGlvbiBkZXRlY3RlZC4gWD1cIiVzXCInLCBsc1gpO1xuXG4gICAgICAgICAgLy8gR2l2ZSBlbm91Z2ggdGltZSBmb3IgY3JpdGljYWwgc2VjdGlvbjpcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKGxzWSA9PT0gdGhhdC5fY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIGxvY2tcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcbiAgICAgICAgICAgICAgdGhhdC5yZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXIsIGxvY2tTdGF0cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLmxvY2tzTG9zdCsrO1xuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcbiAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBjb250ZW50aW9uOlxuICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGFjcXVpcmVkIGEgbG9jayBvbiBcIiVzXCIgd2l0aCBubyBjb250ZW50aW9uJywgdGhhdC5fY2xpZW50SWQsIGtleSk7XG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xuICAgICAgfTtcblxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcblxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlbGVhc2Uoa2V5KSB7XG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcblxuICAgIGxldCB4ID0gdGhpcy5feFByZWZpeCArIGtleTtcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeSk7XG5cbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tFbmQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tEdXJhdGlvbiA9IHRoYXQubG9ja1N0YXRzLmxvY2tFbmQgLSB0aGF0LmxvY2tTdGF0cy5sb2NrU3RhcnQ7XG5cbiAgICAvL2xldCByZXRTdGF0cyA9IGFuZ3VsYXIuY29weSh0aGF0LmxvY2tTdGF0cyk7XG5cbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xuXG4gICAgLy9yZXR1cm4gcmV0U3RhdHM7XG4gIH1cblxuICBwcml2YXRlIF9nZW5lcmF0ZVJhbmRvbUlkKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XG4gICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmxvY2tzTG9zdCA9IDA7XG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVEdXJhdGlvbiA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIHJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxNdXRleExvY2tTdGF0cz4sIHN0YXRzOiBNdXRleExvY2tTdGF0cykge1xuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHN0YXRzLmFjcXVpcmVFbmQgPSBjdXJyZW50VGltZTtcbiAgICBzdGF0cy5hY3F1aXJlRHVyYXRpb24gPSBzdGF0cy5hY3F1aXJlRW5kIC0gc3RhdHMuYWNxdWlyZVN0YXJ0O1xuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xuICAgIHN1YnNjcmliZXIubmV4dChzdGF0cyk7XG4gICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXG4gICAqIHRoYXQgd2UgY2FuIGV4cGlyZSBpdCBpbiB0aGUgZnV0dXJlKSBhbmQganNvbi5zdHJpbmdpZnkncyBpdFxuICAgKi9cbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XG4gICAgbGV0IGxvY2tJdGVtID0gbmV3IExvY2tJdGVtKCk7XG4gICAgbG9ja0l0ZW0uY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobG9ja0l0ZW0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgSlNPTiBlbmNvZGVkIHZhbHVlcyBzZXQgaW4gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBwcml2YXRlIF9nZXRJdGVtKGtleSwgdGltZW91dCkge1xuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblxuICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcbiAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2NrSXRlbS5leHBpcmVzQXQgPj0gdGltZW91dCkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBsb2NrSXRlbS5jbGllbnRJZDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbGVhc2VFeHBpcmVkTG9jayhrZXk6IHN0cmluZyl7XG4gICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xuXG4gICAgaWYgKGxvY2tJdGVtLmV4cGlyZXNBdCA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cbiAgfVxufVxuIl19","start":8366,"end":26540}]},"code":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nexport class MutexFastLockService {\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n}\nMutexFastLockService.fac = function MutexFastLockService_Factory(t) { return new (t || MutexFastLockService)(i0.inject(MUTEX_FAST_LOCK_CONFIG)); };\nMutexFastLockService.prov = /*@__PURE__*/ i0.defineInjectable({ token: MutexFastLockService, factory: MutexFastLockService.fac, providedIn: 'root' });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(MutexFastLockService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: i1.MutexFastLockConfig, decorators: [{\n                type: Inject,\n                args: [MUTEX_FAST_LOCK_CONFIG]\n            }] }]; }, null); })();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUs5QyxNQUFNLE9BQU8sb0JBQW9CO0lBTS9CLFlBQ21ELE9BQTRCO1FBQTVCLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBRTdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRTtZQUNsRCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFFYixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDNUMsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElB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QztRQUMxQyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsSUFBSSxPQUFPLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyx5REFBeUQsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNILFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0IsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUVELE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRU8sbUJBQW1CLENBQUMsR0FBVztRQUNyQyxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXJDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFFdkIsSUFBSSxRQUFRLEdBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUxQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3BHLFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDOUI7SUFDSCxDQUFDOzt3RkFuTVUsb0JBQW9CLGNBT3JCLHNCQUFzQjswRUFQckIsb0JBQW9CLFdBQXBCLG9CQUFvQixtQkFGbkIsTUFBTTt1RkFFUCxvQkFBb0I7Y0FIaEMsVUFBVTtlQUFDO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25COztzQkFRSSxNQUFNO3VCQUFDLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5pbXBvcnQgeyBNdXRleExvY2tTdGF0cyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTG9ja0l0ZW0gfSBmcm9tICcuL21vZGVscy9sb2NrLWl0ZW0nO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBfY2xpZW50SWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xuICBwcml2YXRlIF95UHJlZml4OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChNVVRFWF9GQVNUX0xPQ0tfQ09ORklHKSBwcml2YXRlIHJlYWRvbmx5IF9jb25maWc6IE11dGV4RmFzdExvY2tDb25maWcsXG4gICkge1xuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xuICAgIHRoaXMuX3hQcmVmaXggPSBfY29uZmlnLmxvY2tQcmVmaXggKyAnX1hfJztcbiAgICB0aGlzLl95UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19ZXyc7XG5cbiAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICB2YXIgYXJyID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxuICAgICAgICAgIHx8IGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZih0aGF0Ll95UHJlZml4KSA9PSAwKSB7XG4gICAgICAgICAgYXJyLnB1c2gobG9jYWxTdG9yYWdlLmtleShpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYXJyW2ldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBsZXQgeExvY2sgPSB0aGF0Ll94UHJlZml4ICsga2V5O1xuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XG5cbiAgICBsZXQgbG9ja1N0YXRzOiBNdXRleExvY2tTdGF0cyA9IG5ldyBNdXRleExvY2tTdGF0cygpO1xuXG4gICAgdGhhdC5yZXNldFN0YXRzKGxvY2tTdGF0cyk7XG5cbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XG5cbiAgICBsb2NrU3RhdHMuYWNxdWlyZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAvL3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE11dGV4TG9ja1N0YXRzPihzdWJzY3JpYmVyID0+IHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxuICAgICAgLy8gcmVjdXJzaXZlIGNhbGxzIHNvIHRoYXQgd2UgY2FuIHRpbWVvdXQgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGxvY2soKSBhbmRcbiAgICAgIC8vIG5vdCBlYWNoIHN1YnNlcXVlbnQgY2FsbC4gIFRoZXJlZm9yZSwgY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGhlcmUgd2l0aGluXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxuICAgICAgbGV0IGFjcXVpcmVMb2NrID0gZnVuY3Rpb24gYWNxdWlyZUxvY2soa2V5KSB7XG5cbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHlMb2NrKTtcblxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSB0aW1lb3V0KSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIG9uIFwiJXNcIiBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICVzbXMgYnkgRmFzdE11dGV4IGNsaWVudCBcIiVzXCInLCBrZXksIHRpbWVvdXQsIHRoYXQuX2NsaWVudElkKTtcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHkgZXhpc3RzLCBhbm90aGVyIGNsaWVudCBpcyBnZXR0aW5nIGEgbG9jaywgc28gcmV0cnkgaW4gYSBiaXRcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNZKSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGV4aXN0cyBvbiBZICglcyksIHJlc3RhcnRpbmcuLi4nLCBsc1kpO1xuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3F1aXJlTG9jayhrZXkpO1xuICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhc2sgZm9yIGlubmVyIGxvY2tcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh5TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHggd2FzIGNoYW5nZWQsIGFub3RoZXIgY2xpZW50IGlzIGNvbnRlbmRpbmcgZm9yIGFuIGlubmVyIGxvY2tcbiAgICAgICAgdmFyIGxzWCA9IHRoYXQuX2dldEl0ZW0oeExvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xuICAgICAgICAgIGxvY2tTdGF0cy5jb250ZW50aW9uQ291bnQrKztcbiAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0xvY2sgY29udGVudGlvbiBkZXRlY3RlZC4gWD1cIiVzXCInLCBsc1gpO1xuXG4gICAgICAgICAgLy8gR2l2ZSBlbm91Z2ggdGltZSBmb3IgY3JpdGljYWwgc2VjdGlvbjpcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKGxzWSA9PT0gdGhhdC5fY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIGxvY2tcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcbiAgICAgICAgICAgICAgdGhhdC5yZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXIsIGxvY2tTdGF0cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLmxvY2tzTG9zdCsrO1xuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcbiAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBjb250ZW50aW9uOlxuICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGFjcXVpcmVkIGEgbG9jayBvbiBcIiVzXCIgd2l0aCBubyBjb250ZW50aW9uJywgdGhhdC5fY2xpZW50SWQsIGtleSk7XG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xuICAgICAgfTtcblxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcblxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlbGVhc2Uoa2V5KSB7XG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcblxuICAgIGxldCB4ID0gdGhpcy5feFByZWZpeCArIGtleTtcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeSk7XG5cbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tFbmQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tEdXJhdGlvbiA9IHRoYXQubG9ja1N0YXRzLmxvY2tFbmQgLSB0aGF0LmxvY2tTdGF0cy5sb2NrU3RhcnQ7XG5cbiAgICAvL2xldCByZXRTdGF0cyA9IGFuZ3VsYXIuY29weSh0aGF0LmxvY2tTdGF0cyk7XG5cbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xuXG4gICAgLy9yZXR1cm4gcmV0U3RhdHM7XG4gIH1cblxuICBwcml2YXRlIF9nZW5lcmF0ZVJhbmRvbUlkKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XG4gICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmxvY2tzTG9zdCA9IDA7XG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVEdXJhdGlvbiA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIHJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxNdXRleExvY2tTdGF0cz4sIHN0YXRzOiBNdXRleExvY2tTdGF0cykge1xuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHN0YXRzLmFjcXVpcmVFbmQgPSBjdXJyZW50VGltZTtcbiAgICBzdGF0cy5hY3F1aXJlRHVyYXRpb24gPSBzdGF0cy5hY3F1aXJlRW5kIC0gc3RhdHMuYWNxdWlyZVN0YXJ0O1xuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xuICAgIHN1YnNjcmliZXIubmV4dChzdGF0cyk7XG4gICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXG4gICAqIHRoYXQgd2UgY2FuIGV4cGlyZSBpdCBpbiB0aGUgZnV0dXJlKSBhbmQganNvbi5zdHJpbmdpZnkncyBpdFxuICAgKi9cbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XG4gICAgbGV0IGxvY2tJdGVtID0gbmV3IExvY2tJdGVtKCk7XG4gICAgbG9ja0l0ZW0uY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobG9ja0l0ZW0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgSlNPTiBlbmNvZGVkIHZhbHVlcyBzZXQgaW4gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBwcml2YXRlIF9nZXRJdGVtKGtleSwgdGltZW91dCkge1xuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblxuICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcbiAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2NrSXRlbS5leHBpcmVzQXQgPj0gdGltZW91dCkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBsb2NrSXRlbS5jbGllbnRJZDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbGVhc2VFeHBpcmVkTG9jayhrZXk6IHN0cmluZyl7XG4gICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xuXG4gICAgaWYgKGxvY2tJdGVtLmV4cGlyZXNBdCA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cbiAgfVxufVxuIl19","customTransformCache":false,"dependencies":["@angular/core","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock-config.injector.mjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-lock-stats.mjs","rxjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/lock-item.mjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-fast-lock-config.mjs"],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable } from 'rxjs';\nimport { LockItem } from './models/lock-item';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./models/mutex-fast-lock-config\";\nexport class MutexFastLockService {\n    constructor(_config) {\n        this._config = _config;\n        this._clientId = this._generateRandomId();\n        this._xPrefix = _config.lockPrefix + '_X_';\n        this._yPrefix = _config.lockPrefix + '_Y_';\n        let that = this;\n        window.addEventListener(\"beforeunload\", function (ev) {\n            var arr = [];\n            for (var i = 0; i < localStorage.length; i++) {\n                if (localStorage.key(i).indexOf(that._xPrefix) == 0\n                    || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n                    arr.push(localStorage.key(i));\n                }\n            }\n            for (var i = 0; i < arr.length; i++) {\n                localStorage.removeItem(arr[i]);\n            }\n        });\n    }\n    lock(key, timeout = -1) {\n        let that = this;\n        if (timeout == -1)\n            timeout = this._config.timeout;\n        let xLock = that._xPrefix + key;\n        let yLock = that._yPrefix + key;\n        let lockStats = new MutexLockStats();\n        that.resetStats(lockStats);\n        this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n        lockStats.acquireStart = new Date().getTime();\n        //return new Promise(function (resolve, reject) {\n        return new Observable(subscriber => {\n            // we need to differentiate between API calls to lock() and our internal\n            // recursive calls so that we can timeout based on the original lock() and\n            // not each subsequent call.  Therefore, create a new function here within\n            // the promise closure that we use for subsequent calls:\n            let acquireLock = function acquireLock(key) {\n                that._releaseExpiredLock(xLock);\n                that._releaseExpiredLock(yLock);\n                var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n                if (elapsedTime >= timeout) {\n                    that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n                    subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n                }\n                that._setItem(xLock, that._clientId, timeout);\n                // if y exists, another client is getting a lock, so retry in a bit\n                var lsY = that._getItem(yLock, timeout);\n                if (lsY) {\n                    that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n                    lockStats.restartCount++;\n                    setTimeout(function () {\n                        return acquireLock(key);\n                    }, 10);\n                    return;\n                }\n                // ask for inner lock\n                that._setItem(yLock, that._clientId, timeout);\n                // if x was changed, another client is contending for an inner lock\n                var lsX = that._getItem(xLock, timeout);\n                if (lsX !== that._clientId) {\n                    lockStats.contentionCount++;\n                    that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n                    // Give enough time for critical section:\n                    setTimeout(function () {\n                        lsY = that._getItem(yLock, timeout);\n                        if (lsY === that._clientId) {\n                            // we have a lock\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n                            that.resolveWithStats(subscriber, lockStats);\n                        }\n                        else {\n                            // we lost the lock, restart the process again\n                            lockStats.restartCount++;\n                            lockStats.locksLost++;\n                            that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n                            setTimeout(function () {\n                                return acquireLock(key);\n                            }, 10);\n                        }\n                    }, 100);\n                    return;\n                }\n                // no contention:\n                that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n                that.resolveWithStats(subscriber, lockStats);\n            };\n            acquireLock(key);\n        });\n    }\n    release(key) {\n        this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n        let x = this._xPrefix + key;\n        let y = this._yPrefix + key;\n        localStorage.removeItem(x);\n        localStorage.removeItem(y);\n        //that.lockStats.lockEnd = new Date().getTime();\n        //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n        //let retStats = angular.copy(that.lockStats);\n        //that.resetStats();\n        //return retStats;\n    }\n    _generateRandomId() {\n        return Math.floor(Math.random() * 10000000000) + '';\n    }\n    resetStats(lockStats) {\n        lockStats.restartCount = 0;\n        lockStats.locksLost = 0;\n        lockStats.contentionCount = 0;\n        lockStats.acquireDuration = 0;\n        lockStats.acquireStart = null;\n    }\n    resolveWithStats(subscriber, stats) {\n        var currentTime = new Date().getTime();\n        stats.acquireEnd = currentTime;\n        stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n        stats.lockStart = currentTime;\n        subscriber.next(stats);\n        subscriber.complete();\n    }\n    /**\n     * Helper function to wrap all values in an object that includes the time (so\n     * that we can expire it in the future) and json.stringify's it\n     */\n    _setItem(key, clientId, timeout) {\n        let lockItem = new LockItem();\n        lockItem.clientId = clientId;\n        lockItem.expiresAt = new Date().getTime() + timeout;\n        return localStorage.setItem(key, JSON.stringify(lockItem));\n    }\n    /**\n     * Helper function to parse JSON encoded values set in localStorage\n     */\n    _getItem(key, timeout) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n            this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n            localStorage.removeItem(key);\n            return null;\n        }\n        return lockItem.clientId;\n    }\n    _releaseExpiredLock(key) {\n        var item = localStorage.getItem(key);\n        if (!item)\n            return null;\n        var lockItem = JSON.parse(item);\n        if (lockItem.expiresAt <= new Date().getTime()) {\n            this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n            localStorage.removeItem(key);\n        }\n    }\n}\nMutexFastLockService.fac = function MutexFastLockService_Factory(t) { return new (t || MutexFastLockService)(i0.inject(MUTEX_FAST_LOCK_CONFIG)); };\nMutexFastLockService.prov = /*@__PURE__*/ i0.defineInjectable({ token: MutexFastLockService, factory: MutexFastLockService.fac, providedIn: 'root' });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(MutexFastLockService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: i1.MutexFastLockConfig, decorators: [{\n                type: Inject,\n                args: [MUTEX_FAST_LOCK_CONFIG]\n            }] }]; }, null); })();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tdXRleC1mYXN0LWxvY2svc3JjL2xpYi9tdXRleC1mYXN0LWxvY2suc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUUzRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFVBQVUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUM5QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7OztBQUs5QyxNQUFNLE9BQU8sb0JBQW9CO0lBTS9CLFlBQ21ELE9BQTRCO1FBQTVCLFlBQU8sR0FBUCxPQUFPLENBQXFCO1FBRTdFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBRTNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLFVBQVUsRUFBRTtZQUNsRCxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFFYixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDNUMsSUFBSSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElB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QztRQUMxQyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsSUFBSSxPQUFPLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyx5REFBeUQsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzNILFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDN0IsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUVELE9BQU8sUUFBUSxDQUFDLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRU8sbUJBQW1CLENBQUMsR0FBVztRQUNyQyxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXJDLElBQUksQ0FBQyxJQUFJO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFFdkIsSUFBSSxRQUFRLEdBQWEsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUxQyxJQUFJLFFBQVEsQ0FBQyxTQUFTLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUM5QyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3BHLFlBQVksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDOUI7SUFDSCxDQUFDOzt3RkFuTVUsb0JBQW9CLGNBT3JCLHNCQUFzQjswRUFQckIsb0JBQW9CLFdBQXBCLG9CQUFvQixtQkFGbkIsTUFBTTt1RkFFUCxvQkFBb0I7Y0FIaEMsVUFBVTtlQUFDO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25COztzQkFRSSxNQUFNO3VCQUFDLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gJy4vbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZy5pbmplY3Rvcic7XG5pbXBvcnQgeyBNdXRleEZhc3RMb2NrQ29uZmlnIH0gZnJvbSAnLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZyc7XG5pbXBvcnQgeyBNdXRleExvY2tTdGF0cyB9IGZyb20gJy4vbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTG9ja0l0ZW0gfSBmcm9tICcuL21vZGVscy9sb2NrLWl0ZW0nO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBfY2xpZW50SWQ6IHN0cmluZztcbiAgcHJpdmF0ZSBfeFByZWZpeDogc3RyaW5nO1xuICBwcml2YXRlIF95UHJlZml4OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChNVVRFWF9GQVNUX0xPQ0tfQ09ORklHKSBwcml2YXRlIHJlYWRvbmx5IF9jb25maWc6IE11dGV4RmFzdExvY2tDb25maWcsXG4gICkge1xuICAgIHRoaXMuX2NsaWVudElkID0gdGhpcy5fZ2VuZXJhdGVSYW5kb21JZCgpO1xuICAgIHRoaXMuX3hQcmVmaXggPSBfY29uZmlnLmxvY2tQcmVmaXggKyAnX1hfJztcbiAgICB0aGlzLl95UHJlZml4ID0gX2NvbmZpZy5sb2NrUHJlZml4ICsgJ19ZXyc7XG5cbiAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgZnVuY3Rpb24gKGV2KSB7XG4gICAgICB2YXIgYXJyID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2V5KGkpLmluZGV4T2YodGhhdC5feFByZWZpeCkgPT0gMFxuICAgICAgICAgIHx8IGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZih0aGF0Ll95UHJlZml4KSA9PSAwKSB7XG4gICAgICAgICAgYXJyLnB1c2gobG9jYWxTdG9yYWdlLmtleShpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYXJyW2ldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBsb2NrKGtleTogc3RyaW5nLCB0aW1lb3V0OiBudW1iZXIgPSAtMSkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIGlmICh0aW1lb3V0ID09IC0xKSB0aW1lb3V0ID0gdGhpcy5fY29uZmlnLnRpbWVvdXQ7XG5cbiAgICBsZXQgeExvY2sgPSB0aGF0Ll94UHJlZml4ICsga2V5O1xuICAgIGxldCB5TG9jayA9IHRoYXQuX3lQcmVmaXggKyBrZXk7XG5cbiAgICBsZXQgbG9ja1N0YXRzOiBNdXRleExvY2tTdGF0cyA9IG5ldyBNdXRleExvY2tTdGF0cygpO1xuXG4gICAgdGhhdC5yZXNldFN0YXRzKGxvY2tTdGF0cyk7XG5cbiAgICB0aGlzLl9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0F0dGVtcHRpbmcgdG8gYWNxdWlyZSBMb2NrIG9uIFwiJXNcIiB1c2luZyBGYXN0TXV0ZXggaW5zdGFuY2UgXCIlc1wiJywga2V5LCB0aGlzLl9jbGllbnRJZCk7XG5cbiAgICBsb2NrU3RhdHMuYWNxdWlyZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAvL3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPE11dGV4TG9ja1N0YXRzPihzdWJzY3JpYmVyID0+IHtcbiAgICAgIC8vIHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIEFQSSBjYWxscyB0byBsb2NrKCkgYW5kIG91ciBpbnRlcm5hbFxuICAgICAgLy8gcmVjdXJzaXZlIGNhbGxzIHNvIHRoYXQgd2UgY2FuIHRpbWVvdXQgYmFzZWQgb24gdGhlIG9yaWdpbmFsIGxvY2soKSBhbmRcbiAgICAgIC8vIG5vdCBlYWNoIHN1YnNlcXVlbnQgY2FsbC4gIFRoZXJlZm9yZSwgY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGhlcmUgd2l0aGluXG4gICAgICAvLyB0aGUgcHJvbWlzZSBjbG9zdXJlIHRoYXQgd2UgdXNlIGZvciBzdWJzZXF1ZW50IGNhbGxzOlxuICAgICAgbGV0IGFjcXVpcmVMb2NrID0gZnVuY3Rpb24gYWNxdWlyZUxvY2soa2V5KSB7XG5cbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHhMb2NrKTtcbiAgICAgICAgdGhhdC5fcmVsZWFzZUV4cGlyZWRMb2NrKHlMb2NrKTtcblxuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvY2tTdGF0cy5hY3F1aXJlU3RhcnQ7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSB0aW1lb3V0KSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIG9uIFwiJXNcIiBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICVzbXMgYnkgRmFzdE11dGV4IGNsaWVudCBcIiVzXCInLCBrZXksIHRpbWVvdXQsIHRoYXQuX2NsaWVudElkKTtcbiAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKG5ldyBFcnJvcignTG9jayBjb3VsZCBub3QgYmUgYWNxdWlyZWQgd2l0aGluICcgKyB0aW1lb3V0ICsgJ21zJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhhdC5fc2V0SXRlbSh4TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHkgZXhpc3RzLCBhbm90aGVyIGNsaWVudCBpcyBnZXR0aW5nIGEgbG9jaywgc28gcmV0cnkgaW4gYSBiaXRcbiAgICAgICAgdmFyIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNZKSB7XG4gICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdMb2NrIGV4aXN0cyBvbiBZICglcyksIHJlc3RhcnRpbmcuLi4nLCBsc1kpO1xuICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3F1aXJlTG9jayhrZXkpO1xuICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhc2sgZm9yIGlubmVyIGxvY2tcbiAgICAgICAgdGhhdC5fc2V0SXRlbSh5TG9jaywgdGhhdC5fY2xpZW50SWQsIHRpbWVvdXQpO1xuXG4gICAgICAgIC8vIGlmIHggd2FzIGNoYW5nZWQsIGFub3RoZXIgY2xpZW50IGlzIGNvbnRlbmRpbmcgZm9yIGFuIGlubmVyIGxvY2tcbiAgICAgICAgdmFyIGxzWCA9IHRoYXQuX2dldEl0ZW0oeExvY2ssIHRpbWVvdXQpO1xuICAgICAgICBpZiAobHNYICE9PSB0aGF0Ll9jbGllbnRJZCkge1xuICAgICAgICAgIGxvY2tTdGF0cy5jb250ZW50aW9uQ291bnQrKztcbiAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0xvY2sgY29udGVudGlvbiBkZXRlY3RlZC4gWD1cIiVzXCInLCBsc1gpO1xuXG4gICAgICAgICAgLy8gR2l2ZSBlbm91Z2ggdGltZSBmb3IgY3JpdGljYWwgc2VjdGlvbjpcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxzWSA9IHRoYXQuX2dldEl0ZW0oeUxvY2ssIHRpbWVvdXQpO1xuICAgICAgICAgICAgaWYgKGxzWSA9PT0gdGhhdC5fY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgLy8gd2UgaGF2ZSBhIGxvY2tcbiAgICAgICAgICAgICAgdGhhdC5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiB3b24gdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCInLCB0aGF0Ll9jbGllbnRJZCwga2V5KTtcbiAgICAgICAgICAgICAgdGhhdC5yZXNvbHZlV2l0aFN0YXRzKHN1YnNjcmliZXIsIGxvY2tTdGF0cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyB3ZSBsb3N0IHRoZSBsb2NrLCByZXN0YXJ0IHRoZSBwcm9jZXNzIGFnYWluXG4gICAgICAgICAgICAgIGxvY2tTdGF0cy5yZXN0YXJ0Q291bnQrKztcbiAgICAgICAgICAgICAgbG9ja1N0YXRzLmxvY2tzTG9zdCsrO1xuICAgICAgICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGxvc3QgdGhlIGxvY2sgY29udGVudGlvbiBvbiBcIiVzXCIgdG8gYW5vdGhlciBwcm9jZXNzICglcykuIFJlc3RhcnRpbmcuLi4nLCB0aGF0Ll9jbGllbnRJZCwga2V5LCBsc1kpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNxdWlyZUxvY2soa2V5KTtcbiAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyBjb250ZW50aW9uOlxuICAgICAgICB0aGF0Ll9jb25maWcuZGVidWdFbmFibGVkID8/IGNvbnNvbGUuZGVidWcoJ0Zhc3RNdXRleCBjbGllbnQgXCIlc1wiIGFjcXVpcmVkIGEgbG9jayBvbiBcIiVzXCIgd2l0aCBubyBjb250ZW50aW9uJywgdGhhdC5fY2xpZW50SWQsIGtleSk7XG4gICAgICAgIHRoYXQucmVzb2x2ZVdpdGhTdGF0cyhzdWJzY3JpYmVyLCBsb2NrU3RhdHMpO1xuICAgICAgfTtcblxuICAgICAgYWNxdWlyZUxvY2soa2V5KTtcblxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlbGVhc2Uoa2V5KSB7XG4gICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiBpcyByZWxlYXNpbmcgbG9jayBvbiBcIiVzXCInLCB0aGlzLl9jbGllbnRJZCwga2V5KTtcblxuICAgIGxldCB4ID0gdGhpcy5feFByZWZpeCArIGtleTtcbiAgICBsZXQgeSA9IHRoaXMuX3lQcmVmaXggKyBrZXk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oeSk7XG5cbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tFbmQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAvL3RoYXQubG9ja1N0YXRzLmxvY2tEdXJhdGlvbiA9IHRoYXQubG9ja1N0YXRzLmxvY2tFbmQgLSB0aGF0LmxvY2tTdGF0cy5sb2NrU3RhcnQ7XG5cbiAgICAvL2xldCByZXRTdGF0cyA9IGFuZ3VsYXIuY29weSh0aGF0LmxvY2tTdGF0cyk7XG5cbiAgICAvL3RoYXQucmVzZXRTdGF0cygpO1xuXG4gICAgLy9yZXR1cm4gcmV0U3RhdHM7XG4gIH1cblxuICBwcml2YXRlIF9nZW5lcmF0ZVJhbmRvbUlkKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkgKyAnJztcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdGF0cyhsb2NrU3RhdHM6IE11dGV4TG9ja1N0YXRzKSB7XG4gICAgbG9ja1N0YXRzLnJlc3RhcnRDb3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmxvY2tzTG9zdCA9IDA7XG4gICAgbG9ja1N0YXRzLmNvbnRlbnRpb25Db3VudCA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVEdXJhdGlvbiA9IDA7XG4gICAgbG9ja1N0YXRzLmFjcXVpcmVTdGFydCA9IG51bGw7XG4gIH1cblxuICBwcml2YXRlIHJlc29sdmVXaXRoU3RhdHMoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxNdXRleExvY2tTdGF0cz4sIHN0YXRzOiBNdXRleExvY2tTdGF0cykge1xuICAgIHZhciBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHN0YXRzLmFjcXVpcmVFbmQgPSBjdXJyZW50VGltZTtcbiAgICBzdGF0cy5hY3F1aXJlRHVyYXRpb24gPSBzdGF0cy5hY3F1aXJlRW5kIC0gc3RhdHMuYWNxdWlyZVN0YXJ0O1xuICAgIHN0YXRzLmxvY2tTdGFydCA9IGN1cnJlbnRUaW1lO1xuICAgIHN1YnNjcmliZXIubmV4dChzdGF0cyk7XG4gICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiB0byB3cmFwIGFsbCB2YWx1ZXMgaW4gYW4gb2JqZWN0IHRoYXQgaW5jbHVkZXMgdGhlIHRpbWUgKHNvXG4gICAqIHRoYXQgd2UgY2FuIGV4cGlyZSBpdCBpbiB0aGUgZnV0dXJlKSBhbmQganNvbi5zdHJpbmdpZnkncyBpdFxuICAgKi9cbiAgcHJpdmF0ZSBfc2V0SXRlbShrZXksIGNsaWVudElkLCB0aW1lb3V0KSB7XG4gICAgbGV0IGxvY2tJdGVtID0gbmV3IExvY2tJdGVtKCk7XG4gICAgbG9ja0l0ZW0uY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICBsb2NrSXRlbS5leHBpcmVzQXQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobG9ja0l0ZW0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgSlNPTiBlbmNvZGVkIHZhbHVlcyBzZXQgaW4gbG9jYWxTdG9yYWdlXG4gICAqL1xuICBwcml2YXRlIF9nZXRJdGVtKGtleSwgdGltZW91dCkge1xuICAgIHZhciBpdGVtID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblxuICAgIGlmICghaXRlbSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgbG9ja0l0ZW0gPSA8TG9ja0l0ZW0+SlNPTi5wYXJzZShpdGVtKTtcbiAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsb2NrSXRlbS5leHBpcmVzQXQgPj0gdGltZW91dCkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggY2xpZW50IFwiJXNcIiByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIHRoaXMuX2NsaWVudElkLCBrZXkpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBsb2NrSXRlbS5jbGllbnRJZDtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbGVhc2VFeHBpcmVkTG9jayhrZXk6IHN0cmluZyl7XG4gICAgdmFyIGl0ZW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgaWYgKCFpdGVtKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBsb2NrSXRlbSA9IDxMb2NrSXRlbT5KU09OLnBhcnNlKGl0ZW0pO1xuXG4gICAgaWYgKGxvY2tJdGVtLmV4cGlyZXNBdCA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkge1xuICAgICAgdGhpcy5fY29uZmlnLmRlYnVnRW5hYmxlZCA/PyBjb25zb2xlLmRlYnVnKCdGYXN0TXV0ZXggYXV0byByZW1vdmVkIGFuIGV4cGlyZWQgcmVjb3JkIG9uIFwiJXNcIicsIGtleSk7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgIH1cbiAgfVxufVxuIl19","originalSourcemap":{"version":3,"file":"mutex-fast-lock.service.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.service.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,9],[15,0,0,15],[17,0,0,17],[27,0,0,27],[29,0,0,29],[35,0,0,35],[50,0,0,50],[51,0,0,51]],[[0,0,1,0],[7,0,1,7],[9,0,1,9],[31,0,1,31],[33,0,1,33],[39,0,1,39],[74,0,1,74],[75,0,1,75]],[[0,0,3,0],[7,0,3,7],[9,0,3,9],[23,0,3,23],[25,0,3,25],[31,0,3,31],[58,0,3,58],[59,0,3,59]],[[0,0,4,0],[7,0,4,7],[9,0,4,9],[19,0,4,19],[21,0,4,33],[27,0,4,39],[33,0,4,45],[34,0,4,46]],[[0,0,5,0],[7,0,5,7],[9,0,5,9],[17,0,5,17],[19,0,5,19],[25,0,5,25],[45,0,5,45],[46,0,5,46]],[],[],[[0,0,10,0],[6,0,10,6],[13,0,10,13],[33,0,10,33]],[[4,0,16,2],[16,0,17,53],[23,0,17,81]],[[8,0,17,53],[20,0,17,60],[23,0,17,53],[30,0,17,60],[31,0,17,81]],[[8,0,19,4],[12,0,19,8],[13,0,19,9],[22,0,19,18],[25,0,19,21],[29,0,19,25],[30,0,19,26],[47,0,19,43],[49,0,19,45],[50,0,19,46]],[[8,0,20,4],[12,0,20,8],[13,0,20,9],[21,0,20,17],[24,0,20,20],[31,0,20,27],[32,0,20,28],[42,0,20,38],[45,0,20,41],[50,0,20,46],[51,0,20,47]],[[8,0,21,4],[12,0,21,8],[13,0,21,9],[21,0,21,17],[24,0,21,20],[31,0,21,27],[32,0,21,28],[42,0,21,38],[45,0,21,41],[50,0,21,46],[51,0,21,47]],[[8,0,23,4],[12,0,23,8],[16,0,23,12],[19,0,23,15],[23,0,23,19],[24,0,23,20]],[[8,0,24,4],[14,0,24,10],[15,0,24,11],[31,0,24,27],[32,0,24,28],[46,0,24,42],[48,0,24,44],[58,0,24,54],[60,0,24,56]],[[12,0,25,6],[16,0,25,10],[19,0,25,13],[22,0,25,16],[24,0,25,18],[25,0,25,19]],[[12,0,27,6],[17,0,27,11],[21,0,27,15],[22,0,27,16],[25,0,27,19],[26,0,27,20],[28,0,27,22],[29,0,27,23],[32,0,27,26],[44,0,27,38],[45,0,27,39],[51,0,27,45],[53,0,27,47],[54,0,27,48],[56,0,27,50],[58,0,27,52]],[[16,0,28,8],[20,0,28,12],[32,0,28,24],[33,0,28,25],[36,0,28,28],[37,0,28,29],[38,0,28,30],[39,0,28,31],[40,0,28,32],[47,0,28,39],[48,0,28,40],[52,0,28,44],[53,0,28,45],[61,0,28,53],[62,0,28,54],[66,0,28,58],[67,0,28,59]],[[23,0,29,13],[35,0,29,25],[36,0,29,26],[39,0,29,29],[40,0,29,30],[41,0,29,31],[42,0,29,32],[43,0,29,33],[50,0,29,40],[51,0,29,41],[55,0,29,45],[56,0,29,46],[64,0,29,54],[65,0,29,55],[69,0,29,59],[70,0,29,60],[72,0,29,62]],[[20,0,30,10],[23,0,30,13],[24,0,30,14],[28,0,30,18],[29,0,30,19],[41,0,30,31],[42,0,30,32],[45,0,30,35],[46,0,30,36],[47,0,30,37],[48,0,30,38],[49,0,30,39],[50,0,30,40]],[[17,0,31,9]],[[13,0,32,7]],[[12,0,34,6],[17,0,34,11],[21,0,34,15],[22,0,34,16],[25,0,34,19],[26,0,34,20],[28,0,34,22],[29,0,34,23],[32,0,34,26],[35,0,34,29],[36,0,34,30],[42,0,34,36],[44,0,34,38],[45,0,34,39],[47,0,34,41],[49,0,34,43]],[[16,0,35,8],[28,0,35,20],[29,0,35,21],[39,0,35,31],[40,0,35,32],[43,0,35,35],[44,0,35,36],[45,0,35,37],[46,0,35,38],[47,0,35,39],[48,0,35,40]],[[13,0,36,7]],[[8,0,37,4],[9,0,37,5],[10,0,37,6],[11,0,37,7]],[[4,0,38,2],[5,0,38,3]],[[4,0,40,9],[8,0,40,13],[9,0,40,14],[12,0,40,25],[14,0,40,27],[24,0,40,45],[25,0,40,46],[26,0,40,47]],[[8,0,41,4],[12,0,41,8],[16,0,41,12],[19,0,41,15],[23,0,41,19],[24,0,41,20]],[[8,0,43,4],[12,0,43,8],[19,0,43,15],[23,0,43,19],[24,0,43,20],[25,0,43,21]],[[12,0,43,23],[19,0,43,30],[22,0,43,33],[26,0,43,37],[27,0,43,38],[34,0,43,45],[35,0,43,46],[42,0,43,53],[43,0,43,54]],[[8,0,45,4],[12,0,45,8],[17,0,45,13],[20,0,45,16],[24,0,45,20],[25,0,45,21],[33,0,45,29],[36,0,45,32],[39,0,45,35],[40,0,45,36]],[[8,0,46,4],[12,0,46,8],[17,0,46,13],[20,0,46,16],[24,0,46,20],[25,0,46,21],[33,0,46,29],[36,0,46,32],[39,0,46,35],[40,0,46,36]],[[8,0,48,4],[12,0,48,8],[21,0,48,17],[24,0,48,36],[28,0,48,40],[42,0,48,54],[44,0,48,56],[45,0,48,57]],[[8,0,50,4],[12,0,50,8],[13,0,50,9],[23,0,50,19],[24,0,50,20],[33,0,50,29],[34,0,50,30],[35,0,50,31]],[[8,0,52,4],[12,0,52,8],[13,0,52,9],[20,0,52,16],[21,0,52,17],[33,0,52,29],[37,0,52,33],[44,0,52,40],[45,0,52,41],[50,0,52,46],[51,0,52,47],[117,0,52,113],[119,0,52,115],[122,0,52,118],[124,0,52,120],[128,0,52,124],[129,0,52,125],[138,0,52,134],[139,0,52,135],[140,0,52,136]],[[8,0,54,4],[17,0,54,13],[18,0,54,14],[30,0,54,26],[33,0,54,29],[37,0,54,33],[41,0,54,37],[43,0,54,39],[44,0,54,40],[51,0,54,47],[53,0,54,49],[54,0,54,50]],[[8,0,56,4],[57,0,56,53]],[[8,0,57,4],[15,0,57,11],[19,0,57,15],[29,0,57,25],[30,0,57,42],[40,0,57,52],[41,0,57,53],[43,0,57,55]],[[12,0,58,6],[84,0,58,78]],[[12,0,59,6],[86,0,59,80]],[[12,0,60,6],[86,0,60,80]],[[12,0,61,6],[68,0,61,62]],[[12,0,62,6],[16,0,62,10],[27,0,62,21],[30,0,62,24],[39,0,62,33],[50,0,62,44],[51,0,62,45],[54,0,62,48]],[[16,0,64,8],[20,0,64,12],[21,0,64,13],[40,0,64,32],[41,0,64,33],[46,0,64,38],[47,0,64,39],[48,0,64,40]],[[16,0,65,8],[20,0,65,12],[21,0,65,13],[40,0,65,32],[41,0,65,33],[46,0,65,38],[47,0,65,39],[48,0,65,40]],[[16,0,67,8],[20,0,67,12],[31,0,67,23],[34,0,67,26],[38,0,67,30],[42,0,67,34],[44,0,67,36],[45,0,67,37],[52,0,67,44],[54,0,67,46],[57,0,67,49],[66,0,67,58],[67,0,67,59],[79,0,67,71],[80,0,67,72]],[[16,0,68,8],[20,0,68,12],[31,0,68,23],[35,0,68,27],[42,0,68,34],[44,0,68,36]],[[20,0,69,10],[24,0,69,14],[25,0,69,15],[32,0,69,22],[33,0,69,23],[45,0,69,35],[49,0,69,39],[56,0,69,46],[57,0,69,47],[62,0,69,52],[63,0,69,53],[136,0,69,126],[138,0,69,128],[141,0,69,131],[143,0,69,133],[150,0,69,140],[152,0,69,142],[156,0,69,146],[157,0,69,147],[166,0,69,156],[167,0,69,157],[168,0,69,158]],[[20,0,70,10],[30,0,70,20],[31,0,70,21],[36,0,70,26],[37,0,70,27],[41,0,70,31],[46,0,70,36],[47,0,70,37],[83,0,70,73],[86,0,70,76],[93,0,70,83],[96,0,70,86],[100,0,70,90],[101,0,70,91],[102,0,70,92],[103,0,70,93]],[[17,0,71,9]],[[16,0,73,8],[20,0,73,12],[21,0,73,13],[29,0,73,21],[30,0,73,22],[35,0,73,27],[37,0,73,29],[41,0,73,33],[42,0,73,34],[51,0,73,43],[53,0,73,45],[60,0,73,52],[61,0,73,53],[62,0,73,54]],[[16,0,75,8],[83,0,75,75]],[[16,0,76,8],[20,0,76,12],[23,0,76,15],[26,0,76,18],[30,0,76,22],[31,0,76,23],[39,0,76,31],[40,0,76,32],[45,0,76,37],[47,0,76,39],[54,0,76,46],[55,0,76,47],[56,0,76,48]],[[16,0,77,8],[20,0,77,12],[23,0,77,15],[25,0,77,17]],[[20,0,78,10],[24,0,78,14],[25,0,78,15],[32,0,78,22],[33,0,78,23],[45,0,78,35],[49,0,78,39],[56,0,78,46],[57,0,78,47],[62,0,78,52],[63,0,78,53],[101,0,78,91],[103,0,78,93],[106,0,78,96],[107,0,78,97],[108,0,78,98]],[[20,0,79,10],[29,0,79,19],[30,0,79,20],[42,0,79,32],[44,0,79,34],[45,0,79,35]],[[20,0,80,10],[30,0,80,20],[31,0,80,21]],[[24,0,81,12],[31,0,81,19],[42,0,81,30],[43,0,81,31],[46,0,81,34],[47,0,81,35],[48,0,81,36]],[[20,0,82,10],[21,0,82,11],[23,0,82,13],[25,0,82,15],[26,0,82,16],[27,0,82,17]],[[20,0,83,10],[27,0,83,17]],[[17,0,84,9]],[[16,0,86,8],[37,0,86,29]],[[16,0,87,8],[20,0,87,12],[21,0,87,13],[29,0,87,21],[30,0,87,22],[35,0,87,27],[37,0,87,29],[41,0,87,33],[42,0,87,34],[51,0,87,43],[53,0,87,45],[60,0,87,52],[61,0,87,53],[62,0,87,54]],[[16,0,89,8],[83,0,89,75]],[[16,0,90,8],[20,0,90,12],[23,0,90,15],[26,0,90,18],[30,0,90,22],[31,0,90,23],[39,0,90,31],[40,0,90,32],[45,0,90,37],[47,0,90,39],[54,0,90,46],[55,0,90,47],[56,0,90,48]],[[16,0,91,8],[20,0,91,12],[23,0,91,15],[28,0,91,20],[32,0,91,24],[33,0,91,25],[42,0,91,34],[44,0,91,36]],[[20,0,92,10],[29,0,92,19],[30,0,92,20],[45,0,92,35],[47,0,92,37],[48,0,92,38]],[[20,0,93,10],[24,0,93,14],[25,0,93,15],[32,0,93,22],[33,0,93,23],[45,0,93,35],[49,0,93,39],[56,0,93,46],[57,0,93,47],[62,0,93,52],[63,0,93,53],[97,0,93,87],[99,0,93,89],[102,0,93,92],[103,0,93,93],[104,0,93,94]],[[20,0,95,10],[61,0,95,51]],[[20,0,96,10],[30,0,96,20],[31,0,96,21]],[[24,0,97,12],[27,0,97,15],[30,0,97,18],[34,0,97,22],[35,0,97,23],[43,0,97,31],[44,0,97,32],[49,0,97,37],[51,0,97,39],[58,0,97,46],[59,0,97,47],[60,0,97,48]],[[24,0,98,12],[28,0,98,16],[31,0,98,19],[36,0,98,24],[40,0,98,28],[41,0,98,29],[50,0,98,38],[52,0,98,40]],[[28,0,99,14],[45,0,99,31]],[[28,0,100,14],[32,0,100,18],[33,0,100,19],[40,0,100,26],[41,0,100,27],[53,0,100,39],[57,0,100,43],[64,0,100,50],[65,0,100,51],[70,0,100,56],[71,0,100,57],[126,0,100,112],[128,0,100,114],[132,0,100,118],[133,0,100,119],[142,0,100,128],[144,0,100,130],[147,0,100,133],[148,0,100,134],[149,0,100,135]],[[28,0,101,14],[32,0,101,18],[33,0,101,19],[49,0,101,35],[50,0,101,36],[60,0,101,46],[62,0,101,48],[71,0,101,57],[72,0,101,58],[73,0,101,59]],[[25,0,102,13]],[[29,0,102,19]],[[28,0,103,14],[74,0,103,60]],[[28,0,104,14],[37,0,104,23],[38,0,104,24],[50,0,104,36],[52,0,104,38],[53,0,104,39]],[[28,0,105,14],[37,0,105,23],[38,0,105,24],[47,0,105,33],[49,0,105,35],[50,0,105,36]],[[28,0,106,14],[32,0,106,18],[33,0,106,19],[40,0,106,26],[41,0,106,27],[53,0,106,39],[57,0,106,43],[64,0,106,50],[65,0,106,51],[70,0,106,56],[71,0,106,57],[166,0,106,152],[168,0,106,154],[172,0,106,158],[173,0,106,159],[182,0,106,168],[184,0,106,170],[187,0,106,173],[189,0,106,175],[192,0,106,178],[193,0,106,179],[194,0,106,180]],[[28,0,107,14],[38,0,107,24],[39,0,107,25]],[[32,0,108,16],[39,0,108,23],[50,0,108,34],[51,0,108,35],[54,0,108,38],[55,0,108,39],[56,0,108,40]],[[28,0,109,14],[29,0,109,15],[31,0,109,17],[33,0,109,19],[34,0,109,20],[35,0,109,21]],[[25,0,110,13]],[[20,0,111,10],[21,0,111,11],[23,0,111,13],[26,0,111,16],[27,0,111,17],[28,0,111,18]],[[20,0,113,10],[27,0,113,17]],[[17,0,114,9]],[[16,0,116,8],[33,0,116,25]],[[16,0,117,8],[20,0,117,12],[21,0,117,13],[28,0,117,20],[29,0,117,21],[41,0,117,33],[45,0,117,37],[52,0,117,44],[53,0,117,45],[58,0,117,50],[59,0,117,51],[125,0,117,117],[127,0,117,119],[131,0,117,123],[132,0,117,124],[141,0,117,133],[143,0,117,135],[146,0,117,138],[147,0,117,139],[148,0,117,140]],[[16,0,118,8],[20,0,118,12],[21,0,118,13],[37,0,118,29],[38,0,118,30],[48,0,118,40],[50,0,118,42],[59,0,118,51],[60,0,118,52],[61,0,118,53]],[[12,0,119,6],[13,0,119,7],[14,0,119,8]],[[12,0,121,6],[23,0,121,17],[24,0,121,18],[27,0,121,21],[28,0,121,22],[29,0,121,23]],[[8,0,123,4],[9,0,123,5],[10,0,123,6],[11,0,123,7]],[[4,0,124,2],[5,0,124,3]],[[4,0,126,9],[11,0,126,16],[12,0,126,17],[15,0,126,20]],[[8,0,127,4],[12,0,127,8],[13,0,127,9],[20,0,127,16],[21,0,127,17],[33,0,127,29],[37,0,127,33],[44,0,127,40],[45,0,127,41],[50,0,127,46],[51,0,127,47],[100,0,127,96],[102,0,127,98],[106,0,127,102],[107,0,127,103],[116,0,127,112],[118,0,127,114],[121,0,127,117],[122,0,127,118],[123,0,127,119]],[[8,0,129,4],[12,0,129,8],[13,0,129,9],[16,0,129,12],[20,0,129,16],[21,0,129,17],[29,0,129,25],[32,0,129,28],[35,0,129,31],[36,0,129,32]],[[8,0,130,4],[12,0,130,8],[13,0,130,9],[16,0,130,12],[20,0,130,16],[21,0,130,17],[29,0,130,25],[32,0,130,28],[35,0,130,31],[36,0,130,32]],[[8,0,131,4],[20,0,131,16],[21,0,131,17],[31,0,131,27],[32,0,131,28],[33,0,131,29],[34,0,131,30],[35,0,131,31]],[[8,0,132,4],[20,0,132,16],[21,0,132,17],[31,0,132,27],[32,0,132,28],[33,0,132,29],[34,0,132,30],[35,0,132,31]],[[8,0,134,4],[56,0,134,52]],[[8,0,135,4],[90,0,135,86]],[[8,0,137,4],[54,0,137,50]],[[8,0,139,4],[28,0,139,24]],[[8,0,141,4],[26,0,141,22]],[[4,0,142,2],[5,0,142,3]],[[4,0,144,10],[21,0,144,27]],[[8,0,145,4],[15,0,145,11],[19,0,145,15],[20,0,145,16],[25,0,145,21],[26,0,145,22],[30,0,145,26],[31,0,145,27],[37,0,145,33],[39,0,145,35],[42,0,145,38],[53,0,145,49],[54,0,145,50],[57,0,145,53],[59,0,145,55],[60,0,145,56]],[[4,0,146,2],[5,0,146,3]],[[4,0,148,10],[14,0,148,20],[15,0,148,21],[24,0,148,46]],[[8,0,149,4],[17,0,149,13],[18,0,149,14],[30,0,149,26],[33,0,149,29],[34,0,149,30],[35,0,149,31]],[[8,0,150,4],[17,0,150,13],[18,0,150,14],[27,0,150,23],[30,0,150,26],[31,0,150,27],[32,0,150,28]],[[8,0,151,4],[17,0,151,13],[18,0,151,14],[33,0,151,29],[36,0,151,32],[37,0,151,33],[38,0,151,34]],[[8,0,152,4],[17,0,152,13],[18,0,152,14],[33,0,152,29],[36,0,152,32],[37,0,152,33],[38,0,152,34]],[[8,0,153,4],[17,0,153,13],[18,0,153,14],[30,0,153,26],[33,0,153,29],[37,0,153,33],[38,0,153,34]],[[4,0,154,2],[5,0,154,3]],[[4,0,156,10],[20,0,156,26],[21,0,156,27],[31,0,156,65],[33,0,156,67],[38,0,156,88]],[[8,0,157,4],[12,0,157,8],[23,0,157,19],[26,0,157,22],[30,0,157,26],[34,0,157,30],[36,0,157,32],[37,0,157,33],[44,0,157,40],[46,0,157,42],[47,0,157,43]],[[8,0,158,4],[13,0,158,9],[14,0,158,10],[24,0,158,20],[27,0,158,23],[38,0,158,34],[39,0,158,35]],[[8,0,159,4],[13,0,159,9],[14,0,159,10],[29,0,159,25],[32,0,159,28],[37,0,159,33],[38,0,159,34],[48,0,159,44],[51,0,159,47],[56,0,159,52],[57,0,159,53],[69,0,159,65],[70,0,159,66]],[[8,0,160,4],[13,0,160,9],[14,0,160,10],[23,0,160,19],[26,0,160,22],[37,0,160,33],[38,0,160,34]],[[8,0,161,4],[18,0,161,14],[19,0,161,15],[23,0,161,19],[24,0,161,20],[29,0,161,25],[30,0,161,26],[31,0,161,27]],[[8,0,162,4],[18,0,162,14],[19,0,162,15],[27,0,162,23],[29,0,162,25],[30,0,162,26]],[[4,0,163,2],[5,0,163,3]],[[4,0,165,2]],[],[],[[7,0,168,5]],[[4,0,169,10],[12,0,169,18],[13,0,169,19],[16,0,169,22],[18,0,169,24],[26,0,169,32],[28,0,169,34],[35,0,169,41]],[[8,0,170,4],[12,0,170,8],[20,0,170,16],[23,0,170,19],[27,0,170,23],[35,0,170,31],[37,0,170,33],[38,0,170,34]],[[8,0,171,4],[16,0,171,12],[17,0,171,13],[25,0,171,21],[28,0,171,24],[36,0,171,32],[37,0,171,33]],[[8,0,172,4],[16,0,172,12],[17,0,172,13],[26,0,172,22],[29,0,172,25],[33,0,172,29],[37,0,172,33],[39,0,172,35],[40,0,172,36],[47,0,172,43],[49,0,172,45],[52,0,172,48],[59,0,172,55],[60,0,172,56]],[[8,0,173,4],[15,0,173,11],[27,0,173,23],[28,0,173,24],[35,0,173,31],[36,0,173,32],[39,0,173,35],[41,0,173,37],[45,0,173,41],[46,0,173,42],[55,0,173,51],[56,0,173,52],[64,0,173,60],[65,0,173,61],[66,0,173,62],[67,0,173,63]],[[4,0,174,2],[5,0,174,3]],[[4,0,176,2]],[],[[7,0,178,5]],[[4,0,179,10],[12,0,179,18],[13,0,179,19],[16,0,179,22],[18,0,179,24],[25,0,179,31]],[[8,0,180,4],[12,0,180,8],[16,0,180,12],[19,0,180,15],[31,0,180,27],[32,0,180,28],[39,0,180,35],[40,0,180,36],[43,0,180,39],[44,0,180,40],[45,0,180,41]],[[8,0,182,4],[12,0,182,8],[13,0,182,9],[17,0,182,13]],[[12,0,182,15],[19,0,182,22],[23,0,182,26],[24,0,182,27]],[[8,0,184,4],[12,0,184,8],[20,0,184,16],[23,0,184,29],[27,0,184,33],[28,0,184,34],[33,0,184,39],[34,0,184,40],[38,0,184,44],[39,0,184,45],[40,0,184,46]],[[8,0,185,4],[12,0,185,8],[16,0,185,12],[20,0,185,16],[22,0,185,18],[23,0,185,19],[30,0,185,26],[32,0,185,28],[35,0,185,31],[43,0,185,39],[44,0,185,40],[53,0,185,49],[57,0,185,53],[64,0,185,60],[66,0,185,62]],[[12,0,186,6],[16,0,186,10],[17,0,186,11],[24,0,186,18],[25,0,186,19],[37,0,186,31],[41,0,186,35],[48,0,186,42],[49,0,186,43],[54,0,186,48],[55,0,186,49],[112,0,186,106],[114,0,186,108],[118,0,186,112],[119,0,186,113],[128,0,186,122],[130,0,186,124],[133,0,186,127],[134,0,186,128],[135,0,186,129]],[[12,0,187,6],[24,0,187,18],[25,0,187,19],[35,0,187,29],[36,0,187,30],[39,0,187,33],[40,0,187,34],[41,0,187,35]],[[12,0,188,6],[19,0,188,13],[23,0,188,17],[24,0,188,18]],[[9,0,189,5]],[[8,0,191,4],[15,0,191,11],[23,0,191,19],[24,0,191,20],[32,0,191,28],[33,0,191,29]],[[4,0,192,2],[5,0,192,3]],[[4,0,194,10],[23,0,194,29],[24,0,194,30],[27,0,194,41]],[[8,0,195,4],[12,0,195,8],[16,0,195,12],[19,0,195,15],[31,0,195,27],[32,0,195,28],[39,0,195,35],[40,0,195,36],[43,0,195,39],[44,0,195,40],[45,0,195,41]],[[8,0,197,4],[12,0,197,8],[13,0,197,9],[17,0,197,13]],[[12,0,197,15],[19,0,197,22],[23,0,197,26],[24,0,197,27]],[[8,0,199,4],[12,0,199,8],[20,0,199,16],[23,0,199,29],[27,0,199,33],[28,0,199,34],[33,0,199,39],[34,0,199,40],[38,0,199,44],[39,0,199,45],[40,0,199,46]],[[8,0,201,4],[12,0,201,8],[20,0,201,16],[21,0,201,17],[30,0,201,26],[34,0,201,30],[38,0,201,34],[42,0,201,38],[44,0,201,40],[45,0,201,41],[52,0,201,48],[54,0,201,50],[56,0,201,52]],[[12,0,202,6],[16,0,202,10],[17,0,202,11],[24,0,202,18],[25,0,202,19],[37,0,202,31],[41,0,202,35],[48,0,202,42],[49,0,202,43],[54,0,202,48],[55,0,202,49],[105,0,202,99],[107,0,202,101],[110,0,202,104],[111,0,202,105],[112,0,202,106]],[[12,0,203,6],[24,0,203,18],[25,0,203,19],[35,0,203,29],[36,0,203,30],[39,0,203,33],[40,0,203,34],[41,0,203,35]],[[9,0,204,5]],[[4,0,205,2],[5,0,205,3]],[],[[88,0,10,13],[108,0,10,33],[122,0,17,12],[144,0,17,34]],[[74,0,10,13],[94,0,10,33],[105,0,10,13],[125,0,10,33],[144,0,8,14],[150,0,8,20]],[[87,0,10,13],[107,0,10,33]],[[14,0,7,1],[24,0,7,11]],[[15,0,7,12]],[[16,0,8,2],[26,0,8,12],[28,0,8,14],[34,0,8,20]],[[13,0,9,1]],[],[[22,0,17,5],[28,0,17,11]],[[23,0,17,12],[45,0,17,34]]],"sourcesContent":["import { Inject, Injectable } from '@angular/core';\nimport { MUTEX_FAST_LOCK_CONFIG } from './mutex-fast-lock-config.injector';\nimport { MutexFastLockConfig } from './models/mutex-fast-lock-config';\nimport { MutexLockStats } from './models/mutex-lock-stats';\nimport { Observable, Subscriber } from 'rxjs';\nimport { LockItem } from './models/lock-item';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MutexFastLockService {\n\n  private _clientId: string;\n  private _xPrefix: string;\n  private _yPrefix: string;\n\n  constructor(\n    @Inject(MUTEX_FAST_LOCK_CONFIG) private readonly _config: MutexFastLockConfig,\n  ) {\n    this._clientId = this._generateRandomId();\n    this._xPrefix = _config.lockPrefix + '_X_';\n    this._yPrefix = _config.lockPrefix + '_Y_';\n\n    let that = this;\n    window.addEventListener(\"beforeunload\", function (ev) {\n      var arr = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        if (localStorage.key(i).indexOf(that._xPrefix) == 0\n          || localStorage.key(i).indexOf(that._yPrefix) == 0) {\n          arr.push(localStorage.key(i));\n        }\n      }\n\n      for (var i = 0; i < arr.length; i++) {\n        localStorage.removeItem(arr[i]);\n      }\n    });\n  }\n\n  public lock(key: string, timeout: number = -1) {\n    let that = this;\n\n    if (timeout == -1) timeout = this._config.timeout;\n\n    let xLock = that._xPrefix + key;\n    let yLock = that._yPrefix + key;\n\n    let lockStats: MutexLockStats = new MutexLockStats();\n\n    that.resetStats(lockStats);\n\n    this._config.debugEnabled ?? console.debug('Attempting to acquire Lock on \"%s\" using FastMutex instance \"%s\"', key, this._clientId);\n\n    lockStats.acquireStart = new Date().getTime();\n\n    //return new Promise(function (resolve, reject) {\n    return new Observable<MutexLockStats>(subscriber => {\n      // we need to differentiate between API calls to lock() and our internal\n      // recursive calls so that we can timeout based on the original lock() and\n      // not each subsequent call.  Therefore, create a new function here within\n      // the promise closure that we use for subsequent calls:\n      let acquireLock = function acquireLock(key) {\n\n        that._releaseExpiredLock(xLock);\n        that._releaseExpiredLock(yLock);\n\n        var elapsedTime = new Date().getTime() - lockStats.acquireStart;\n        if (elapsedTime >= timeout) {\n          that._config.debugEnabled ?? console.debug('Lock on \"%s\" could not be acquired within %sms by FastMutex client \"%s\"', key, timeout, that._clientId);\n          subscriber.error(new Error('Lock could not be acquired within ' + timeout + 'ms'));\n        }\n\n        that._setItem(xLock, that._clientId, timeout);\n\n        // if y exists, another client is getting a lock, so retry in a bit\n        var lsY = that._getItem(yLock, timeout);\n        if (lsY) {\n          that._config.debugEnabled ?? console.debug('Lock exists on Y (%s), restarting...', lsY);\n          lockStats.restartCount++;\n          setTimeout(function () {\n            return acquireLock(key);\n          }, 10);\n          return;\n        }\n\n        // ask for inner lock\n        that._setItem(yLock, that._clientId, timeout);\n\n        // if x was changed, another client is contending for an inner lock\n        var lsX = that._getItem(xLock, timeout);\n        if (lsX !== that._clientId) {\n          lockStats.contentionCount++;\n          that._config.debugEnabled ?? console.debug('Lock contention detected. X=\"%s\"', lsX);\n\n          // Give enough time for critical section:\n          setTimeout(function () {\n            lsY = that._getItem(yLock, timeout);\n            if (lsY === that._clientId) {\n              // we have a lock\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" won the lock contention on \"%s\"', that._clientId, key);\n              that.resolveWithStats(subscriber, lockStats);\n            } else {\n              // we lost the lock, restart the process again\n              lockStats.restartCount++;\n              lockStats.locksLost++;\n              that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" lost the lock contention on \"%s\" to another process (%s). Restarting...', that._clientId, key, lsY);\n              setTimeout(function () {\n                return acquireLock(key);\n              }, 10);\n            }\n          }, 100);\n\n          return;\n        }\n\n        // no contention:\n        that._config.debugEnabled ?? console.debug('FastMutex client \"%s\" acquired a lock on \"%s\" with no contention', that._clientId, key);\n        that.resolveWithStats(subscriber, lockStats);\n      };\n\n      acquireLock(key);\n\n    });\n  }\n\n  public release(key) {\n    this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" is releasing lock on \"%s\"', this._clientId, key);\n\n    let x = this._xPrefix + key;\n    let y = this._yPrefix + key;\n    localStorage.removeItem(x);\n    localStorage.removeItem(y);\n\n    //that.lockStats.lockEnd = new Date().getTime();\n    //that.lockStats.lockDuration = that.lockStats.lockEnd - that.lockStats.lockStart;\n\n    //let retStats = angular.copy(that.lockStats);\n\n    //that.resetStats();\n\n    //return retStats;\n  }\n\n  private _generateRandomId() {\n    return Math.floor(Math.random() * 10000000000) + '';\n  }\n\n  private resetStats(lockStats: MutexLockStats) {\n    lockStats.restartCount = 0;\n    lockStats.locksLost = 0;\n    lockStats.contentionCount = 0;\n    lockStats.acquireDuration = 0;\n    lockStats.acquireStart = null;\n  }\n\n  private resolveWithStats(subscriber: Subscriber<MutexLockStats>, stats: MutexLockStats) {\n    var currentTime = new Date().getTime();\n    stats.acquireEnd = currentTime;\n    stats.acquireDuration = stats.acquireEnd - stats.acquireStart;\n    stats.lockStart = currentTime;\n    subscriber.next(stats);\n    subscriber.complete();\n  }\n\n  /**\n   * Helper function to wrap all values in an object that includes the time (so\n   * that we can expire it in the future) and json.stringify's it\n   */\n  private _setItem(key, clientId, timeout) {\n    let lockItem = new LockItem();\n    lockItem.clientId = clientId;\n    lockItem.expiresAt = new Date().getTime() + timeout;\n    return localStorage.setItem(key, JSON.stringify(lockItem));\n  }\n\n  /**\n   * Helper function to parse JSON encoded values set in localStorage\n   */\n  private _getItem(key, timeout) {\n    var item = localStorage.getItem(key);\n\n    if (!item) return null;\n\n    var lockItem = <LockItem>JSON.parse(item);\n    if (new Date().getTime() - lockItem.expiresAt >= timeout) {\n      this._config.debugEnabled ?? console.debug('FastMutex client \"%s\" removed an expired record on \"%s\"', this._clientId, key);\n      localStorage.removeItem(key);\n      return null;\n    }\n\n    return lockItem.clientId;\n  }\n\n  private _releaseExpiredLock(key: string){\n    var item = localStorage.getItem(key);\n\n    if (!item) return null;\n\n    var lockItem = <LockItem>JSON.parse(item);\n\n    if (lockItem.expiresAt <= new Date().getTime()) {\n      this._config.debugEnabled ?? console.debug('FastMutex auto removed an expired record on \"%s\"', key);\n      localStorage.removeItem(key);\n    }\n  }\n}\n"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"rxjs":{"assertions":{},"external":true,"id":"rxjs","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./models/mutex-fast-lock-config":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/mutex-lock-stats":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./models/lock-item":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/lock-item.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":2305,"body":[{"type":"ImportDeclaration","start":0,"end":41,"specifiers":[{"type":"ImportSpecifier","start":9,"end":17,"imported":{"type":"Identifier","start":9,"end":17,"name":"NgModule"},"local":{"type":"Identifier","start":9,"end":17,"name":"NgModule"}}],"source":{"type":"Literal","start":25,"end":40,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ImportDeclaration","start":42,"end":117,"specifiers":[{"type":"ImportSpecifier","start":51,"end":73,"imported":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"},"local":{"type":"Identifier","start":51,"end":73,"name":"MUTEX_FAST_LOCK_CONFIG"}}],"source":{"type":"Literal","start":81,"end":116,"value":"./mutex-fast-lock-config.injector","raw":"\"./mutex-fast-lock-config.injector\""}},{"type":"ImportDeclaration","start":118,"end":154,"specifiers":[{"type":"ImportNamespaceSpecifier","start":125,"end":132,"local":{"type":"Identifier","start":130,"end":132,"name":"i0"}}],"source":{"type":"Literal","start":138,"end":153,"value":"@angular/core","raw":"\"@angular/core\""}},{"type":"ExportNamedDeclaration","start":155,"end":409,"declaration":{"type":"ClassDeclaration","start":162,"end":409,"id":{"type":"Identifier","start":168,"end":187,"name":"MutexFastLockModule"},"superClass":null,"body":{"type":"ClassBody","start":188,"end":409,"body":[{"type":"MethodDefinition","start":194,"end":407,"static":true,"computed":false,"key":{"type":"Identifier","start":201,"end":208,"name":"forRoot"},"kind":"method","value":{"type":"FunctionExpression","start":208,"end":407,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":209,"end":215,"name":"config"}],"body":{"type":"BlockStatement","start":217,"end":407,"body":[{"type":"ReturnStatement","start":227,"end":401,"argument":{"type":"ObjectExpression","start":235,"end":399,"properties":[{"type":"Property","start":249,"end":278,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":249,"end":257,"name":"ngModule"},"value":{"type":"Identifier","start":259,"end":278,"name":"MutexFastLockModule"},"kind":"init"},{"type":"Property","start":292,"end":389,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":292,"end":301,"name":"providers"},"value":{"type":"ArrayExpression","start":303,"end":389,"elements":[{"type":"ObjectExpression","start":321,"end":374,"properties":[{"type":"Property","start":323,"end":354,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":323,"end":330,"name":"provide"},"value":{"type":"Identifier","start":332,"end":354,"name":"MUTEX_FAST_LOCK_CONFIG"},"kind":"init"},{"type":"Property","start":356,"end":372,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":356,"end":364,"name":"useValue"},"value":{"type":"Identifier","start":366,"end":372,"name":"config"},"kind":"init"}]}]},"kind":"init"}]}}]}}}]}},"specifiers":[],"source":null},{"type":"ExpressionStatement","start":410,"end":522,"expression":{"type":"AssignmentExpression","start":410,"end":521,"operator":"=","left":{"type":"MemberExpression","start":410,"end":434,"object":{"type":"Identifier","start":410,"end":429,"name":"MutexFastLockModule"},"property":{"type":"Identifier","start":430,"end":434,"name":"fac"},"computed":false,"optional":false},"right":{"type":"FunctionExpression","start":437,"end":521,"id":{"type":"Identifier","start":446,"end":473,"name":"MutexFastLockModule_Factory"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":474,"end":475,"name":"t"}],"body":{"type":"BlockStatement","start":477,"end":521,"body":[{"type":"ReturnStatement","start":479,"end":519,"argument":{"type":"NewExpression","start":486,"end":518,"callee":{"type":"LogicalExpression","start":491,"end":515,"left":{"type":"Identifier","start":491,"end":492,"name":"t"},"operator":"||","right":{"type":"Identifier","start":496,"end":515,"name":"MutexFastLockModule"}},"arguments":[]}}]}}}},{"type":"ExpressionStatement","start":523,"end":615,"expression":{"type":"AssignmentExpression","start":523,"end":614,"operator":"=","left":{"type":"MemberExpression","start":523,"end":547,"object":{"type":"Identifier","start":523,"end":542,"name":"MutexFastLockModule"},"property":{"type":"Identifier","start":543,"end":547,"name":"mod"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":564,"end":614,"callee":{"type":"MemberExpression","start":564,"end":583,"object":{"type":"Identifier","start":564,"end":566,"name":"i0"},"property":{"type":"Identifier","start":567,"end":583,"name":"defineNgModule"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":584,"end":613,"properties":[{"type":"Property","start":586,"end":611,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":586,"end":590,"name":"type"},"value":{"type":"Identifier","start":592,"end":611,"name":"MutexFastLockModule"},"kind":"init"}]}],"optional":false,"_rollupAnnotations":[{"type":"Block","value":"@__PURE__","start":550,"end":563}]}}},{"type":"ExpressionStatement","start":616,"end":681,"expression":{"type":"AssignmentExpression","start":616,"end":680,"operator":"=","left":{"type":"MemberExpression","start":616,"end":640,"object":{"type":"Identifier","start":616,"end":635,"name":"MutexFastLockModule"},"property":{"type":"Identifier","start":636,"end":640,"name":"inj"},"computed":false,"optional":false},"right":{"type":"CallExpression","start":657,"end":680,"callee":{"type":"MemberExpression","start":657,"end":676,"object":{"type":"Identifier","start":657,"end":659,"name":"i0"},"property":{"type":"Identifier","start":660,"end":676,"name":"defineInjector"},"computed":false,"optional":false},"arguments":[{"type":"ObjectExpression","start":677,"end":679,"properties":[]}],"optional":false,"_rollupAnnotations":[{"type":"Block","value":"@__PURE__","start":643,"end":656}]}}},{"type":"ExpressionStatement","start":682,"end":842,"expression":{"type":"CallExpression","start":682,"end":841,"callee":{"type":"FunctionExpression","start":683,"end":838,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":695,"end":838,"body":[{"type":"ExpressionStatement","start":697,"end":836,"expression":{"type":"LogicalExpression","start":697,"end":835,"left":{"type":"LogicalExpression","start":698,"end":743,"left":{"type":"BinaryExpression","start":698,"end":730,"left":{"type":"UnaryExpression","start":698,"end":714,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":705,"end":714,"name":"ngDevMode"}},"operator":"===","right":{"type":"Literal","start":719,"end":730,"value":"undefined","raw":"\"undefined\""}},"operator":"||","right":{"type":"Identifier","start":734,"end":743,"name":"ngDevMode"}},"operator":"&&","right":{"type":"CallExpression","start":748,"end":835,"callee":{"type":"MemberExpression","start":748,"end":768,"object":{"type":"Identifier","start":748,"end":750,"name":"i0"},"property":{"type":"Identifier","start":751,"end":768,"name":"setClassMetadata"},"computed":false,"optional":false},"arguments":[{"type":"Identifier","start":769,"end":788,"name":"MutexFastLockModule"},{"type":"ArrayExpression","start":790,"end":822,"elements":[{"type":"ObjectExpression","start":791,"end":821,"properties":[{"type":"Property","start":801,"end":815,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":801,"end":805,"name":"type"},"value":{"type":"Identifier","start":807,"end":815,"name":"NgModule"},"kind":"init"}]}]},{"type":"Literal","start":824,"end":828,"value":null,"raw":"null"},{"type":"Literal","start":830,"end":834,"value":null,"raw":"null"}],"optional":false}}}]}},"arguments":[],"optional":false}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRzNFLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUEyQjtRQUV4QyxPQUFPLENBQUM7WUFDTixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLFNBQVMsRUFBRTtnQkFDVCxFQUFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO2FBQ3REO1NBQ0YsQ0FBQyxDQUFDO0lBRUwsQ0FBQzs7c0ZBVlUsbUJBQW1CO3FFQUFuQixtQkFBbUI7O3VGQUFuQixtQkFBbUI7Y0FEL0IsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gXCIuL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3JcIjtcblxuQE5nTW9kdWxlKClcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBNdXRleEZhc3RMb2NrQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyczxNdXRleEZhc3RMb2NrTW9kdWxlPiB7XG5cbiAgICByZXR1cm4gKHtcbiAgICAgIG5nTW9kdWxlOiBNdXRleEZhc3RMb2NrTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogTVVURVhfRkFTVF9MT0NLX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxuICAgICAgXVxuICAgIH0pO1xuXG4gIH1cbn1cbiJdfQ==","start":843,"end":2305}]},"code":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nexport class MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n}\nMutexFastLockModule.fac = function MutexFastLockModule_Factory(t) { return new (t || MutexFastLockModule)(); };\nMutexFastLockModule.mod = /*@__PURE__*/ i0.defineNgModule({ type: MutexFastLockModule });\nMutexFastLockModule.inj = /*@__PURE__*/ i0.defineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(MutexFastLockModule, [{\n        type: NgModule\n    }], null, null); })();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRzNFLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUEyQjtRQUV4QyxPQUFPLENBQUM7WUFDTixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLFNBQVMsRUFBRTtnQkFDVCxFQUFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO2FBQ3REO1NBQ0YsQ0FBQyxDQUFDO0lBRUwsQ0FBQzs7c0ZBVlUsbUJBQW1CO3FFQUFuQixtQkFBbUI7O3VGQUFuQixtQkFBbUI7Y0FEL0IsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gXCIuL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3JcIjtcblxuQE5nTW9kdWxlKClcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBNdXRleEZhc3RMb2NrQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyczxNdXRleEZhc3RMb2NrTW9kdWxlPiB7XG5cbiAgICByZXR1cm4gKHtcbiAgICAgIG5nTW9kdWxlOiBNdXRleEZhc3RMb2NrTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogTVVURVhfRkFTVF9MT0NLX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxuICAgICAgXVxuICAgIH0pO1xuXG4gIH1cbn1cbiJdfQ==","customTransformCache":false,"dependencies":["@angular/core","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock-config.injector.mjs"],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"originalCode":"import { NgModule } from \"@angular/core\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\nimport * as i0 from \"@angular/core\";\nexport class MutexFastLockModule {\n    static forRoot(config) {\n        return ({\n            ngModule: MutexFastLockModule,\n            providers: [\n                { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n            ]\n        });\n    }\n}\nMutexFastLockModule.fac = function MutexFastLockModule_Factory(t) { return new (t || MutexFastLockModule)(); };\nMutexFastLockModule.mod = /*@__PURE__*/ i0.defineNgModule({ type: MutexFastLockModule });\nMutexFastLockModule.inj = /*@__PURE__*/ i0.defineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(MutexFastLockModule, [{\n        type: NgModule\n    }], null, null); })();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXV0ZXgtZmFzdC1sb2NrLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvbGliL211dGV4LWZhc3QtbG9jay5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUF1QixRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFOUQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7O0FBRzNFLE1BQU0sT0FBTyxtQkFBbUI7SUFDOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUEyQjtRQUV4QyxPQUFPLENBQUM7WUFDTixRQUFRLEVBQUUsbUJBQW1CO1lBQzdCLFNBQVMsRUFBRTtnQkFDVCxFQUFFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO2FBQ3REO1NBQ0YsQ0FBQyxDQUFDO0lBRUwsQ0FBQzs7c0ZBVlUsbUJBQW1CO3FFQUFuQixtQkFBbUI7O3VGQUFuQixtQkFBbUI7Y0FEL0IsUUFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMsIE5nTW9kdWxlIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE11dGV4RmFzdExvY2tDb25maWcgfSBmcm9tIFwiLi9tb2RlbHMvbXV0ZXgtZmFzdC1sb2NrLWNvbmZpZ1wiO1xuaW1wb3J0IHsgTVVURVhfRkFTVF9MT0NLX0NPTkZJRyB9IGZyb20gXCIuL211dGV4LWZhc3QtbG9jay1jb25maWcuaW5qZWN0b3JcIjtcblxuQE5nTW9kdWxlKClcbmV4cG9ydCBjbGFzcyBNdXRleEZhc3RMb2NrTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3QoY29uZmlnOiBNdXRleEZhc3RMb2NrQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyczxNdXRleEZhc3RMb2NrTW9kdWxlPiB7XG5cbiAgICByZXR1cm4gKHtcbiAgICAgIG5nTW9kdWxlOiBNdXRleEZhc3RMb2NrTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogTVVURVhfRkFTVF9MT0NLX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxuICAgICAgXVxuICAgIH0pO1xuXG4gIH1cbn1cbiJdfQ==","originalSourcemap":{"version":3,"file":"mutex-fast-lock.module.js","sourceRoot":"","sources":["../../../../projects/mutex-fast-lock/src/lib/mutex-fast-lock.module.ts"],"names":[],"mappings":[[[0,0,0,0],[7,0,0,7],[9,0,0,30],[17,0,0,38],[19,0,0,40],[25,0,0,46],[40,0,0,61],[41,0,0,62]],[[0,0,2,0],[7,0,2,7],[9,0,2,9],[31,0,2,31],[33,0,2,33],[39,0,2,39],[74,0,2,74],[75,0,2,75]],[],[[0,0,5,0],[6,0,5,6],[13,0,5,13],[32,0,5,32]],[[4,0,6,2],[10,0,6,8],[11,0,6,9],[18,0,6,16],[19,0,6,17],[25,0,6,44]],[[8,0,8,4],[15,0,8,11],[16,0,8,12]],[[12,0,9,6],[20,0,9,14],[22,0,9,16],[41,0,9,35]],[[12,0,10,6],[21,0,10,15],[23,0,10,17]],[[16,0,11,8],[18,0,11,10],[25,0,11,17],[27,0,11,19],[49,0,11,41],[51,0,11,43],[59,0,11,51],[61,0,11,53],[67,0,11,59],[69,0,11,61]],[[13,0,12,7]],[[9,0,13,5],[10,0,13,6],[11,0,13,7]],[[4,0,15,2],[5,0,15,3]],[],[[86,0,5,13],[105,0,5,32]],[[69,0,5,13],[88,0,5,32]],[],[[87,0,5,13],[106,0,5,32]],[[14,0,4,1],[22,0,4,9]]],"sourcesContent":["import { ModuleWithProviders, NgModule } from \"@angular/core\";\nimport { MutexFastLockConfig } from \"./models/mutex-fast-lock-config\";\nimport { MUTEX_FAST_LOCK_CONFIG } from \"./mutex-fast-lock-config.injector\";\n\n@NgModule()\nexport class MutexFastLockModule {\n  static forRoot(config: MutexFastLockConfig): ModuleWithProviders<MutexFastLockModule> {\n\n    return ({\n      ngModule: MutexFastLockModule,\n      providers: [\n        { provide: MUTEX_FAST_LOCK_CONFIG, useValue: config },\n      ]\n    });\n\n  }\n}\n"]},"resolvedIds":{"@angular/core":{"assertions":{},"external":true,"id":"@angular/core","meta":{},"moduleSideEffects":true,"resolvedBy":"rollup","syntheticNamedExports":false},"./mutex-fast-lock-config.injector":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock-config.injector.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":992,"body":[{"type":"ExportAllDeclaration","start":53,"end":105,"exported":null,"source":{"type":"Literal","start":67,"end":104,"value":"./lib/models/mutex-fast-lock-config","raw":"'./lib/models/mutex-fast-lock-config'"}},{"type":"ExportAllDeclaration","start":106,"end":152,"exported":null,"source":{"type":"Literal","start":120,"end":151,"value":"./lib/models/mutex-lock-stats","raw":"'./lib/models/mutex-lock-stats'"}},{"type":"ExportAllDeclaration","start":153,"end":199,"exported":null,"source":{"type":"Literal","start":167,"end":198,"value":"./lib/mutex-fast-lock.service","raw":"'./lib/mutex-fast-lock.service'"}},{"type":"ExportAllDeclaration","start":200,"end":245,"exported":null,"source":{"type":"Literal","start":214,"end":244,"value":"./lib/mutex-fast-lock.module","raw":"'./lib/mutex-fast-lock.module'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogUHVibGljIEFQSSBTdXJmYWNlIG9mIGNuZXQtbXV0ZXgtZmFzdC1sb2NrXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWcnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLm1vZHVsZSc7XG4iXX0=","start":246,"end":992}]},"code":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogUHVibGljIEFQSSBTdXJmYWNlIG9mIGNuZXQtbXV0ZXgtZmFzdC1sb2NrXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWcnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLm1vZHVsZSc7XG4iXX0=","customTransformCache":false,"dependencies":["/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-fast-lock-config.mjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-lock-stats.mjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.service.mjs","/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.module.mjs"],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\n * Public API Surface of cnet-mutex-fast-lock\n */\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL211dGV4LWZhc3QtbG9jay9zcmMvcHVibGljLWFwaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7R0FFRztBQUVILGNBQWMscUNBQXFDLENBQUM7QUFDcEQsY0FBYywrQkFBK0IsQ0FBQztBQUM5QyxjQUFjLCtCQUErQixDQUFDO0FBQzlDLGNBQWMsOEJBQThCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogUHVibGljIEFQSSBTdXJmYWNlIG9mIGNuZXQtbXV0ZXgtZmFzdC1sb2NrXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWZhc3QtbG9jay1jb25maWcnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbW9kZWxzL211dGV4LWxvY2stc3RhdHMnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLnNlcnZpY2UnO1xuZXhwb3J0ICogZnJvbSAnLi9saWIvbXV0ZXgtZmFzdC1sb2NrLm1vZHVsZSc7XG4iXX0=","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[51,0,4,51],[52,0,4,52]],[[0,0,5,0],[14,0,5,14],[45,0,5,45],[46,0,5,46]],[[0,0,6,0],[14,0,6,14],[45,0,6,45],[46,0,6,46]],[[0,0,7,0],[14,0,7,14],[44,0,7,44],[45,0,7,45]]],"sourcesContent":["/*\n * Public API Surface of cnet-mutex-fast-lock\n */\n\nexport * from './lib/models/mutex-fast-lock-config';\nexport * from './lib/models/mutex-lock-stats';\nexport * from './lib/mutex-fast-lock.service';\nexport * from './lib/mutex-fast-lock.module';\n"]},"resolvedIds":{"./lib/mutex-fast-lock.service":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.service.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-fast-lock-config":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-fast-lock-config.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/mutex-fast-lock.module":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/mutex-fast-lock.module.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false},"./lib/models/mutex-lock-stats":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/lib/models/mutex-lock-stats.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"assertions":{},"ast":{"type":"Program","start":0,"end":548,"body":[{"type":"ExportAllDeclaration","start":48,"end":77,"exported":null,"source":{"type":"Literal","start":62,"end":76,"value":"./public-api","raw":"'./public-api'"}}],"sourceType":"module","_rollupRemoved":[{"type":"Line","value":"# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","start":78,"end":548}]},"code":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/public-api.mjs"],"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/devlearning-mutex-fast-lock.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2bGVhcm5pbmctbXV0ZXgtZmFzdC1sb2NrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvamVjdHMvbXV0ZXgtZmFzdC1sb2NrL3NyYy9kZXZsZWFybmluZy1tdXRleC1mYXN0LWxvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"devlearning-mutex-fast-lock.js","sourceRoot":"","sources":["../../../projects/mutex-fast-lock/src/devlearning-mutex-fast-lock.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"assertions":{},"external":false,"id":"/Users/lucaevaroni/DeVLearninG/sources/mutex-fast-lock/dist/mutex-fast-lock/esm2020/public-api.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"json":{},"file-loader":{}}}